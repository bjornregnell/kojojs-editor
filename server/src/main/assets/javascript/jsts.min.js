var jsts=function(e){"use strict";/* Polyfill service v3.13.0
   * For detailed credits and licence information see http://github.com/financial-times/polyfill-service
   *
   * - Array.prototype.fill, License: CC0 */var oe=Math.cos,re=Math.sin,de=Math.PI,se=Math.atan2,ae=Math.round,_e=Math.sqrt,le=Number.MAX_VALUE,ge=Math.log,ce=Math.log2,ue=Math.ceil,pe=Math.trunc,me=Number.isNaN,ye=Number.parseFloat,fe=Math.floor,xe=Number.isInteger,he=Number.isFinite,Ee=Math.max,Ie=Math.min,Ne=Math.abs,Le=Math.pow;function t(e){this.message=e}function n(e,t){this.low=0|t,this.high=0|e}function o(){}function r(){}function d(){}function s(){}function a(){}function _(e){this.name="RuntimeException",this.message=e,this.stack=new Error().stack,Error.call(this,e)}function l(e,t){return e.interfaces_&&-1<e.interfaces_.indexOf(t)}/**
   * @see http://download.oracle.com/javase/6/docs/api/java/util/Iterator.html
   * @constructor
   * @private
   */function g(){}/**
   * Returns true if the iteration has more elements.
   * @return {boolean}
   */ /**
   * @see http://download.oracle.com/javase/6/docs/api/java/util/Collection.html
   *
   * @constructor
   * @private
   */function c(){}/**
   * Ensures that this collection contains the specified element (optional
   * operation).
   * @param {Object} e
   * @return {boolean}
   */ /**
   * @param {string=} message Optional message
   * @extends {Error}
   * @constructor
   * @private
   */function u(e){this.message=e||""}/**
   * @see http://download.oracle.com/javase/6/docs/api/java/util/List.html
   *
   * @extends {javascript.util.Collection}
   * @constructor
   * @private
   */function p(){}/**
   * @param {string=} message Optional message
   * @extends {Error}
   * @constructor
   * @private
   */function m(e){this.message=e||""}/**
   * @param {string=} message Optional message
   * @extends {Error}
   * @constructor
   * @private
   */function y(e){this.message=e||""}/**
   * @see http://download.oracle.com/javase/6/docs/api/java/util/ArrayList.html
   *
   * @extends List
   * @private
   */function f(){this.array_=[],arguments[0]instanceof c&&this.addAll(arguments[0])}function x(){}function h(e){this.str=e}function E(e){this.value=e}function I(){}function N(){}/**
   * @see http://download.oracle.com/javase/6/docs/api/java/util/Map.html
   *
   * @constructor
   * @private
   */function L(){}/**
   * Returns the value to which the specified key is mapped, or null if this map
   * contains no mapping for the key.
   * @param {Object} key
   * @return {Object}
   */ /**
   * @see http://download.oracle.com/javase/6/docs/api/java/util/SortedMap.html
   *
   * @extends {Map}
   * @constructor
   * @private
   */function C(){}/**
   * @see http://download.oracle.com/javase/6/docs/api/java/util/Set.html
   *
   * @extends {Collection}
   * @constructor
   * @private
   */function S(){}/**
   * @see http://docs.oracle.com/javase/6/docs/api/java/util/HashSet.html
   *
   * @extends {javascript.util.Set}
   * @constructor
   * @private
   */function T(){this.array_=[],arguments[0]instanceof c&&this.addAll(arguments[0])}function R(e){return null==e?$e:e.color}function O(e){return null==e?null:e.parent}function P(e,t){null!==e&&(e.color=t)}function v(e){return null==e?null:e.left}function b(e){return null==e?null:e.right}/**
   * @see http://download.oracle.com/javase/6/docs/api/java/util/TreeMap.html
   *
   * @extends {SortedMap}
   * @constructor
   * @private
   */function D(){this.root_=null,this.size_=0}/**
   * @see http://download.oracle.com/javase/6/docs/api/java/util/SortedSet.html
   *
   * @extends {Set}
   * @constructor
   * @private
   */function A(){}/**
   * @see http://download.oracle.com/javase/6/docs/api/java/util/TreeSet.html
   *
   * @extends {SortedSet}
   * @constructor
   * @private
   */function F(){this.array_=[],arguments[0]instanceof c&&this.addAll(arguments[0])}/**
   * @see http://download.oracle.com/javase/6/docs/api/java/util/Arrays.html
   *
   * @constructor
   * @private
   */function M(){}/**
   */function G(){}function Y(){}function z(){}function q(){}function B(){}function V(e){this.str=e}function U(){}function X(e,t){return e===t||e!==e&&t!==t}// eslint-disable-line
function k(e){this.add?e.forEach(this.add,this):// init Map argument like `[[1,2], [{}, 4]]`
e.forEach(function(e){this.set(e[0],e[1])},this)}function H(e){// Aurora here does it while Canary doesn't
return this.has(e)&&(this._keys.splice(vt,1),this._values.splice(vt,1),this._itp.forEach(function(e){vt<e[0]&&e[0]--})),-1<vt}function w(e){return this.has(e)?this._values[vt]:void 0}function W(e,t){if(this.objectOnly&&t!==Object(t))throw new TypeError("Invalid value used as weak collection key");// NaN or 0 passed
if(t!==t||0===t)for(vt=e.length;vt--&&!X(e[vt],t););// eslint-disable-line
else vt=e.indexOf(t);return-1<vt}function j(e,t){return this.has(e)?this._values[vt]=t:this._values[this._keys.push(e)-1]=t,this}function K(e,t,n){var i=[0],o=!1;return e.push(i),{next:function(){var r=i[0],d;return!o&&r<t.length?(d=n?[t[r],n[r]]:t[r],i[0]++):(o=!0,e.splice(e.indexOf(i),1)),{done:o,value:d}}}}function Z(){return this._values.length}/**
   * @see http://download.oracle.com/javase/6/docs/api/java/util/HashMap.html
   *
   * @extends {javascript.util.Map}
   * @constructor
   * @private
   */function Q(){this.map_=new bt}/**
   * @param {string=} message Optional message
   * @extends {Error}
   * @constructor
   * @private
   */function J(e){this.message=e||""}/**
   * @see http://download.oracle.com/javase/6/docs/api/java/util/Stack.html
   *
   * @extends {List}
   * @constructor
   * @private
   */function $(){this.array_=[]}function ee(){}/**
   * Calculates the exponent of the bit-pattern for a number. Uses code from:
   * http://www.merlyn.demon.co.uk/js-exact.htm
   *
   * @param {Number}
   *          NumW 32 or 64 to denote the number of bits.
   * @param {Number}
   *          Qty the number to calculate the bit pattern for.
   * @return {Number} The integer value of the exponent.
   * @private
   */function te(e,t){var n={32:8,64:11}[e],i,o,r,d;if(d||(i=0>t||0>1/t,!isFinite(t)&&(d={32:{d:127,c:128,b:0,a:0},64:{d:32752,c:0,b:0,a:0}}[e],i&&(d.d+=1<<e/4-1),o=Le(2,n)-1,r=0)),!d){for(o={32:127,64:1023}[e],r=Ne(t);2<=r;)o++,r/=2;for(;1>r&&0<o;)o--,r*=2;0>=o&&(r/=2),32===e&&254<o&&(d={d:i?255:127,c:128,b:0,a:0},o=Le(2,n)-1,r=0)}return o}/*eslint-disable no-undef */function ne(e){return[e.x,e.y]}function ie(){this.array_=[]}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(e){if(void 0===this||null===this)throw new TypeError(this+" is not an object");var t=Object(this),n=Ee(Ie(t.length,9007199254740991),0)||0,i=1 in arguments?parseInt(+arguments[1],10)||0:0;i=0>i?Ee(n+i,0):Ie(i,n);var o=2 in arguments&&void 0!==arguments[2]?parseInt(+arguments[2],10)||0:n;for(o=0>o?Ee(n+arguments[2],0):Ie(o,n);i<o;)t[i]=e,++i;return t},writable:!0}),he=he||function(e){return"number"==typeof e&&isFinite(e)},xe=xe||function(e){return"number"==typeof e&&isFinite(e)&&fe(e)===e},ye=ye||parseFloat,me=me||function(e){return e!==e;// eslint-disable-line
},pe=pe||function(e){return 0>e?ue(e):fe(e)},ce=ce||function(e){var t=Math.LOG2E;return ge(e)*t};class Ce{constructor(){Ce.constructor_.apply(this,arguments)}static equalsWithTolerance(e,t,n){return Ne(e-t)<=n}getClass(){return Ce}get interfaces_(){return[]}}Ce.constructor_=function(){},n.toBinaryString=function(e){for(var t="",n=2147483648;0<n;n>>>=1)t+=(e.high&n)==n?"1":"0";for(var n=2147483648;0<n;n>>>=1)t+=(e.low&n)==n?"1":"0";return t},o.isNaN=e=>me(e),o.isInfinite=e=>!he(e),o.MAX_VALUE=le,"function"==typeof Float64Array&&"function"==typeof Int32Array?function(){var e=new Float64Array(1),t=new Int32Array(e.buffer);o.doubleToLongBits=function(i){e[0]=i;var o=0|t[0],r=0|t[1];return 2146435072==(2146435072&r)&&0!=(r&1048575)&&0!=o&&(o=0,r=2146959360),new n(r,o)},o.longBitsToDouble=function(n){return t[0]=n.low,t[1]=n.high,e[0]}}():function(){var e=ce,t=fe,r=Le,d=function(){for(var n=53,o;0<n;n--)if(o=r(2,n)-1,t(e(o))+1===n)return o;return 0}();o.doubleToLongBits=function(i){var o=Number.NEGATIVE_INFINITY,s,a,_,l,g,c,u,p,m;// Handle some special values.
if(0>i||1/i===o?(c=-2147483648,i=-i):c=0,0===i)// exponent: 00..00, significand: 00..00
return m=0,p=c,new n(p,m);if(i===1/0)// exponent: 11..11, significand: 00..00
return m=0,p=2146435072|c,new n(p,m);if(i!==i)// exponent: 11..11, significand: 10..00
return m=0,p=2146959360,new n(p,m);// Preinitialize variables, that are not neccessarily set by
// the algorithm.
// Process the integer part if it's greater than 1. Zero requires
// no bits at all, 1 represents the implicit (hidden) leading bit,
// which must not be written as well.
if(l=0,m=0,s=t(i),1<s)// If we can reliably determine the number of bits required for
// the integer part,
if(s<=d)l=t(e(s))/* + 1 - 1*/,20>=l?(m=0,p=1048575&s<<20-l):(_=l-20,a=r(2,_),m=s%a<<32-_,p=1048575&s/a);else for(_=s,m=0;a=_/2,_=t(a),0!==_;)// Count this bit, shift low and carry bit #0 from high.
// Shift high.
l++,m>>>=1,m|=(1&p)<<31,p>>>=1,a!==_&&(p|=524288);// Bias the exponent.
// If some significand bits are still left to be filled and
// the fractional part is not zero, convert the fraction using
// the multiply-by-2 algorithm.
if(u=l+1023,g=0===s,s=i-s,52>l&&0!==s)for(_=0;;){if(a=2*s,1<=a?(s=a-1,g?(u--,g=!1):(_<<=1,_|=1,l++)):(s=a,g?0==--u&&(l++,g=!1):(_<<=1,l++)),20===l)p|=_,_=0;else if(52===l){m|=_;break}if(1===a){20>l?p|=_<<20-l:52>l&&(m|=_<<52-l);break}}// Copy/shift the exponent and sign bits into the high word.
return p|=u<<20,p|=c,new n(p,m)},o.longBitsToDouble=function(e){var t=e.high,n=e.low,o,d,s,a;d=-2147483648&t?-1:1,s=((2146435072&t)>>20)-1023,a=0,o=524288;for(var _=1;20>=_;_++)t&o&&(a+=r(2,-_)),o>>>=1;// Continue with all 32 bits from the low word.
o=-2147483648;for(var _=21;52>=_;_++)n&o&&(a+=r(2,-_)),o>>>=1;// Handle special values.
// Check for zero and subnormal values.
if(-1023===s){if(0===a)// +/-1.0 * 0.0 => +/-0.0
return 0*d;s=-1022}// Check for +/-Infinity or NaN.
else{if(1024===s)return 0===a?d/0:NaN;// Nothing special? Seems to be a normal number.
a+=1}return d*a*r(2,s)}}(),_.prototype=Object.create(Error.prototype),_.prototype.constructor=Error;class Se extends _{constructor(){super(),Se.constructor_.apply(this,arguments)}getClass(){return Se}get interfaces_(){return[]}}Se.constructor_=function(){if(0===arguments.length)_.constructor_.call(this);else if(1===arguments.length){let e=arguments[0];_.constructor_.call(this,e)}};class Te{constructor(){Te.constructor_.apply(this,arguments)}static shouldNeverReachHere(){if(0===arguments.length)Te.shouldNeverReachHere(null);else if(1===arguments.length){let e=arguments[0];throw new Se("Should never reach here"+(null===e?"":": "+e))}}static isTrue(){if(1===arguments.length){let e=arguments[0];Te.isTrue(e,null)}else if(2===arguments.length){let e=arguments[0],t=arguments[1];if(!e)if(null===t)throw new Se;else throw new Se(t)}}static equals(){if(2===arguments.length){let e=arguments[0],t=arguments[1];Te.equals(e,t,null)}else if(3===arguments.length){let e=arguments[0],t=arguments[1],n=arguments[2];if(!t.equals(e))throw new Se("Expected "+e+" but encountered "+t+(null===n?"":": "+n))}}getClass(){return Te}get interfaces_(){return[]}}Te.constructor_=function(){};class Re{constructor(){Re.constructor_.apply(this,arguments)}static hashCode(){if(1===arguments.length&&"number"==typeof arguments[0]){let t=arguments[0];var e=o.doubleToLongBits(t);return pe(e^e>>>32)}}setOrdinate(e,n){switch(e){case Re.X:this.x=n;break;case Re.Y:this.y=n;break;case Re.Z:this.z=n;break;default:throw new t("Invalid ordinate index: "+e);}}equals2D(){if(1===arguments.length){let e=arguments[0];return this.x===e.x&&this.y===e.y}if(2===arguments.length){let e=arguments[0],t=arguments[1];return!!Ce.equalsWithTolerance(this.x,e.x,t)&&!!Ce.equalsWithTolerance(this.y,e.y,t)}}getOrdinate(e){switch(e){case Re.X:return this.x;case Re.Y:return this.y;case Re.Z:return this.z;}throw new t("Invalid ordinate index: "+e)}equals3D(e){return this.x===e.x&&this.y===e.y&&(this.z===e.z||o.isNaN(this.z)&&o.isNaN(e.z))}equals(e){return!!(e instanceof Re)&&this.equals2D(e)}equalInZ(e,t){return Ce.equalsWithTolerance(this.z,e.z,t)}compareTo(e){var t=e;return this.x<t.x?-1:this.x>t.x?1:this.y<t.y?-1:this.y>t.y?1:0}clone(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return Te.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw t}finally{}}copy(){return new Re(this)}toString(){return"("+this.x+", "+this.y+", "+this.z+")"}distance3D(e){var t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return _e(t*t+n*n+i*i)}distance(e){var t=this.x-e.x,n=this.y-e.y;return _e(t*t+n*n)}hashCode(){var e=17;return e=37*e+Re.hashCode(this.x),e=37*e+Re.hashCode(this.y),e}setCoordinate(e){this.x=e.x,this.y=e.y,this.z=e.z}getClass(){return Re}get interfaces_(){return[r,d,a]}}class Oe{constructor(){Oe.constructor_.apply(this,arguments)}static compare(e,t){return e<t?-1:e>t?1:o.isNaN(e)?o.isNaN(t)?0:-1:o.isNaN(t)?1:0}compare(e,t){var n=e,i=t,o=Oe.compare(n.x,i.x);if(0!==o)return o;var r=Oe.compare(n.y,i.y);if(0!==r)return r;if(2>=this._dimensionsToTest)return 0;var d=Oe.compare(n.z,i.z);return d}getClass(){return Oe}get interfaces_(){return[s]}}Oe.constructor_=function(){if(this._dimensionsToTest=2,0===arguments.length)Oe.constructor_.call(this,2);else if(1===arguments.length){let e=arguments[0];if(2!==e&&3!==e)throw new t("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}},Re.DimensionalComparator=Oe,Re.constructor_=function(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)Re.constructor_.call(this,0,0);else if(1===arguments.length){let e=arguments[0];Re.constructor_.call(this,e.x,e.y,e.z)}else if(2===arguments.length){let e=arguments[0],t=arguments[1];Re.constructor_.call(this,e,t,Re.NULL_ORDINATE)}else if(3===arguments.length){let e=arguments[0],t=arguments[1],n=arguments[2];this.x=e,this.y=t,this.z=n}},Re.serialVersionUID=6683108902428367e3,Re.NULL_ORDINATE=o.NaN,Re.X=0,Re.Y=1,Re.Z=2,g.prototype.hasNext=function(){},g.prototype.next=function(){},g.prototype.remove=function(){},c.prototype.add=function(){},c.prototype.addAll=function(){},c.prototype.isEmpty=function(){},c.prototype.iterator=function(){},c.prototype.size=function(){},c.prototype.toArray=function(){},c.prototype.remove=function(){},u.prototype=new Error,u.prototype.name="IndexOutOfBoundsException",p.prototype=Object.create(c.prototype),p.prototype.constructor=p,p.prototype.get=function(){},p.prototype.set=function(){},p.prototype.isEmpty=function(){},m.prototype=new Error,m.prototype.name="NoSuchElementException",y.prototype=new Error,y.prototype.name="OperationNotSupported",f.prototype=Object.create(p.prototype),f.prototype.constructor=f,f.prototype.ensureCapacity=function(){},f.prototype.interfaces_=[p,c],f.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],0,arguments[1]),!0},f.prototype.clear=function(){this.array_=[]},f.prototype.addAll=function(e){for(var t=e.iterator();t.hasNext();)this.add(t.next());return!0},f.prototype.set=function(e,t){var n=this.array_[e];return this.array_[e]=t,n},f.prototype.iterator=function(){return new Pe(this)},f.prototype.get=function(e){if(0>e||e>=this.size())throw new u;return this.array_[e]},f.prototype.isEmpty=function(){return 0===this.array_.length},f.prototype.size=function(){return this.array_.length},f.prototype.toArray=function(){for(var e=[],t=0,n=this.array_.length;t<n;t++)e.push(this.array_[t]);return e},f.prototype.remove=function(e){for(var t=!1,n=0,o=this.array_.length;n<o;n++)if(this.array_[n]===e){this.array_.splice(n,1),t=!0;break}return t},f.prototype.removeAll=function(e){for(var t=e.iterator();t.hasNext();)this.remove(t.next());return!0};/**
   * @extends {Iterator}
   * @param {ArrayList} arrayList
   * @constructor
   * @private
   */var Pe=function(e){this.arrayList_=e,this.position_=0};/**
   * @override
   */Pe.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new m;return this.arrayList_.get(this.position_++)},Pe.prototype.hasNext=function(){return!!(this.position_<this.arrayList_.size())},Pe.prototype.set=function(e){return this.arrayList_.set(this.position_-1,e)},Pe.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))};class ve extends f{constructor(){super(),ve.constructor_.apply(this,arguments)}getCoordinate(e){return this.get(e)}addAll(){if(2===arguments.length&&"boolean"==typeof arguments[1]&&l(arguments[0],c)){let n=arguments[0],i=arguments[1];for(var e=!1,t=n.iterator();t.hasNext();)this.add(t.next(),i),e=!0;return e}return super.addAll.apply(this,arguments)}clone(){for(var e=super.clone.call(this),t=0;t<this.size();t++)e.add(t,this.get(t).clone());return e}toCoordinateArray(){return this.toArray(ve.coordArrayType)}add(){if(1===arguments.length){let e=arguments[0];super.add.call(this,e)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){let e=arguments[0],t=arguments[1];return this.add(e,t,!0),!0}if(arguments[0]instanceof Re&&"boolean"==typeof arguments[1]){let t=arguments[0],n=arguments[1];if(!n&&1<=this.size()){var e=this.get(this.size()-1);if(e.equals2D(t))return null}super.add.call(this,t)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){let e=arguments[0],t=arguments[1];return this.add(e,t),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){let e=arguments[0],n=arguments[1],i=arguments[2];if(i)for(var t=0;t<e.length;t++)this.add(e[t],n);else for(var t=e.length-1;0<=t;t--)this.add(e[t],n);return!0}if("boolean"==typeof arguments[2]&&xe(arguments[0])&&arguments[1]instanceof Re){let e=arguments[0],t=arguments[1],i=arguments[2];if(!i){var n=this.size();if(0<n){if(0<e){var o=this.get(e-1);if(o.equals2D(t))return null}if(e<n){var r=this.get(e);if(r.equals2D(t))return null}}}super.add.call(this,e,t)}}else if(4===arguments.length){let e=arguments[0],n=arguments[1],i=arguments[2],o=arguments[3];var d=1;i>o&&(d=-1);for(var t=i;t!==o;t+=d)this.add(e[t],n);return!0}}closeRing(){0<this.size()&&this.add(new Re(this.get(0)),!1)}getClass(){return ve}get interfaces_(){return[]}}ve.constructor_=function(){if(0===arguments.length);else if(1===arguments.length){let e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){let e=arguments[0],t=arguments[1];this.ensureCapacity(e.length),this.add(e,t)}},ve.coordArrayType=[].fill(null);class be{constructor(){be.constructor_.apply(this,arguments)}static intersects(){if(3===arguments.length){let e=arguments[0],t=arguments[1],n=arguments[2];return!!(n.x>=(e.x<t.x?e.x:t.x)&&n.x<=(e.x>t.x?e.x:t.x)&&n.y>=(e.y<t.y?e.y:t.y)&&n.y<=(e.y>t.y?e.y:t.y))}if(4===arguments.length){let o=arguments[0],r=arguments[1],d=arguments[2],s=arguments[3];var e=Ie(d.x,s.x),t=Ee(d.x,s.x),n=Ie(o.x,r.x),i=Ee(o.x,r.x);return!(n>t)&&!(i<e)&&(e=Ie(d.y,s.y),t=Ee(d.y,s.y),n=Ie(o.y,r.y),i=Ee(o.y,r.y),!(n>t)&&!(i<e))}}getArea(){return this.getWidth()*this.getHeight()}equals(e){if(!(e instanceof be))return!1;var t=e;return this.isNull()?t.isNull():this._maxx===t.getMaxX()&&this._maxy===t.getMaxY()&&this._minx===t.getMinX()&&this._miny===t.getMinY()}intersection(e){if(this.isNull()||e.isNull()||!this.intersects(e))return new be;var t=this._minx>e._minx?this._minx:e._minx,n=this._miny>e._miny?this._miny:e._miny,i=this._maxx<e._maxx?this._maxx:e._maxx,o=this._maxy<e._maxy?this._maxy:e._maxy;return new be(t,i,n,o)}isNull(){return this._maxx<this._minx}getMaxX(){return this._maxx}covers(){if(1===arguments.length){if(arguments[0]instanceof Re){let e=arguments[0];return this.covers(e.x,e.y)}if(arguments[0]instanceof be){let e=arguments[0];return!(this.isNull()||e.isNull())&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){let e=arguments[0],t=arguments[1];return!this.isNull()&&e>=this._minx&&e<=this._maxx&&t>=this._miny&&t<=this._maxy}}intersects(){if(1===arguments.length){if(arguments[0]instanceof be){let e=arguments[0];return!(this.isNull()||e.isNull())&&!(e._minx>this._maxx||e._maxx<this._minx||e._miny>this._maxy||e._maxy<this._miny)}if(arguments[0]instanceof Re){let e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){if(arguments[0]instanceof Re&&arguments[1]instanceof Re){let o=arguments[0],r=arguments[1];if(this.isNull())return!1;var e=o.x<r.x?o.x:r.x;if(e>this._maxx)return!1;var t=o.x>r.x?o.x:r.x;if(t<this._minx)return!1;var n=o.y<r.y?o.y:r.y;if(n>this._maxy)return!1;var i=o.y>r.y?o.y:r.y;return!(i<this._miny)}if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){let e=arguments[0],t=arguments[1];return!this.isNull()&&!(e>this._maxx||e<this._minx||t>this._maxy||t<this._miny)}}}getMinY(){return this._miny}getMinX(){return this._minx}expandToInclude(){if(1===arguments.length){if(arguments[0]instanceof Re){let e=arguments[0];this.expandToInclude(e.x,e.y)}else if(arguments[0]instanceof be){let e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){let e=arguments[0],t=arguments[1];this.isNull()?(this._minx=e,this._maxx=e,this._miny=t,this._maxy=t):(e<this._minx&&(this._minx=e),e>this._maxx&&(this._maxx=e),t<this._miny&&(this._miny=t),t>this._maxy&&(this._maxy=t))}}minExtent(){if(this.isNull())return 0;var e=this.getWidth(),t=this.getHeight();return e<t?e:t}getWidth(){return this.isNull()?0:this._maxx-this._minx}compareTo(e){var t=e;return this.isNull()?t.isNull()?0:-1:t.isNull()?1:this._minx<t._minx?-1:this._minx>t._minx?1:this._miny<t._miny?-1:this._miny>t._miny?1:this._maxx<t._maxx?-1:this._maxx>t._maxx?1:this._maxy<t._maxy?-1:this._maxy>t._maxy?1:0}translate(e,t){return this.isNull()?null:void this.init(this.getMinX()+e,this.getMaxX()+e,this.getMinY()+t,this.getMaxY()+t)}toString(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"}setToNull(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1}getHeight(){return this.isNull()?0:this._maxy-this._miny}maxExtent(){if(this.isNull())return 0;var e=this.getWidth(),t=this.getHeight();return e>t?e:t}expandBy(){if(1===arguments.length){let e=arguments[0];this.expandBy(e,e)}else if(2===arguments.length){let e=arguments[0],t=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=t,this._maxy+=t,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}}contains(){if(1===arguments.length){if(arguments[0]instanceof be){let e=arguments[0];return this.covers(e)}if(arguments[0]instanceof Re){let e=arguments[0];return this.covers(e)}}else if(2===arguments.length){let e=arguments[0],t=arguments[1];return this.covers(e,t)}}centre(){return this.isNull()?null:new Re((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)}init(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof Re){let e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof be){let e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){let e=arguments[0],t=arguments[1];this.init(e.x,t.x,e.y,t.y)}else if(4===arguments.length){let e=arguments[0],t=arguments[1],n=arguments[2],i=arguments[3];e<t?(this._minx=e,this._maxx=t):(this._minx=t,this._maxx=e),n<i?(this._miny=n,this._maxy=i):(this._miny=i,this._maxy=n)}}getMaxY(){return this._maxy}distance(e){if(this.intersects(e))return 0;var t=0;this._maxx<e._minx?t=e._minx-this._maxx:this._minx>e._maxx&&(t=this._minx-e._maxx);var n=0;return this._maxy<e._miny?n=e._miny-this._maxy:this._miny>e._maxy&&(n=this._miny-e._maxy),0==t?n:0==n?t:_e(t*t+n*n)}hashCode(){var e=17;return e=37*e+Re.hashCode(this._minx),e=37*e+Re.hashCode(this._maxx),e=37*e+Re.hashCode(this._miny),e=37*e+Re.hashCode(this._maxy),e}getClass(){return be}get interfaces_(){return[r,a]}}be.constructor_=function(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof Re){let e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof be){let e=arguments[0];this.init(e)}}else if(2===arguments.length){let e=arguments[0],t=arguments[1];this.init(e.x,t.x,e.y,t.y)}else if(4===arguments.length){let e=arguments[0],t=arguments[1],n=arguments[2],i=arguments[3];this.init(e,t,n,i)}},be.serialVersionUID=5873921885273102e3;class De extends x{constructor(){super(),De.constructor_.apply(this,arguments)}getClass(){return De}get interfaces_(){return[]}}De.constructor_=function(){x.constructor_.call(this,"Projective point not representable on the Cartesian plane.")},h.prototype.append=function(t){this.str+=t},h.prototype.setCharAt=function(e,t){this.str=this.str.substr(0,e)+t+this.str.substr(e+1)},h.prototype.toString=function(){return this.str},E.prototype.intValue=function(){return this.value},E.prototype.compareTo=function(e){return this.value<e?-1:this.value>e?1:0},E.isNaN=e=>me(e),I.isWhitespace=e=>32>=e&&0<=e||127==e,I.toUpperCase=e=>e.toUpperCase();class Ae{constructor(){Ae.constructor_.apply(this,arguments)}static sqr(e){return Ae.valueOf(e).selfMultiply(e)}static valueOf(){if("string"==typeof arguments[0]){let e=arguments[0];return Ae.parse(e)}if("number"==typeof arguments[0]){let e=arguments[0];return new Ae(e)}}static sqrt(e){return Ae.valueOf(e).sqrt()}static parse(e){for(var t=0,n=e.length;I.isWhitespace(e.charAt(t));)t++;var o=!1;if(t<n){var r=e.charAt(t);("-"===r||"+"===r)&&(t++,"-"===r&&(o=!0))}for(var s=new Ae,a=0,_=0,l=0,g;!(t>=n);){if(g=e.charAt(t),t++,I.isDigit(g)){var c=g-"0";s.selfMultiply(Ae.TEN),s.selfAdd(c),a++;continue}if("."===g){_=a;continue}if("e"===g||"E"===g){var d=e.substring(t);try{l=E.parseInt(d)}catch(t){if(t instanceof NumberFormatException)throw new NumberFormatException("Invalid exponent "+d+" in string "+e);else throw t}finally{}break}throw new NumberFormatException("Unexpected character '"+g+"' at position "+t+" in string "+e)}var u=s,p=a-_-l;if(0===p)u=s;else if(0<p){var m=Ae.TEN.pow(p);u=s.divide(m)}else if(0>p){var m=Ae.TEN.pow(-p);u=s.multiply(m)}return o?u.negate():u}static createNaN(){return new Ae(o.NaN,o.NaN)}static copy(e){return new Ae(e)}static magnitude(e){var t=Ne(e),n=ge(t)/ge(10),i=pe(fe(n)),o=Le(10,i);return 10*o<=t&&(i+=1),i}static stringOfChar(e,t){for(var n=new h,o=0;o<t;o++)n.append(e);return n.toString()}le(e){return this._hi<e._hi||this._hi===e._hi&&this._lo<=e._lo}extractSignificantDigits(e,t){var n=this.abs(),o=Ae.magnitude(n._hi),r=Ae.TEN.pow(o);n=n.divide(r),n.gt(Ae.TEN)?(n=n.divide(Ae.TEN),o+=1):n.lt(Ae.ONE)&&(n=n.multiply(Ae.TEN),o-=1);for(var d=o+1,s=new h,a=Ae.MAX_PRINT_DIGITS-1,_=0;_<=a;_++){e&&_===d&&s.append(".");var l=pe(n._hi);if(0>l)break;var g=!1,c=0;9<l?(g=!0,c="9"):c="0"+l,s.append(c),n=n.subtract(Ae.valueOf(l)).multiply(Ae.TEN),g&&n.selfAdd(Ae.TEN);var u=!0,p=Ae.magnitude(n._hi);if(0>p&&Ne(p)>=a-_&&(u=!1),!u)break}return t[0]=o,s.toString()}sqr(){return this.multiply(this)}doubleValue(){return this._hi+this._lo}subtract(){if(arguments[0]instanceof Ae){let e=arguments[0];return this.add(e.negate())}if("number"==typeof arguments[0]){let e=arguments[0];return this.add(-e)}}equals(){if(1===arguments.length&&arguments[0]instanceof Ae){let e=arguments[0];return this._hi===e._hi&&this._lo===e._lo}}isZero(){return 0===this._hi&&0===this._lo}selfSubtract(){if(arguments[0]instanceof Ae){let e=arguments[0];return this.isNaN()?this:this.selfAdd(-e._hi,-e._lo)}if("number"==typeof arguments[0]){let e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}}getSpecialNumberString(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null}min(e){return this.le(e)?this:e}selfDivide(){if(1===arguments.length){if(arguments[0]instanceof Ae){let e=arguments[0];return this.selfDivide(e._hi,e._lo)}if("number"==typeof arguments[0]){let e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){let a=arguments[0],_=arguments[1];var e=null,t=null,n=null,i=null,o=null,r=null,d=null,s=null;return o=this._hi/a,r=Ae.SPLIT*o,e=r-o,s=Ae.SPLIT*a,e=r-e,t=o-e,n=s-a,d=o*a,n=s-n,i=a-n,s=e*n-d+e*i+t*n+t*i,r=(this._hi-d-s+this._lo-o*_)/a,s=o+r,this._hi=s,this._lo=o-s+r,this}}dump(){return"DD<"+this._hi+", "+this._lo+">"}divide(){if(arguments[0]instanceof Ae){let o=arguments[0];var e=null,t=null,n=null,i=null,r=null,d=null,s=null,a=null;r=this._hi/o._hi,d=Ae.SPLIT*r,e=d-r,a=Ae.SPLIT*o._hi,e=d-e,t=r-e,n=a-o._hi,s=r*o._hi,n=a-n,i=o._hi-n,a=e*n-s+e*i+t*n+t*i,d=(this._hi-s-a+this._lo-r*o._lo)/o._hi,a=r+d;var _=a,l=r-a+d;return new Ae(_,l)}if("number"==typeof arguments[0]){let e=arguments[0];return o.isNaN(e)?Ae.createNaN():Ae.copy(this).selfDivide(e,0)}}ge(e){return this._hi>e._hi||this._hi===e._hi&&this._lo>=e._lo}pow(e){if(0===e)return Ae.valueOf(1);var t=new Ae(this),i=Ae.valueOf(1),o=Ne(e);if(1<o)for(;0<o;)1==o%2&&i.selfMultiply(t),o/=2,0<o&&(t=t.sqr());else i=t;return 0>e?i.reciprocal():i}ceil(){if(this.isNaN())return Ae.NaN;var e=ue(this._hi),t=0;return e===this._hi&&(t=ue(this._lo)),new Ae(e,t)}compareTo(e){var t=e;return this._hi<t._hi?-1:this._hi>t._hi?1:this._lo<t._lo?-1:this._lo>t._lo?1:0}rint(){if(this.isNaN())return this;var e=this.add(.5);return e.floor()}setValue(){if(arguments[0]instanceof Ae){let e=arguments[0];return this.init(e),this}if("number"==typeof arguments[0]){let e=arguments[0];return this.init(e),this}}max(e){return this.ge(e)?this:e}sqrt(){if(this.isZero())return Ae.valueOf(0);if(this.isNegative())return Ae.NaN;var e=1/_e(this._hi),t=this._hi*e,n=Ae.valueOf(t),i=this.subtract(n.sqr()),o=i._hi*(.5*e);return n.add(o)}selfAdd(){if(1===arguments.length){if(arguments[0]instanceof Ae){let e=arguments[0];return this.selfAdd(e._hi,e._lo)}if("number"==typeof arguments[0]){let e=arguments[0];var n=null,i=null,o=null,r=null,d=null,a=null;return o=this._hi+e,d=o-this._hi,r=o-d,r=e-d+(this._hi-r),a=r+this._lo,n=o+a,i=a+(o-n),this._hi=n+i,this._lo=i+(n-this._hi),this}}else if(2===arguments.length){let e=arguments[0],t=arguments[1];var n=null,i=null,_=null,l=null,o=null,r=null,d=null,a=null;o=this._hi+e,_=this._lo+t,d=o-this._hi,a=_-this._lo,r=o-d,l=_-a,r=e-d+(this._hi-r),l=t-a+(this._lo-l),d=r+_,n=o+d,i=d+(o-n),d=l+i;var g=n+d,c=d+(n-g);return this._hi=g,this._lo=c,this}}selfMultiply(){if(1===arguments.length){if(arguments[0]instanceof Ae){let e=arguments[0];return this.selfMultiply(e._hi,e._lo)}if("number"==typeof arguments[0]){let e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){let a=arguments[0],_=arguments[1];var e=null,t=null,n=null,i=null,o=null,r=null;o=Ae.SPLIT*this._hi,e=o-this._hi,r=Ae.SPLIT*a,e=o-e,t=this._hi-e,n=r-a,o=this._hi*a,n=r-n,i=a-n,r=e*n-o+e*i+t*n+t*i+(this._hi*_+this._lo*a);var d=o+r;e=o-d;var s=r+e;return this._hi=d,this._lo=s,this}}selfSqr(){return this.selfMultiply(this)}floor(){if(this.isNaN())return Ae.NaN;var e=fe(this._hi),t=0;return e===this._hi&&(t=fe(this._lo)),new Ae(e,t)}negate(){return this.isNaN()?this:new Ae(-this._hi,-this._lo)}clone(){try{return null}catch(e){if(e instanceof CloneNotSupportedException)return null;throw e}finally{}}multiply(){if(arguments[0]instanceof Ae){let e=arguments[0];return e.isNaN()?Ae.createNaN():Ae.copy(this).selfMultiply(e)}if("number"==typeof arguments[0]){let e=arguments[0];return o.isNaN(e)?Ae.createNaN():Ae.copy(this).selfMultiply(e,0)}}isNaN(){return o.isNaN(this._hi)}intValue(){return pe(this._hi)}toString(){var e=Ae.magnitude(this._hi);return-3<=e&&20>=e?this.toStandardNotation():this.toSciNotation()}toStandardNotation(){var e=this.getSpecialNumberString();if(null!==e)return e;var t=[,].fill(null),n=this.extractSignificantDigits(!0,t),i=t[0]+1,o=n;if("."===n.charAt(0))o="0"+n;else if(0>i)o="0."+Ae.stringOfChar("0",-i)+n;else if(-1===n.indexOf(".")){var r=i-n.length,d=Ae.stringOfChar("0",r);o=n+d+".0"}return this.isNegative()?"-"+o:o}reciprocal(){var e=null,t=null,n=null,i=null,o=null,r=null,d=null,s=null;o=1/this._hi,r=Ae.SPLIT*o,e=r-o,s=Ae.SPLIT*this._hi,e=r-e,t=o-e,n=s-this._hi,d=o*this._hi,n=s-n,i=this._hi-n,s=e*n-d+e*i+t*n+t*i,r=(1-d-s-o*this._lo)/this._hi;var a=o+r,_=o-a+r;return new Ae(a,_)}toSciNotation(){if(this.isZero())return Ae.SCI_NOT_ZERO;var e=this.getSpecialNumberString();if(null!==e)return e;var t=[,].fill(null),n=this.extractSignificantDigits(!1,t),i=Ae.SCI_NOT_EXPONENT_CHAR+t[0];if("0"===n.charAt(0))throw new IllegalStateException("Found leading zero: "+n);var o="";1<n.length&&(o=n.substring(1));var r=n.charAt(0)+"."+o;return this.isNegative()?"-"+r+i:r+i}abs(){return this.isNaN()?Ae.NaN:this.isNegative()?this.negate():new Ae(this)}isPositive(){return 0<this._hi||0===this._hi&&0<this._lo}lt(e){return this._hi<e._hi||this._hi===e._hi&&this._lo<e._lo}add(){if(arguments[0]instanceof Ae){let e=arguments[0];return Ae.copy(this).selfAdd(e)}if("number"==typeof arguments[0]){let e=arguments[0];return Ae.copy(this).selfAdd(e)}}init(){if(1===arguments.length){if("number"==typeof arguments[0]){let e=arguments[0];this._hi=e,this._lo=0}else if(arguments[0]instanceof Ae){let e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){let e=arguments[0],t=arguments[1];this._hi=e,this._lo=t}}gt(e){return this._hi>e._hi||this._hi===e._hi&&this._lo>e._lo}isNegative(){return 0>this._hi||0===this._hi&&0>this._lo}trunc(){return this.isNaN()?Ae.NaN:this.isPositive()?this.floor():this.ceil()}signum(){return 0<this._hi?1:0>this._hi?-1:0<this._lo?1:0>this._lo?-1:0}getClass(){return Ae}get interfaces_(){return[a,r,d]}}Ae.constructor_=function(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){let e=arguments[0];this.init(e)}else if(arguments[0]instanceof Ae){let e=arguments[0];this.init(e)}else if("string"==typeof arguments[0]){let e=arguments[0];Ae.constructor_.call(this,Ae.parse(e))}}else if(2===arguments.length){let e=arguments[0],t=arguments[1];this.init(e,t)}},Ae.PI=new Ae(3.141592653589793,12246467991473532e-32),Ae.TWO_PI=new Ae(6.283185307179586,24492935982947064e-32),Ae.PI_2=new Ae(1.5707963267948966,6123233995736766e-32),Ae.E=new Ae(2.718281828459045,14456468917292502e-32),Ae.NaN=new Ae(o.NaN,o.NaN),Ae.EPS=123259516440783e-46,Ae.SPLIT=134217729,Ae.MAX_PRINT_DIGITS=32,Ae.TEN=Ae.valueOf(10),Ae.ONE=Ae.valueOf(1),Ae.SCI_NOT_EXPONENT_CHAR="E",Ae.SCI_NOT_ZERO="0.0E0";class Fe{constructor(){Fe.constructor_.apply(this,arguments)}static orientationIndex(e,t,n){var i=Fe.orientationIndexFilter(e,t,n);if(1>=i)return i;var o=Ae.valueOf(t.x).selfAdd(-e.x),r=Ae.valueOf(t.y).selfAdd(-e.y),d=Ae.valueOf(n.x).selfAdd(-t.x),s=Ae.valueOf(n.y).selfAdd(-t.y);return o.selfMultiply(s).selfSubtract(r.selfMultiply(d)).signum()}static signOfDet2x2(){if(arguments[3]instanceof Ae&&arguments[2]instanceof Ae&&arguments[0]instanceof Ae&&arguments[1]instanceof Ae){let t=arguments[0],n=arguments[1],i=arguments[2],o=arguments[3];var e=t.multiply(o).selfSubtract(n.multiply(i));return e.signum()}if("number"==typeof arguments[3]&&"number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){let r=arguments[0],d=arguments[1],s=arguments[2],a=arguments[3];var t=Ae.valueOf(r),n=Ae.valueOf(d),i=Ae.valueOf(s),o=Ae.valueOf(a),e=t.multiply(o).selfSubtract(n.multiply(i));return e.signum()}}static intersection(e,t,n,i){var o=Ae.valueOf(i.y).selfSubtract(n.y).selfMultiply(Ae.valueOf(t.x).selfSubtract(e.x)),r=Ae.valueOf(i.x).selfSubtract(n.x).selfMultiply(Ae.valueOf(t.y).selfSubtract(e.y)),d=o.subtract(r),s=Ae.valueOf(i.x).selfSubtract(n.x).selfMultiply(Ae.valueOf(e.y).selfSubtract(n.y)),a=Ae.valueOf(i.y).selfSubtract(n.y).selfMultiply(Ae.valueOf(e.x).selfSubtract(n.x)),_=s.subtract(a),l=_.selfDivide(d).doubleValue(),g=Ae.valueOf(e.x).selfAdd(Ae.valueOf(t.x).selfSubtract(e.x).selfMultiply(l)).doubleValue(),c=Ae.valueOf(t.x).selfSubtract(e.x).selfMultiply(Ae.valueOf(e.y).selfSubtract(n.y)),u=Ae.valueOf(t.y).selfSubtract(e.y).selfMultiply(Ae.valueOf(e.x).selfSubtract(n.x)),p=c.subtract(u),m=p.selfDivide(d).doubleValue(),f=Ae.valueOf(n.y).selfAdd(Ae.valueOf(i.y).selfSubtract(n.y).selfMultiply(m)).doubleValue();return new Re(g,f)}static orientationIndexFilter(e,t,n){var i=null,o=(e.x-n.x)*(t.y-n.y),r=(e.y-n.y)*(t.x-n.x),d=o-r;if(0<o){if(0>=r)return Fe.signum(d);i=o+r}else if(0>o){if(0<=r)return Fe.signum(d);i=-o-r}else return Fe.signum(d);var s=Fe.DP_SAFE_EPSILON*i;return d>=s||-d>=s?Fe.signum(d):2}static signum(e){return 0<e?1:0>e?-1:0}getClass(){return Fe}get interfaces_(){return[]}}Fe.constructor_=function(){},Fe.DP_SAFE_EPSILON=1e-15;class Me{constructor(){Me.constructor_.apply(this,arguments)}static index(e,t,n){return Fe.orientationIndex(e,t,n)}static isCCW(e){var n=e.length-1;if(3>n)throw new t("Ring has fewer than 4 points, so orientation cannot be determined");for(var o=e[0],r=0,d=1,s;d<=n;d++)s=e[d],s.y>o.y&&(o=s,r=d);var a=r;do--a,0>a&&(a=n);while(e[a].equals2D(o)&&a!==r);var _=r;do _=(_+1)%n;while(e[_].equals2D(o)&&_!==r);var l=e[a],g=e[_];if(l.equals2D(o)||g.equals2D(o)||l.equals2D(g))return!1;var c=Me.index(l,o,g),u=null;return u=0===c?l.x>g.x:0<c,u}getClass(){return Me}get interfaces_(){return[]}}Me.constructor_=function(){},Me.CLOCKWISE=-1,Me.RIGHT=Me.CLOCKWISE,Me.COUNTERCLOCKWISE=1,Me.LEFT=Me.COUNTERCLOCKWISE,Me.COLLINEAR=0,Me.STRAIGHT=Me.COLLINEAR,N.arraycopy=(e,t,n,o,r)=>{let d=0;for(let s=t;s<t+r;s++)n[o+d]=e[s],d++},N.getProperty=e=>({"line.separator":"\n"})[e];class Ge{constructor(){Ge.constructor_.apply(this,arguments)}static intersection(e,t,n,i){var r=e.y-t.y,d=t.x-e.x,s=e.x*t.y-t.x*e.y,a=n.y-i.y,_=i.x-n.x,l=n.x*i.y-i.x*n.y,g=r*_-a*d,c=(d*l-_*s)/g,u=(a*s-r*l)/g;if(o.isNaN(c)||o.isInfinite(c)||o.isNaN(u)||o.isInfinite(u))throw new De;return new Re(c,u)}getY(){var e=this.y/this.w;if(o.isNaN(e)||o.isInfinite(e))throw new De;return e}getX(){var e=this.x/this.w;if(o.isNaN(e)||o.isInfinite(e))throw new De;return e}getCoordinate(){var e=new Re;return e.x=this.getX(),e.y=this.getY(),e}getClass(){return Ge}get interfaces_(){return[]}}Ge.constructor_=function(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){let e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){let e=arguments[0],t=arguments[1];this.x=e,this.y=t,this.w=1}else if(arguments[0]instanceof Ge&&arguments[1]instanceof Ge){let e=arguments[0],t=arguments[1];this.x=e.y*t.w-t.y*e.w,this.y=t.x*e.w-e.x*t.w,this.w=e.x*t.y-t.x*e.y}else if(arguments[0]instanceof Re&&arguments[1]instanceof Re){let e=arguments[0],t=arguments[1];this.x=e.y-t.y,this.y=t.x-e.x,this.w=e.x*t.y-t.x*e.y}}else if(3===arguments.length){let e=arguments[0],t=arguments[1],n=arguments[2];this.x=e,this.y=t,this.w=n}else if(4===arguments.length){let d=arguments[0],s=arguments[1],a=arguments[2],_=arguments[3];var e=d.y-s.y,t=s.x-d.x,n=d.x*s.y-s.x*d.y,i=a.y-_.y,o=_.x-a.x,r=a.x*_.y-_.x*a.y;this.x=t*r-o*n,this.y=i*n-e*r,this.w=e*o-i*t}};class Ye{constructor(){Ye.constructor_.apply(this,arguments)}static log10(e){var t=ge(e);return o.isInfinite(t)?t:o.isNaN(t)?t:t/Ye.LOG_10}static min(e,t,n,i){var o=e;return t<o&&(o=t),n<o&&(o=n),i<o&&(o=i),o}static clamp(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){let e=arguments[0],t=arguments[1],n=arguments[2];return e<t?t:e>n?n:e}if(xe(arguments[2])&&xe(arguments[0])&&xe(arguments[1])){let e=arguments[0],t=arguments[1],n=arguments[2];return e<t?t:e>n?n:e}}static wrap(e,t){return 0>e?t- -e%t:e%t}static max(){if(3===arguments.length){let t=arguments[0],n=arguments[1],i=arguments[2];var e=t;return n>e&&(e=n),i>e&&(e=i),e}if(4===arguments.length){let t=arguments[0],n=arguments[1],i=arguments[2],o=arguments[3];var e=t;return n>e&&(e=n),i>e&&(e=i),o>e&&(e=o),e}}static average(e,t){return(e+t)/2}getClass(){return Ye}get interfaces_(){return[]}}Ye.constructor_=function(){},Ye.LOG_10=ge(10);class ze{constructor(){ze.constructor_.apply(this,arguments)}static segmentToSegment(e,t,n,i){if(e.equals(t))return ze.pointToSegment(e,n,i);if(n.equals(i))return ze.pointToSegment(i,e,t);var o=!1;if(!be.intersects(e,t,n,i))o=!0;else{var d=(t.x-e.x)*(i.y-n.y)-(t.y-e.y)*(i.x-n.x);if(0==d)o=!0;else{var a=(e.y-n.y)*(i.x-n.x)-(e.x-n.x)*(i.y-n.y),_=(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y),l=_/d,s=a/d;(0>s||1<s||0>l||1<l)&&(o=!0)}}return o?Ye.min(ze.pointToSegment(e,n,i),ze.pointToSegment(t,n,i),ze.pointToSegment(n,e,t),ze.pointToSegment(i,e,t)):0}static pointToSegment(e,t,n){if(t.x===n.x&&t.y===n.y)return e.distance(t);var i=(n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y),o=((e.x-t.x)*(n.x-t.x)+(e.y-t.y)*(n.y-t.y))/i;if(0>=o)return e.distance(t);if(1<=o)return e.distance(n);var r=((t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y))/i;return Ne(r)*_e(i)}static pointToLinePerpendicular(e,t,n){var i=(n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y),o=((t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y))/i;return Ne(o)*_e(i)}static pointToSegmentString(e,n){if(0===n.length)throw new t("Line array must contain at least one vertex");for(var o=e.distance(n[0]),r=0,d;r<n.length-1;r++)d=ze.pointToSegment(e,n[r],n[r+1]),d<o&&(o=d);return o}getClass(){return ze}get interfaces_(){return[]}}ze.constructor_=function(){};class qe{constructor(){qe.constructor_.apply(this,arguments)}setOrdinate(){}size(){}getOrdinate(){}getCoordinate(){}getCoordinateCopy(){}getDimension(){}getX(){}expandEnvelope(){}copy(){}getY(){}toCoordinateArray(){}getClass(){return qe}get interfaces_(){return[d]}}qe.constructor_=function(){},qe.X=0,qe.Y=1,qe.Z=2,qe.M=3;class Be{constructor(){Be.constructor_.apply(this,arguments)}create(){if(1===arguments.length)if(arguments[0]instanceof Array);else if(l(arguments[0],qe));}getClass(){return Be}get interfaces_(){return[]}}Be.constructor_=function(){};class Ve{constructor(){Ve.constructor_.apply(this,arguments)}filter(){}getClass(){return Ve}get interfaces_(){return[]}}Ve.constructor_=function(){};class Ue{constructor(){Ue.constructor_.apply(this,arguments)}isGeometryCollection(){return this.getTypeCode()===Ue.TYPECODE_GEOMETRYCOLLECTION}getFactory(){return this._factory}getGeometryN(){return this}getArea(){return 0}isRectangle(){return!1}equals(){if(arguments[0]instanceof Ue){let e=arguments[0];return null!==e&&this.equalsTopo(e)}if(arguments[0]instanceof Object){let t=arguments[0];if(!(t instanceof Ue))return!1;var e=t;return this.equalsExact(e)}}equalsExact(e){return this===e||this.equalsExact(e,0)}geometryChanged(){this.apply(Ue.geometryChangedFilter)}geometryChangedAction(){this._envelope=null}equalsNorm(e){return null!==e&&this.norm().equalsExact(e.norm())}getLength(){return 0}getNumGeometries(){return 1}compareTo(){if(1===arguments.length){let t=arguments[0];var e=t;return this.getTypeCode()===e.getTypeCode()?this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t):this.getTypeCode()-e.getTypeCode()}if(2===arguments.length){let t=arguments[0],n=arguments[1];var e=t;return this.getTypeCode()===e.getTypeCode()?this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t,n):this.getTypeCode()-e.getTypeCode()}}getUserData(){return this._userData}getSRID(){return this._SRID}getEnvelope(){return this.getFactory().toGeometry(this.getEnvelopeInternal())}checkNotGeometryCollection(e){if(e.getTypeCode()===Ue.TYPECODE_GEOMETRYCOLLECTION)throw new t("This method does not support GeometryCollection arguments")}equal(e,t,n){return 0===n?e.equals(t):e.distance(t)<=n}norm(){var e=this.copy();return e.normalize(),e}getPrecisionModel(){return this._factory.getPrecisionModel()}getEnvelopeInternal(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new be(this._envelope)}setSRID(e){this._SRID=e}setUserData(e){this._userData=e}compare(e,t){for(var n=e.iterator(),i=t.iterator();n.hasNext()&&i.hasNext();){var o=n.next(),r=i.next(),d=o.compareTo(r);if(0!==d)return d}return n.hasNext()?1:i.hasNext()?-1:0}hashCode(){return this.getEnvelopeInternal().hashCode()}isGeometryCollectionOrDerived(){return this.getTypeCode()===Ue.TYPECODE_GEOMETRYCOLLECTION||this.getTypeCode()===Ue.TYPECODE_MULTIPOINT||this.getTypeCode()===Ue.TYPECODE_MULTILINESTRING||this.getTypeCode()===Ue.TYPECODE_MULTIPOLYGON}get interfaces_(){return[d,r,a]}getClass(){return Ue}static hasNonEmptyElements(e){for(var t=0;t<e.length;t++)if(!e[t].isEmpty())return!0;return!1}static hasNullElements(e){for(var t=0;t<e.length;t++)if(null===e[t])return!0;return!1}}Ue.constructor_=function(e){e&&(this._envelope=null,this._userData=null,this._factory=e,this._SRID=e.getSRID())},Ue.serialVersionUID=8763622679187377e3,Ue.TYPECODE_POINT=0,Ue.TYPECODE_MULTIPOINT=1,Ue.TYPECODE_LINESTRING=2,Ue.TYPECODE_LINEARRING=3,Ue.TYPECODE_MULTILINESTRING=4,Ue.TYPECODE_POLYGON=5,Ue.TYPECODE_MULTIPOLYGON=6,Ue.TYPECODE_GEOMETRYCOLLECTION=7,Ue.TYPENAME_POINT="Point",Ue.TYPENAME_MULTIPOINT="MultiPoint",Ue.TYPENAME_LINESTRING="LineString",Ue.TYPENAME_LINEARRING="LinearRing",Ue.TYPENAME_MULTILINESTRING="MultiLineString",Ue.TYPENAME_POLYGON="Polygon",Ue.TYPENAME_MULTIPOLYGON="MultiPolygon",Ue.TYPENAME_GEOMETRYCOLLECTION="GeometryCollection",Ue.geometryChangedFilter={get interfaces_(){return[Ve]},filter(e){e.geometryChangedAction()}};class Xe{constructor(){Xe.constructor_.apply(this,arguments)}filter(){}getClass(){return Xe}get interfaces_(){return[]}}Xe.constructor_=function(){};class ke{constructor(){ke.constructor_.apply(this,arguments)}isInBoundary(){}getClass(){return ke}get interfaces_(){return[]}}class He{constructor(){He.constructor_.apply(this,arguments)}isInBoundary(e){return 1==e%2}getClass(){return He}get interfaces_(){return[ke]}}He.constructor_=function(){};class we{constructor(){we.constructor_.apply(this,arguments)}isInBoundary(e){return 0<e}getClass(){return we}get interfaces_(){return[ke]}}we.constructor_=function(){};class We{constructor(){We.constructor_.apply(this,arguments)}isInBoundary(e){return 1<e}getClass(){return We}get interfaces_(){return[ke]}}We.constructor_=function(){};class je{constructor(){je.constructor_.apply(this,arguments)}isInBoundary(e){return 1===e}getClass(){return je}get interfaces_(){return[ke]}}je.constructor_=function(){},ke.Mod2BoundaryNodeRule=He,ke.EndPointBoundaryNodeRule=we,ke.MultiValentEndPointBoundaryNodeRule=We,ke.MonoValentEndPointBoundaryNodeRule=je,ke.constructor_=function(){},ke.MOD2_BOUNDARY_RULE=new He,ke.ENDPOINT_BOUNDARY_RULE=new we,ke.MULTIVALENT_ENDPOINT_BOUNDARY_RULE=new We,ke.MONOVALENT_ENDPOINT_BOUNDARY_RULE=new je,ke.OGC_SFS_BOUNDARY_RULE=ke.MOD2_BOUNDARY_RULE;class Ke{constructor(){Ke.constructor_.apply(this,arguments)}static isRing(e){return!(4>e.length)&&!!e[0].equals2D(e[e.length-1])}static ptNotInList(e,t){for(var n=0,o;n<e.length;n++)if(o=e[n],0>Ke.indexOf(o,t))return o;return null}static scroll(e,t){var n=Ke.indexOf(t,e);if(0>n)return null;var i=Array(e.length).fill(null);N.arraycopy(e,n,i,0,e.length-n),N.arraycopy(e,0,i,e.length-n,n),N.arraycopy(i,0,e,0,e.length)}static equals(){if(2===arguments.length){let t=arguments[0],n=arguments[1];if(t===n)return!0;if(null===t||null===n)return!1;if(t.length!==n.length)return!1;for(var e=0;e<t.length;e++)if(!t[e].equals(n[e]))return!1;return!0}if(3===arguments.length){let t=arguments[0],n=arguments[1],i=arguments[2];if(t===n)return!0;if(null===t||null===n)return!1;if(t.length!==n.length)return!1;for(var e=0;e<t.length;e++)if(0!==i.compare(t[e],n[e]))return!1;return!0}}static intersection(e,t){for(var n=new ve,o=0;o<e.length;o++)t.intersects(e[o])&&n.add(e[o],!0);return n.toCoordinateArray()}static hasRepeatedPoints(e){for(var t=1;t<e.length;t++)if(e[t-1].equals(e[t]))return!0;return!1}static removeRepeatedPoints(e){if(!Ke.hasRepeatedPoints(e))return e;var t=new ve(e,!1);return t.toCoordinateArray()}static reverse(e){for(var t=e.length-1,n=pe(t/2),o=0,r;o<=n;o++)r=e[o],e[o]=e[t-o],e[t-o]=r}static removeNull(e){for(var t=0,n=0;n<e.length;n++)null!==e[n]&&t++;var o=Array(t).fill(null);if(0===t)return o;for(var r=0,n=0;n<e.length;n++)null!==e[n]&&(o[r++]=e[n]);return o}static copyDeep(){if(1===arguments.length){let n=arguments[0];for(var e=Array(n.length).fill(null),t=0;t<n.length;t++)e[t]=new Re(n[t]);return e}if(5===arguments.length){let e=arguments[0],n=arguments[1],i=arguments[2],o=arguments[3],r=arguments[4];for(var t=0;t<r;t++)i[o+t]=new Re(e[n+t])}}static isEqualReversed(e,t){for(var n=0;n<e.length;n++){var o=e[n],r=t[e.length-n-1];if(0!==o.compareTo(r))return!1}return!0}static envelope(e){for(var t=new be,n=0;n<e.length;n++)t.expandToInclude(e[n]);return t}static toCoordinateArray(e){return e.toArray(Ke.coordArrayType)}static atLeastNCoordinatesOrNothing(e,t){return t.length>=e?t:[]}static indexOf(e,t){for(var n=0;n<t.length;n++)if(e.equals(t[n]))return n;return-1}static increasingDirection(e){for(var t=0;t<pe(e.length/2);t++){var n=e.length-1-t,o=e[t].compareTo(e[n]);if(0!==o)return o}return 1}static compare(e,t){for(var n=0,o;n<e.length&&n<t.length;){if(o=e[n].compareTo(t[n]),0!==o)return o;n++}return n<t.length?-1:n<e.length?1:0}static minCoordinate(e){for(var t=null,n=0;n<e.length;n++)(null===t||0<t.compareTo(e[n]))&&(t=e[n]);return t}static extract(e,t,n){t=Ye.clamp(t,0,e.length),n=Ye.clamp(n,-1,e.length);var o=n-t+1;0>n&&(o=0),t>=e.length&&(o=0),n<t&&(o=0);var r=Array(o).fill(null);if(0==o)return r;for(var d=0,s=t;s<=n;s++)r[d++]=e[s];return r}getClass(){return Ke}get interfaces_(){return[]}}class Ze{constructor(){Ze.constructor_.apply(this,arguments)}compare(e,t){return Ke.compare(e,t)}getClass(){return Ze}get interfaces_(){return[s]}}Ze.constructor_=function(){};class Qe{constructor(){Qe.constructor_.apply(this,arguments)}compare(e,t){var n=e,i=t;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(0===n.length)return 0;var o=Ke.compare(n,i),r=Ke.isEqualReversed(n,i);return r?0:o}OLDcompare(e,t){var n=e,o=t;if(n.length<o.length)return-1;if(n.length>o.length)return 1;if(0===n.length)return 0;for(var r=Ke.increasingDirection(n),d=Ke.increasingDirection(o),s=0<r?0:n.length-1,a=0<d?0:n.length-1,_=0,l;_<n.length;_++){if(l=n[s].compareTo(o[a]),0!==l)return l;s+=r,a+=d}return 0}getClass(){return Qe}get interfaces_(){return[s]}}Qe.constructor_=function(){},Ke.ForwardComparator=Ze,Ke.BidirectionalComparator=Qe,Ke.constructor_=function(){},Ke.coordArrayType=[].fill(null),L.prototype.get=function(){},L.prototype.put=function(){},L.prototype.size=function(){},L.prototype.values=function(){},L.prototype.entrySet=function(){},C.prototype=new L,S.prototype=new c,S.prototype.contains=function(){},T.prototype=new S,T.prototype.contains=function(t){for(var n=0,o=this.array_.length,r;n<o;n++)if(r=this.array_[n],r===t)return!0;return!1},T.prototype.add=function(e){return!this.contains(e)&&(this.array_.push(e),!0)},T.prototype.addAll=function(e){for(var t=e.iterator();t.hasNext();)this.add(t.next());return!0},T.prototype.remove=function(){throw new javascript.util.OperationNotSupported},T.prototype.size=function(){return this.array_.length},T.prototype.isEmpty=function(){return 0===this.array_.length},T.prototype.toArray=function(){for(var e=[],t=0,n=this.array_.length;t<n;t++)e.push(this.array_[t]);return e},T.prototype.iterator=function(){return new Je(this)};/**
   * @extends {Iterator}
   * @param {HashSet} hashSet
   * @constructor
   * @private
   */var Je=function(e){this.hashSet_=e,this.position_=0};/**
   * @override
   */Je.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new m;return this.hashSet_.array_[this.position_++]},Je.prototype.hasNext=function(){return!!(this.position_<this.hashSet_.size())},Je.prototype.remove=function(){throw new y};const $e=0,et=1;D.prototype=new C,D.prototype.get=function(e){for(var t=this.root_,n;null!==t;)if(n=e.compareTo(t.key),0>n)t=t.left;else if(0<n)t=t.right;else return t.value;return null},D.prototype.put=function(n,i){if(null===this.root_)return this.root_={key:n,value:i,left:null,right:null,parent:null,color:$e,getValue(){return this.value},getKey(){return this.key}},this.size_=1,null;var o=this.root_,r,d;do if(r=o,d=n.compareTo(o.key),0>d)o=o.left;else if(0<d)o=o.right;else{var s=o.value;return o.value=i,s}while(null!==o);var a={key:n,left:null,right:null,value:i,parent:r,color:$e,getValue(){return this.value},getKey(){return this.key}};return 0>d?r.left=a:r.right=a,this.fixAfterInsertion(a),this.size_++,null},D.prototype.fixAfterInsertion=function(e){for(e.color=et;null!=e&&e!=this.root_&&e.parent.color==et;)if(O(e)==v(O(O(e)))){var t=b(O(O(e)));R(t)==et?(P(O(e),$e),P(t,$e),P(O(O(e)),et),e=O(O(e))):(e==b(O(e))&&(e=O(e),this.rotateLeft(e)),P(O(e),$e),P(O(O(e)),et),this.rotateRight(O(O(e))))}else{var t=v(O(O(e)));R(t)==et?(P(O(e),$e),P(t,$e),P(O(O(e)),et),e=O(O(e))):(e==v(O(e))&&(e=O(e),this.rotateRight(e)),P(O(e),$e),P(O(O(e)),et),this.rotateLeft(O(O(e))))}this.root_.color=$e},D.prototype.values=function(){var e=new f,t=this.getFirstEntry();if(null!==t)for(e.add(t.value);null!==(t=D.successor(t));)e.add(t.value);return e},D.prototype.entrySet=function(){var e=new T,t=this.getFirstEntry();if(null!==t)for(e.add(t);null!==(t=D.successor(t));)e.add(t);return e},D.prototype.rotateLeft=function(e){if(null!=e){var t=e.right;e.right=t.left,null!=t.left&&(t.left.parent=e),t.parent=e.parent,null==e.parent?this.root_=t:e.parent.left==e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}},D.prototype.rotateRight=function(e){if(null!=e){var t=e.left;e.left=t.right,null!=t.right&&(t.right.parent=e),t.parent=e.parent,null==e.parent?this.root_=t:e.parent.right==e?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}},D.prototype.getFirstEntry=function(){var e=this.root_;if(null!=e)for(;null!=e.left;)e=e.left;return e},D.successor=function(e){if(null===e)return null;if(null!==e.right){for(var t=e.right;null!==t.left;)t=t.left;return t}for(var t=e.parent,n=e;null!==t&&n===t.right;)n=t,t=t.parent;return t},D.prototype.size=function(){return this.size_},D.prototype.containsKey=function(e){for(var t=this.root_,n;null!==t;)if(n=e.compareTo(t.key),0>n)t=t.left;else if(0<n)t=t.right;else return!0;return!1};class tt{constructor(){tt.constructor_.apply(this,arguments)}getClass(){return tt}get interfaces_(){return[]}}tt.constructor_=function(){},A.prototype=new S,F.prototype=new A,F.prototype.contains=function(t){for(var n=0,o=this.array_.length,r;n<o;n++)if(r=this.array_[n],0===r.compareTo(t))return!0;return!1},F.prototype.add=function(t){if(this.contains(t))return!1;for(var n=0,o=this.array_.length,r;n<o;n++)if(r=this.array_[n],1===r.compareTo(t))return this.array_.splice(n,0,t),!0;return this.array_.push(t),!0},F.prototype.addAll=function(e){for(var t=e.iterator();t.hasNext();)this.add(t.next());return!0},F.prototype.remove=function(){throw new y},F.prototype.size=function(){return this.array_.length},F.prototype.isEmpty=function(){return 0===this.array_.length},F.prototype.toArray=function(){for(var e=[],t=0,n=this.array_.length;t<n;t++)e.push(this.array_[t]);return e},F.prototype.iterator=function(){return new nt(this)};/**
   * @extends {javascript.util.Iterator}
   * @param {javascript.util.TreeSet} treeSet
   * @constructor
   * @private
   */var nt=function(e){this.treeSet_=e,this.position_=0};/**
   * @override
   */nt.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new m;return this.treeSet_.array_[this.position_++]},nt.prototype.hasNext=function(){return!!(this.position_<this.treeSet_.size())},nt.prototype.remove=function(){throw new y},M.sort=function(){var e=arguments[0],n,o,d,s;if(1===arguments.length)return s=function(e,t){return e.compareTo(t)},void e.sort(s);if(2===arguments.length)d=arguments[1],s=function(e,t){return d.compare(e,t)},e.sort(s);else{if(3===arguments.length){o=e.slice(arguments[1],arguments[2]),o.sort();var a=e.slice(0,arguments[1]).concat(o,e.slice(arguments[2],e.length));for(e.splice(0,e.length),n=0;n<a.length;n++)e.push(a[n]);return}if(4===arguments.length){for(o=e.slice(arguments[1],arguments[2]),d=arguments[3],s=function(e,t){return d.compare(e,t)},o.sort(s),a=e.slice(0,arguments[1]).concat(o,e.slice(arguments[2],e.length)),e.splice(0,e.length),n=0;n<a.length;n++)e.push(a[n])}}},M.asList=function(e){for(var t=new f,n=0,o=e.length;n<o;n++)t.add(e[n]);return t};class it{constructor(){it.constructor_.apply(this,arguments)}static toDimensionSymbol(e){switch(e){case it.FALSE:return it.SYM_FALSE;case it.TRUE:return it.SYM_TRUE;case it.DONTCARE:return it.SYM_DONTCARE;case it.P:return it.SYM_P;case it.L:return it.SYM_L;case it.A:return it.SYM_A;}throw new t("Unknown dimension value: "+e)}static toDimensionValue(e){switch(I.toUpperCase(e)){case it.SYM_FALSE:return it.FALSE;case it.SYM_TRUE:return it.TRUE;case it.SYM_DONTCARE:return it.DONTCARE;case it.SYM_P:return it.P;case it.SYM_L:return it.L;case it.SYM_A:return it.A;}throw new t("Unknown dimension symbol: "+e)}getClass(){return it}get interfaces_(){return[]}}it.constructor_=function(){},it.P=0,it.L=1,it.A=2,it.FALSE=-1,it.TRUE=-2,it.DONTCARE=-3,it.SYM_FALSE="F",it.SYM_TRUE="T",it.SYM_DONTCARE="*",it.SYM_P="0",it.SYM_L="1",it.SYM_A="2";class ot{constructor(){ot.constructor_.apply(this,arguments)}filter(){}getClass(){return ot}get interfaces_(){return[]}}ot.constructor_=function(){};class rt{constructor(){rt.constructor_.apply(this,arguments)}filter(){}isDone(){}isGeometryChanged(){}getClass(){return rt}get interfaces_(){return[]}}rt.constructor_=function(){};class dt extends Ue{constructor(){super(),dt.constructor_.apply(this,arguments)}computeEnvelopeInternal(){for(var e=new be,t=0;t<this._geometries.length;t++)e.expandToInclude(this._geometries[t].getEnvelopeInternal());return e}getGeometryN(e){return this._geometries[e]}getCoordinates(){for(var e=Array(this.getNumPoints()).fill(null),t=-1,n=0,o;n<this._geometries.length;n++){o=this._geometries[n].getCoordinates();for(var r=0;r<o.length;r++)t++,e[t]=o[r]}return e}getArea(){for(var e=0,t=0;t<this._geometries.length;t++)e+=this._geometries[t].getArea();return e}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof Ue){let n=arguments[0],i=arguments[1];if(!this.isEquivalentClass(n))return!1;var e=n;if(this._geometries.length!==e._geometries.length)return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].equalsExact(e._geometries[t],i))return!1;return!0}return super.equalsExact.apply(this,arguments)}normalize(){for(var e=0;e<this._geometries.length;e++)this._geometries[e].normalize();M.sort(this._geometries)}getCoordinate(){return this.isEmpty()?null:this._geometries[0].getCoordinate()}getBoundaryDimension(){for(var e=it.FALSE,t=0;t<this._geometries.length;t++)e=Ee(e,this._geometries[t].getBoundaryDimension());return e}getTypeCode(){return Ue.TYPECODE_GEOMETRYCOLLECTION}getDimension(){for(var e=it.FALSE,t=0;t<this._geometries.length;t++)e=Ee(e,this._geometries[t].getDimension());return e}getLength(){for(var e=0,t=0;t<this._geometries.length;t++)e+=this._geometries[t].getLength();return e}getNumPoints(){for(var e=0,t=0;t<this._geometries.length;t++)e+=this._geometries[t].getNumPoints();return e}getNumGeometries(){return this._geometries.length}reverse(){for(var e=this._geometries.length,t=Array(e).fill(null),n=0;n<this._geometries.length;n++)t[n]=this._geometries[n].reverse();return this.getFactory().createGeometryCollection(t)}compareToSameClass(){if(1===arguments.length){let n=arguments[0];var e=new F(M.asList(this._geometries)),t=new F(M.asList(n._geometries));return this.compare(e,t)}if(2===arguments.length){let e=arguments[0],t=arguments[1];for(var n=e,r=this.getNumGeometries(),d=n.getNumGeometries(),s=0;s<r&&s<d;){var o=this.getGeometryN(s),a=n.getGeometryN(s),_=o.compareToSameClass(a,t);if(0!==_)return _;s++}return s<r?1:s<d?-1:0}}apply(){if(l(arguments[0],Xe)){let t=arguments[0];for(var e=0;e<this._geometries.length;e++)this._geometries[e].apply(t)}else if(l(arguments[0],rt)){let t=arguments[0];if(0===this._geometries.length)return null;for(var e=0;e<this._geometries.length&&(this._geometries[e].apply(t),!t.isDone());e++);t.isGeometryChanged()&&this.geometryChanged()}else if(l(arguments[0],ot)){let t=arguments[0];t.filter(this);for(var e=0;e<this._geometries.length;e++)this._geometries[e].apply(t)}else if(l(arguments[0],Ve)){let t=arguments[0];t.filter(this);for(var e=0;e<this._geometries.length;e++)this._geometries[e].apply(t)}}getBoundary(){return this.checkNotGeometryCollection(this),Te.shouldNeverReachHere(),null}getGeometryType(){return Ue.TYPENAME_GEOMETRYCOLLECTION}copy(){for(var e=Array(this._geometries.length).fill(null),t=0;t<e.length;t++)e[t]=this._geometries[t].copy();return new dt(e,this._factory)}isEmpty(){for(var e=0;e<this._geometries.length;e++)if(!this._geometries[e].isEmpty())return!1;return!0}getClass(){return dt}get interfaces_(){return[]}}dt.constructor_=function(){if(this._geometries=null,0===arguments.length);else if(2===arguments.length){let e=arguments[0],n=arguments[1];if(Ue.constructor_.call(this,n),null===e&&(e=[]),Ue.hasNullElements(e))throw new t("geometries must not contain null elements");this._geometries=e}},dt.serialVersionUID=-5694727726395021e3;class st extends dt{constructor(){super(),st.constructor_.apply(this,arguments)}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof Ue){let e=arguments[0],t=arguments[1];return!!this.isEquivalentClass(e)&&super.equalsExact.call(this,e,t)}return super.equalsExact.apply(this,arguments)}getBoundaryDimension(){return this.isClosed()?it.FALSE:0}isClosed(){if(this.isEmpty())return!1;for(var e=0;e<this._geometries.length;e++)if(!this._geometries[e].isClosed())return!1;return!0}getTypeCode(){return Ue.TYPECODE_MULTILINESTRING}getDimension(){return 1}reverse(){for(var e=this._geometries.length,t=Array(e).fill(null),n=0;n<this._geometries.length;n++)t[e-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(t)}getBoundary(){return new at(this).getBoundary()}getGeometryType(){return Ue.TYPENAME_MULTILINESTRING}copy(){for(var e=Array(this._geometries.length).fill(null),t=0;t<e.length;t++)e[t]=this._geometries[t].copy();return new st(e,this._factory)}getClass(){return st}get interfaces_(){return[tt]}}st.constructor_=function(){let e=arguments[0],t=arguments[1];dt.constructor_.call(this,e,t)},st.serialVersionUID=8166665132445434e3;class at{constructor(){at.constructor_.apply(this,arguments)}static getBoundary(){if(1===arguments.length){let t=arguments[0];var e=new at(t);return e.getBoundary()}if(2===arguments.length){let t=arguments[0],n=arguments[1];var e=new at(t,n);return e.getBoundary()}}boundaryMultiLineString(e){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var t=this.computeBoundaryCoordinates(e);return 1===t.length?this._geomFact.createPoint(t[0]):this._geomFact.createMultiPointFromCoords(t)}getBoundary(){return this._geom instanceof ut?this.boundaryLineString(this._geom):this._geom instanceof st?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()}boundaryLineString(e){if(this._geom.isEmpty())return this.getEmptyMultiPoint();if(e.isClosed()){var t=this._bnRule.isInBoundary(2);return t?e.getStartPoint():this._geomFact.createMultiPoint()}return this._geomFact.createMultiPoint([e.getStartPoint(),e.getEndPoint()])}getEmptyMultiPoint(){return this._geomFact.createMultiPoint()}computeBoundaryCoordinates(e){var t=new f;this._endpointMap=new D;for(var n=0,o;n<e.getNumGeometries();n++)o=e.getGeometryN(n),0===o.getNumPoints()||(this.addEndpoint(o.getCoordinateN(0)),this.addEndpoint(o.getCoordinateN(o.getNumPoints()-1)));for(var r=this._endpointMap.entrySet().iterator();r.hasNext();){var d=r.next(),s=d.getValue(),a=s.count;this._bnRule.isInBoundary(a)&&t.add(d.getKey())}return Ke.toCoordinateArray(t)}addEndpoint(e){var t=this._endpointMap.get(e);null===t&&(t=new _t,this._endpointMap.put(e,t)),t.count++}getClass(){return at}get interfaces_(){return[]}}at.constructor_=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){let e=arguments[0];at.constructor_.call(this,e,ke.MOD2_BOUNDARY_RULE)}else if(2===arguments.length){let e=arguments[0],t=arguments[1];this._geom=e,this._geomFact=e.getFactory(),this._bnRule=t}};class _t{constructor(){_t.constructor_.apply(this,arguments)}getClass(){return _t}get interfaces_(){return[]}}_t.constructor_=function(){this.count=null};class lt{constructor(){lt.constructor_.apply(this,arguments)}static ofLine(e){var t=e.size();if(1>=t)return 0;var n=0,o=new Re;e.getCoordinate(0,o);for(var r=o.x,d=o.y,s=1;s<t;s++){e.getCoordinate(s,o);var a=o.x,_=o.y,l=a-r,g=_-d;n+=_e(l*l+g*g),r=a,d=_}return n}getClass(){return lt}get interfaces_(){return[]}}lt.constructor_=function(){};class gt{constructor(){gt.constructor_.apply(this,arguments)}static chars(e,t){for(var n=Array(t).fill(null),o=0;o<t;o++)n[o]=e;return new String(n)}static getStackTrace(){if(1===arguments.length){let i=arguments[0];var e=new z,n=new G(e);return i.printStackTrace(n),e.toString()}if(2===arguments.length){let e=arguments[0],t=arguments[1];for(var o="",r=new Y(gt.getStackTrace(e)),d=new B(r),s=0;s<t;s++)try{o+=d.readLine()+gt.NEWLINE}catch(t){if(t instanceof q)Te.shouldNeverReachHere();else throw t}finally{}return o}}static split(e,t){for(var n=t.length,o=new f,r=""+e,d=r.indexOf(t),s;0<=d;)s=r.substring(0,d),o.add(s),r=r.substring(d+n),d=r.indexOf(t);0<r.length&&o.add(r);for(var a=Array(o.size()).fill(null),_=0;_<a.length;_++)a[_]=o.get(_);return a}static toString(){if(1===arguments.length&&"number"==typeof arguments[0]){let e=arguments[0];return gt.SIMPLE_ORDINATE_FORMAT.format(e)}}static spaces(e){return gt.chars(" ",e)}getClass(){return gt}get interfaces_(){return[]}}gt.constructor_=function(){},gt.NEWLINE=N.getProperty("line.separator"),gt.SIMPLE_ORDINATE_FORMAT=new function(){}("0.#"),V.prototype.append=function(t){this.str+=t},V.prototype.setCharAt=function(e,t){this.str=this.str.substr(0,e)+t+this.str.substr(e+1)},V.prototype.toString=function(){return this.str};class ct{constructor(){ct.constructor_.apply(this,arguments)}static copyCoord(e,t,n,i){for(var o=Ie(e.getDimension(),n.getDimension()),r=0;r<o;r++)n.setOrdinate(i,r,e.getOrdinate(t,r))}static isRing(e){var t=e.size();return 0===t||!(3>=t)&&e.getOrdinate(0,qe.X)===e.getOrdinate(t-1,qe.X)&&e.getOrdinate(0,qe.Y)===e.getOrdinate(t-1,qe.Y)}static isEqual(e,t){var n=e.size(),r=t.size();if(n!==r)return!1;for(var s=Ie(e.getDimension(),t.getDimension()),a=0;a<n;a++)for(var _=0;_<s;_++){var l=e.getOrdinate(a,_),g=t.getOrdinate(a,_);if(e.getOrdinate(a,_)!==t.getOrdinate(a,_)&&!(o.isNaN(l)&&o.isNaN(g)))return!1}return!0}static extend(e,t,o){var r=e.create(o,t.getDimension()),d=t.size();if(ct.copy(t,0,r,0,d),0<d)for(var n=d;n<o;n++)ct.copy(t,d-1,r,n,1);return r}static reverse(e){for(var t=e.size()-1,n=pe(t/2),o=0;o<=n;o++)ct.swap(e,o,t-o)}static swap(e,t,n){if(t===n)return null;for(var i=0,o;i<e.getDimension();i++)o=e.getOrdinate(t,i),e.setOrdinate(t,i,e.getOrdinate(n,i)),e.setOrdinate(n,i,o)}static copy(e,t,n,o,r){for(var d=0;d<r;d++)ct.copyCoord(e,t+d,n,o+d)}static toString(){if(1===arguments.length&&l(arguments[0],qe)){let i=arguments[0];var e=i.size();if(0===e)return"()";var t=i.getDimension(),n=new V;n.append("(");for(var o=0;o<e;o++){0<o&&n.append(" ");for(var r=0;r<t;r++)0<r&&n.append(","),n.append(gt.toString(i.getOrdinate(o,r)))}return n.append(")"),n.toString()}}static ensureValidRing(e,t){var i=t.size();if(0===i)return t;if(3>=i)return ct.createClosedRing(e,t,4);var n=t.getOrdinate(0,qe.X)===t.getOrdinate(i-1,qe.X)&&t.getOrdinate(0,qe.Y)===t.getOrdinate(i-1,qe.Y);return n?t:ct.createClosedRing(e,t,i+1)}static createClosedRing(e,t,o){var r=e.create(o,t.getDimension()),d=t.size();ct.copy(t,0,r,0,d);for(var n=d;n<o;n++)ct.copy(t,0,r,n,1);return r}getClass(){return ct}get interfaces_(){return[]}}ct.constructor_=function(){};class ut extends Ue{constructor(){super(),ut.constructor_.apply(this,arguments)}computeEnvelopeInternal(){return this.isEmpty()?new be:this._points.expandEnvelope(new be)}isRing(){return this.isClosed()&&this.isSimple()}getCoordinates(){return this._points.toCoordinateArray()}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof Ue){let n=arguments[0],i=arguments[1];if(!this.isEquivalentClass(n))return!1;var e=n;if(this._points.size()!==e._points.size())return!1;for(var t=0;t<this._points.size();t++)if(!this.equal(this._points.getCoordinate(t),e._points.getCoordinate(t),i))return!1;return!0}return super.equalsExact.apply(this,arguments)}normalize(){for(var e=0,t;e<pe(this._points.size()/2);e++)if(t=this._points.size()-1-e,!this._points.getCoordinate(e).equals(this._points.getCoordinate(t))){if(0<this._points.getCoordinate(e).compareTo(this._points.getCoordinate(t))){var n=this._points.copy();ct.reverse(n),this._points=n}return null}}getCoordinate(){return this.isEmpty()?null:this._points.getCoordinate(0)}getBoundaryDimension(){return this.isClosed()?it.FALSE:0}isClosed(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))}getEndPoint(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)}getTypeCode(){return Ue.TYPECODE_LINESTRING}getDimension(){return 1}getLength(){return lt.ofLine(this._points)}getNumPoints(){return this._points.size()}reverse(){var e=this._points.copy();ct.reverse(e);var t=this.getFactory().createLineString(e);return t}compareToSameClass(){if(1===arguments.length){let i=arguments[0];for(var e=i,t=0,n=0,o;t<this._points.size()&&n<e._points.size();){if(o=this._points.getCoordinate(t).compareTo(e._points.getCoordinate(n)),0!==o)return o;t++,n++}return t<this._points.size()?1:n<e._points.size()?-1:0}if(2===arguments.length){let t=arguments[0],n=arguments[1];var e=t;return n.compare(this._points,e._points)}}apply(){if(l(arguments[0],Xe)){let t=arguments[0];for(var e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e))}else if(l(arguments[0],rt)){let t=arguments[0];if(0===this._points.size())return null;for(var e=0;e<this._points.size()&&(t.filter(this._points,e),!t.isDone());e++);t.isGeometryChanged()&&this.geometryChanged()}else if(l(arguments[0],ot)){let e=arguments[0];e.filter(this)}else if(l(arguments[0],Ve)){let e=arguments[0];e.filter(this)}}getBoundary(){return new at(this).getBoundary()}isEquivalentClass(e){return e instanceof ut}getCoordinateN(e){return this._points.getCoordinate(e)}getGeometryType(){return Ue.TYPENAME_LINESTRING}copy(){return new ut(this._points.copy(),this._factory)}getCoordinateSequence(){return this._points}isEmpty(){return 0===this._points.size()}init(e){if(null===e&&(e=this.getFactory().getCoordinateSequenceFactory().create([])),1===e.size())throw new t("Invalid number of points in LineString (found "+e.size()+" - must be 0 or >= 2)");this._points=e}isCoordinate(e){for(var t=0;t<this._points.size();t++)if(this._points.getCoordinate(t).equals(e))return!0;return!1}getStartPoint(){return this.isEmpty()?null:this.getPointN(0)}getPointN(e){return this.getFactory().createPoint(this._points.getCoordinate(e))}getClass(){return ut}get interfaces_(){return[tt]}}ut.constructor_=function(){if(this._points=null,0===arguments.length);else if(2===arguments.length){let e=arguments[0],t=arguments[1];Ue.constructor_.call(this,t),this.init(e)}},ut.serialVersionUID=3110669828065365500;class pt{constructor(){pt.constructor_.apply(this,arguments)}getClass(){return pt}get interfaces_(){return[]}}pt.constructor_=function(){};class mt extends Ue{constructor(){super(),mt.constructor_.apply(this,arguments)}computeEnvelopeInternal(){if(this.isEmpty())return new be;var e=new be;return e.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),e}getCoordinates(){return this.isEmpty()?[]:[this.getCoordinate()]}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof Ue){let e=arguments[0],t=arguments[1];return!!this.isEquivalentClass(e)&&(!!(this.isEmpty()&&e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),t))}return super.equalsExact.apply(this,arguments)}normalize(){}getCoordinate(){return 0===this._coordinates.size()?null:this._coordinates.getCoordinate(0)}getBoundaryDimension(){return it.FALSE}getTypeCode(){return Ue.TYPECODE_POINT}getDimension(){return 0}getNumPoints(){return this.isEmpty()?0:1}reverse(){return this.copy()}getX(){if(null===this.getCoordinate())throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x}compareToSameClass(){if(1===arguments.length){let t=arguments[0];var e=t;return this.getCoordinate().compareTo(e.getCoordinate())}if(2===arguments.length){let t=arguments[0],n=arguments[1];var e=t;return n.compare(this._coordinates,e._coordinates)}}apply(){if(l(arguments[0],Xe)){let e=arguments[0];if(this.isEmpty())return null;e.filter(this.getCoordinate())}else if(l(arguments[0],rt)){let e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else if(l(arguments[0],ot)){let e=arguments[0];e.filter(this)}else if(l(arguments[0],Ve)){let e=arguments[0];e.filter(this)}}getBoundary(){return this.getFactory().createGeometryCollection()}getGeometryType(){return Ue.TYPENAME_POINT}copy(){return new mt(this._coordinates.copy(),this._factory)}getCoordinateSequence(){return this._coordinates}getY(){if(null===this.getCoordinate())throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y}isEmpty(){return 0===this._coordinates.size()}init(e){null===e&&(e=this.getFactory().getCoordinateSequenceFactory().create([])),Te.isTrue(1>=e.size()),this._coordinates=e}isSimple(){return!0}getClass(){return mt}get interfaces_(){return[pt]}}mt.constructor_=function(){this._coordinates=null;let e=arguments[0],t=arguments[1];Ue.constructor_.call(this,t),this.init(e)},mt.serialVersionUID=4902022702746615e3;class yt{constructor(){yt.constructor_.apply(this,arguments)}static ofRing(){if(arguments[0]instanceof Array){let e=arguments[0];return Ne(yt.ofRingSigned(e))}if(l(arguments[0],qe)){let e=arguments[0];return Ne(yt.ofRingSigned(e))}}static ofRingSigned(){if(arguments[0]instanceof Array){let n=arguments[0];if(3>n.length)return 0;for(var e=0,t=n[0].x,o=1;o<n.length-1;o++){var r=n[o].x-t,d=n[o+1].y,s=n[o-1].y;e+=r*(s-d)}return e/2}if(l(arguments[0],qe)){let i=arguments[0];var a=i.size();if(3>a)return 0;var n=new Re,_=new Re,g=new Re;i.getCoordinate(0,_),i.getCoordinate(1,g);var t=_.x;g.x-=t;for(var e=0,o=1;o<a-1;o++)n.y=_.y,_.x=g.x,_.y=g.y,i.getCoordinate(o+1,g),g.x-=t,e+=_.x*(n.y-g.y);return e/2}}getClass(){return yt}get interfaces_(){return[]}}yt.constructor_=function(){};class ft{constructor(){ft.constructor_.apply(this,arguments)}getClass(){return ft}get interfaces_(){return[]}}ft.constructor_=function(){};class xt extends Ue{constructor(){super(),xt.constructor_.apply(this,arguments)}computeEnvelopeInternal(){return this._shell.getEnvelopeInternal()}getCoordinates(){if(this.isEmpty())return[];for(var e=Array(this.getNumPoints()).fill(null),t=-1,n=this._shell.getCoordinates(),o=0;o<n.length;o++)t++,e[t]=n[o];for(var r=0,d;r<this._holes.length;r++){d=this._holes[r].getCoordinates();for(var s=0;s<d.length;s++)t++,e[t]=d[s]}return e}getArea(){var e=0;e+=yt.ofRing(this._shell.getCoordinateSequence());for(var t=0;t<this._holes.length;t++)e-=yt.ofRing(this._holes[t].getCoordinateSequence());return e}isRectangle(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var e=this._shell.getCoordinateSequence(),t=this.getEnvelopeInternal(),n=0,o;5>n;n++){if(o=e.getX(n),o!==t.getMinX()&&o!==t.getMaxX())return!1;var r=e.getY(n);if(r!==t.getMinY()&&r!==t.getMaxY())return!1}for(var d=e.getX(0),s=e.getY(0),n=1;4>=n;n++){var o=e.getX(n),r=e.getY(n),a=o!==d,_=r!==s;if(a===_)return!1;d=o,s=r}return!0}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof Ue){let i=arguments[0],r=arguments[1];if(!this.isEquivalentClass(i))return!1;var e=i,t=this._shell,n=e._shell;if(!t.equalsExact(n,r))return!1;if(this._holes.length!==e._holes.length)return!1;for(var o=0;o<this._holes.length;o++)if(!this._holes[o].equalsExact(e._holes[o],r))return!1;return!0}return super.equalsExact.apply(this,arguments)}normalize(){if(0===arguments.length){this.normalize(this._shell,!0);for(var e=0;e<this._holes.length;e++)this.normalize(this._holes[e],!1);M.sort(this._holes)}else if(2===arguments.length){let e=arguments[0],i=arguments[1];if(e.isEmpty())return null;var t=Array(e.getCoordinates().length-1).fill(null);N.arraycopy(e.getCoordinates(),0,t,0,t.length);var n=Ke.minCoordinate(e.getCoordinates());Ke.scroll(t,n),N.arraycopy(t,0,e.getCoordinates(),0,t.length),e.getCoordinates()[t.length]=t[0],Me.isCCW(e.getCoordinates())===i&&Ke.reverse(e.getCoordinates())}}getCoordinate(){return this._shell.getCoordinate()}getNumInteriorRing(){return this._holes.length}getBoundaryDimension(){return 1}getTypeCode(){return Ue.TYPECODE_POLYGON}getDimension(){return 2}getLength(){var e=0;e+=this._shell.getLength();for(var t=0;t<this._holes.length;t++)e+=this._holes[t].getLength();return e}getNumPoints(){for(var e=this._shell.getNumPoints(),t=0;t<this._holes.length;t++)e+=this._holes[t].getNumPoints();return e}reverse(){var e=this.copy();e._shell=this._shell.copy().reverse(),e._holes=Array(this._holes.length).fill(null);for(var t=0;t<this._holes.length;t++)e._holes[t]=this._holes[t].copy().reverse();return e}convexHull(){return this.getExteriorRing().convexHull()}compareToSameClass(){if(1===arguments.length){let n=arguments[0];var e=this._shell,t=n._shell;return e.compareToSameClass(t)}if(2===arguments.length){let i=arguments[0],g=arguments[1];var n=i,e=this._shell,t=n._shell,r=e.compareToSameClass(t,g);if(0!==r)return r;for(var d=this.getNumInteriorRing(),s=n.getNumInteriorRing(),a=0;a<d&&a<s;){var o=this.getInteriorRingN(a),_=n.getInteriorRingN(a),l=o.compareToSameClass(_,g);if(0!==l)return l;a++}return a<d?1:a<s?-1:0}}apply(){if(l(arguments[0],Xe)){let t=arguments[0];this._shell.apply(t);for(var e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(l(arguments[0],rt)){let t=arguments[0];if(this._shell.apply(t),!t.isDone())for(var e=0;e<this._holes.length&&(this._holes[e].apply(t),!t.isDone());e++);t.isGeometryChanged()&&this.geometryChanged()}else if(l(arguments[0],ot)){let e=arguments[0];e.filter(this)}else if(l(arguments[0],Ve)){let t=arguments[0];t.filter(this),this._shell.apply(t);for(var e=0;e<this._holes.length;e++)this._holes[e].apply(t)}}getBoundary(){if(this.isEmpty())return this.getFactory().createMultiLineString();var e=Array(this._holes.length+1).fill(null);e[0]=this._shell;for(var t=0;t<this._holes.length;t++)e[t+1]=this._holes[t];return 1>=e.length?this.getFactory().createLinearRing(e[0].getCoordinateSequence()):this.getFactory().createMultiLineString(e)}getGeometryType(){return Ue.TYPENAME_POLYGON}copy(){for(var e=this._shell.copy(),t=Array(this._holes.length).fill(null),n=0;n<this._holes.length;n++)t[n]=this._holes[n].copy();return new xt(e,t,this._factory)}getExteriorRing(){return this._shell}isEmpty(){return this._shell.isEmpty()}getInteriorRingN(e){return this._holes[e]}getClass(){return xt}get interfaces_(){return[ft]}}xt.constructor_=function(){this._shell=null,this._holes=null;let e=arguments[0],n=arguments[1],i=arguments[2];if(Ue.constructor_.call(this,i),null===e&&(e=this.getFactory().createLinearRing()),null===n&&(n=[]),Ue.hasNullElements(n))throw new t("holes must not contain null elements");if(e.isEmpty()&&Ue.hasNonEmptyElements(n))throw new t("shell is empty but holes are not");this._shell=e,this._holes=n},xt.serialVersionUID=-3494792200821764600;class ht extends dt{constructor(){super(),ht.constructor_.apply(this,arguments)}isValid(){return!0}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof Ue){let e=arguments[0],t=arguments[1];return!!this.isEquivalentClass(e)&&super.equalsExact.call(this,e,t)}return super.equalsExact.apply(this,arguments)}getCoordinate(){if(1===arguments.length&&xe(arguments[0])){let e=arguments[0];return this._geometries[e].getCoordinate()}return super.getCoordinate.apply(this,arguments)}getBoundaryDimension(){return it.FALSE}getTypeCode(){return Ue.TYPECODE_MULTIPOINT}getDimension(){return 0}getBoundary(){return this.getFactory().createGeometryCollection()}getGeometryType(){return Ue.TYPENAME_MULTIPOINT}copy(){for(var e=Array(this._geometries.length).fill(null),t=0;t<e.length;t++)e[t]=this._geometries[t].copy();return new ht(e,this._factory)}getClass(){return ht}get interfaces_(){return[pt]}}ht.constructor_=function(){let e=arguments[0],t=arguments[1];dt.constructor_.call(this,e,t)},ht.serialVersionUID=-8048474874175356e3;class Et extends ut{constructor(){super(),Et.constructor_.apply(this,arguments)}getBoundaryDimension(){return it.FALSE}isClosed(){return!!this.isEmpty()||super.isClosed.call(this)}getTypeCode(){return Ue.TYPECODE_LINEARRING}reverse(){var e=this._points.copy();ct.reverse(e);var t=this.getFactory().createLinearRing(e);return t}validateConstruction(){if(!this.isEmpty()&&!super.isClosed.call(this))throw new t("Points of LinearRing do not form a closed linestring");if(1<=this.getCoordinateSequence().size()&&this.getCoordinateSequence().size()<Et.MINIMUM_VALID_SIZE)throw new t("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")}getGeometryType(){return Ue.TYPENAME_LINEARRING}copy(){return new Et(this._points.copy(),this._factory)}getClass(){return Et}get interfaces_(){return[]}}Et.constructor_=function(){if(arguments[0]instanceof Array&&arguments[1]instanceof Ft){let e=arguments[0],t=arguments[1];Et.constructor_.call(this,t.getCoordinateSequenceFactory().create(e),t)}else if(l(arguments[0],qe)&&arguments[1]instanceof Ft){let e=arguments[0],t=arguments[1];ut.constructor_.call(this,e,t),this.validateConstruction()}},Et.MINIMUM_VALID_SIZE=4,Et.serialVersionUID=-4261142084085851600;class It extends dt{constructor(){super(),It.constructor_.apply(this,arguments)}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof Ue){let e=arguments[0],t=arguments[1];return!!this.isEquivalentClass(e)&&super.equalsExact.call(this,e,t)}return super.equalsExact.apply(this,arguments)}getBoundaryDimension(){return 1}getTypeCode(){return Ue.TYPECODE_MULTIPOLYGON}getDimension(){return 2}reverse(){for(var e=this._geometries.length,t=Array(e).fill(null),n=0;n<this._geometries.length;n++)t[n]=this._geometries[n].reverse();return this.getFactory().createMultiPolygon(t)}getBoundary(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var e=new f,t=0;t<this._geometries.length;t++)for(var n=this._geometries[t],o=n.getBoundary(),r=0;r<o.getNumGeometries();r++)e.add(o.getGeometryN(r));var d=Array(e.size()).fill(null);return this.getFactory().createMultiLineString(e.toArray(d))}getGeometryType(){return Ue.TYPENAME_MULTIPOLYGON}copy(){for(var e=Array(this._geometries.length).fill(null),t=0;t<e.length;t++)e[t]=this._geometries[t].copy();return new It(e,this._factory)}getClass(){return It}get interfaces_(){return[ft]}}It.constructor_=function(){let e=arguments[0],t=arguments[1];dt.constructor_.call(this,e,t)},It.serialVersionUID=-551033529766975900;class Nt{constructor(){Nt.constructor_.apply(this,arguments)}setCopyUserData(e){this._isUserDataCopied=e}edit(e,t){if(null===e)return null;var n=this.editInternal(e,t);return this._isUserDataCopied&&n.setUserData(e.getUserData()),n}editInternal(e,t){return(null===this._factory&&(this._factory=e.getFactory()),e instanceof dt)?this.editGeometryCollection(e,t):e instanceof xt?this.editPolygon(e,t):e instanceof mt?t.edit(e,this._factory):e instanceof ut?t.edit(e,this._factory):(Te.shouldNeverReachHere("Unsupported Geometry class: "+e.getClass().getName()),null)}editGeometryCollection(e,t){for(var n=t.edit(e,this._factory),o=new f,r=0,d;r<n.getNumGeometries();r++)(d=this.edit(n.getGeometryN(r),t),!(null===d||d.isEmpty()))&&o.add(d);return n.getClass()===ht?this._factory.createMultiPoint(o.toArray([])):n.getClass()===st?this._factory.createMultiLineString(o.toArray([])):n.getClass()===It?this._factory.createMultiPolygon(o.toArray([])):this._factory.createGeometryCollection(o.toArray([]))}editPolygon(e,t){var n=t.edit(e,this._factory);if(null===n&&(n=this._factory.createPolygon()),n.isEmpty())return n;var o=this.edit(n.getExteriorRing(),t);if(null===o||o.isEmpty())return this._factory.createPolygon();for(var r=new f,d=0,s;d<n.getNumInteriorRing();d++)(s=this.edit(n.getInteriorRingN(d),t),!(null===s||s.isEmpty()))&&r.add(s);return this._factory.createPolygon(o,r.toArray([]))}getClass(){return Nt}get interfaces_(){return[]}}Nt.GeometryEditorOperation=U;class Lt{constructor(){Lt.constructor_.apply(this,arguments)}edit(e){return e}getClass(){return Lt}get interfaces_(){return[U]}}Lt.constructor_=function(){};class Ct{constructor(){Ct.constructor_.apply(this,arguments)}edit(e,t){var n=this.edit(e.getCoordinates(),e);return e instanceof Et?null===n?t.createLinearRing():t.createLinearRing(n):e instanceof ut?null===n?t.createLineString():t.createLineString(n):e instanceof mt?null===n||0===n.length?t.createPoint():t.createPoint(n[0]):e}getClass(){return Ct}get interfaces_(){return[U]}}Ct.constructor_=function(){};class St{constructor(){St.constructor_.apply(this,arguments)}edit(e,t){return e instanceof Et?t.createLinearRing(this.edit(e.getCoordinateSequence(),e)):e instanceof ut?t.createLineString(this.edit(e.getCoordinateSequence(),e)):e instanceof mt?t.createPoint(this.edit(e.getCoordinateSequence(),e)):e}getClass(){return St}get interfaces_(){return[U]}}St.constructor_=function(){},Nt.NoOpGeometryOperation=Lt,Nt.CoordinateOperation=Ct,Nt.CoordinateSequenceOperation=St,Nt.constructor_=function(){if(this._factory=null,this._isUserDataCopied=!1,0===arguments.length);else if(1===arguments.length){let e=arguments[0];this._factory=e}};class Tt{constructor(){Tt.constructor_.apply(this,arguments)}setOrdinate(e,n,i){switch(n){case qe.X:this._coordinates[e].x=i;break;case qe.Y:this._coordinates[e].y=i;break;case qe.Z:this._coordinates[e].z=i;break;default:throw new t("invalid ordinateIndex");}}size(){return this._coordinates.length}getOrdinate(e,t){return t===qe.X?this._coordinates[e].x:t===qe.Y?this._coordinates[e].y:t===qe.Z?this._coordinates[e].z:o.NaN}getCoordinate(){if(1===arguments.length){let e=arguments[0];return this._coordinates[e]}if(2===arguments.length){let e=arguments[0],t=arguments[1];t.x=this._coordinates[e].x,t.y=this._coordinates[e].y,t.z=this._coordinates[e].z}}getCoordinateCopy(e){return new Re(this._coordinates[e])}getDimension(){return this._dimension}getX(e){return this._coordinates[e].x}expandEnvelope(e){for(var t=0;t<this._coordinates.length;t++)e.expandToInclude(this._coordinates[t]);return e}copy(){for(var e=Array(this.size()).fill(null),t=0;t<this._coordinates.length;t++)e[t]=this._coordinates[t].copy();return new Tt(e,this._dimension)}toString(){if(0<this._coordinates.length){var e=new V(17*this._coordinates.length);e.append("("),e.append(this._coordinates[0]);for(var t=1;t<this._coordinates.length;t++)e.append(", "),e.append(this._coordinates[t]);return e.append(")"),e.toString()}return"()"}getY(e){return this._coordinates[e].y}toCoordinateArray(){return this._coordinates}getClass(){return Tt}get interfaces_(){return[qe,a]}}Tt.constructor_=function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array){let e=arguments[0];Tt.constructor_.call(this,e,3)}else if(xe(arguments[0])){let t=arguments[0];this._coordinates=Array(t).fill(null);for(var e=0;e<t;e++)this._coordinates[e]=new Re}else if(l(arguments[0],qe)){let t=arguments[0];if(null===t)return this._coordinates=[].fill(null),null;this._dimension=t.getDimension(),this._coordinates=Array(t.size()).fill(null);for(var e=0;e<this._coordinates.length;e++)this._coordinates[e]=t.getCoordinateCopy(e)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&xe(arguments[1])){let e=arguments[0],t=arguments[1];this._coordinates=e,this._dimension=t,null===e&&(this._coordinates=[].fill(null))}else if(xe(arguments[0])&&xe(arguments[1])){let t=arguments[0],n=arguments[1];this._coordinates=Array(t).fill(null),this._dimension=n;for(var e=0;e<t;e++)this._coordinates[e]=new Re}},Tt.serialVersionUID=-915438501601840600;class Rt{constructor(){Rt.constructor_.apply(this,arguments)}static instance(){return Rt.instanceObject}readResolve(){return Rt.instance()}create(){if(1===arguments.length){if(arguments[0]instanceof Array){let e=arguments[0];return new Tt(e)}if(l(arguments[0],qe)){let e=arguments[0];return new Tt(e)}}else if(2===arguments.length){let e=arguments[0],t=arguments[1];return 3<t&&(t=3),2>t?new Tt(e):new Tt(e,t)}}getClass(){return Rt}get interfaces_(){return[Be,a]}}Rt.constructor_=function(){},Rt.serialVersionUID=-4099577099607551500,Rt.instanceObject=new Rt;// shared pointer
var Ot=Object.defineProperty,Pt=function(e,t){function n(e){return this&&this.constructor===n?void(// iteration pointers
this._keys=[],this._values=[],this._itp=[],this.objectOnly=t,e&&k.call(this,e)):new n(e)}// define size for non object-only collections
return t||Ot(e,"size",{get:Z}),e.constructor=n,n.prototype=e,n}({// WeakMap#delete(key:void*):boolean
delete:H,// :was Map#get(key:void*[, d3fault:void*]):void*
// Map#has(key:void*):boolean
has:function(e){return W.call(this,this._keys,e)},// Map#get(key:void*):boolean
get:w,// Map#set(key:void*, value:void*):void
set:j,// Map#keys(void):Iterator
keys:function(){return K(this._itp,this._keys)},// Map#values(void):Iterator
values:function(){return K(this._itp,this._values)},// Map#entries(void):Iterator
entries:function(){return K(this._itp,this._keys,this._values)},// Map#forEach(callback:Function, context:void*):void ==> callback.call(context, key, value, mapObject) === not in specs`
forEach:function(e,t){for(var n=this.entries(),i;;){if(i=n.next(),i.done)break;e.call(t,i.value[1],i.value[0],this)}},// Map#clear():
clear:function(){(this._keys||0).length=this._values.length=0}}),vt;// shortcuts
let bt="undefined"!=typeof Map&&Map.prototype.values?Map:Pt;Q.prototype=new L,Q.prototype.get=function(e){return this.map_.get(e)||null},Q.prototype.put=function(e,t){return this.map_.set(e,t),t},Q.prototype.values=function(){const e=new f,t=this.map_.values();for(let n=t.next();!n.done;)e.add(n.value),n=t.next();return e},Q.prototype.entrySet=function(){const e=new T;return this.map_.entries().forEach(t=>e.add(t)),e},Q.prototype.size=function(){return this.map_.size()};class Dt{constructor(){Dt.constructor_.apply(this,arguments)}static mostPrecise(e,t){return 0<=e.compareTo(t)?e:t}equals(e){if(!(e instanceof Dt))return!1;var t=e;return this._modelType===t._modelType&&this._scale===t._scale}compareTo(e){var t=this.getMaximumSignificantDigits(),n=e.getMaximumSignificantDigits();return new E(t).compareTo(new E(n))}getScale(){return this._scale}isFloating(){return this._modelType===Dt.FLOATING||this._modelType===Dt.FLOATING_SINGLE}getType(){return this._modelType}toString(){var e="UNKNOWN";return this._modelType===Dt.FLOATING?e="Floating":this._modelType===Dt.FLOATING_SINGLE?e="Floating-Single":this._modelType===Dt.FIXED&&(e="Fixed (Scale="+this.getScale()+")"),e}makePrecise(){if("number"==typeof arguments[0]){let t=arguments[0];if(o.isNaN(t))return t;if(this._modelType===Dt.FLOATING_SINGLE){var e=t;return e}return this._modelType===Dt.FIXED?ae(t*this._scale)/this._scale:t}if(arguments[0]instanceof Re){let e=arguments[0];if(this._modelType===Dt.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}}getMaximumSignificantDigits(){var e=16;return this._modelType===Dt.FLOATING?e=16:this._modelType===Dt.FLOATING_SINGLE?e=6:this._modelType===Dt.FIXED&&(e=1+pe(ue(ge(this.getScale())/ge(10)))),e}setScale(e){this._scale=Ne(e)}getClass(){return Dt}get interfaces_(){return[a,r]}}class At{constructor(){At.constructor_.apply(this,arguments)}readResolve(){return At.nameToTypeMap.get(this._name)}toString(){return this._name}getClass(){return At}get interfaces_(){return[a]}}At.constructor_=function(){this._name=null;let e=arguments[0];this._name=e,At.nameToTypeMap.put(e,this)},At.serialVersionUID=-552860263173159e4,At.nameToTypeMap=new Q,Dt.Type=At,Dt.constructor_=function(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=Dt.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof At){let e=arguments[0];this._modelType=e,e===Dt.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){let e=arguments[0];this._modelType=Dt.FIXED,this.setScale(e)}else if(arguments[0]instanceof Dt){let e=arguments[0];this._modelType=e._modelType,this._scale=e._scale}},Dt.serialVersionUID=7777263578777804e3,Dt.FIXED=new At("FIXED"),Dt.FLOATING=new At("FLOATING"),Dt.FLOATING_SINGLE=new At("FLOATING SINGLE"),Dt.maximumPreciseValue=9007199254740992;class Ft{constructor(){Ft.constructor_.apply(this,arguments)}static toMultiPolygonArray(e){var t=Array(e.size()).fill(null);return e.toArray(t)}static toGeometryArray(e){if(null===e)return null;var t=Array(e.size()).fill(null);return e.toArray(t)}static getDefaultCoordinateSequenceFactory(){return Rt.instance()}static toMultiLineStringArray(e){var t=Array(e.size()).fill(null);return e.toArray(t)}static toLineStringArray(e){var t=Array(e.size()).fill(null);return e.toArray(t)}static toMultiPointArray(e){var t=Array(e.size()).fill(null);return e.toArray(t)}static toLinearRingArray(e){var t=Array(e.size()).fill(null);return e.toArray(t)}static toPointArray(e){var t=Array(e.size()).fill(null);return e.toArray(t)}static toPolygonArray(e){var t=Array(e.size()).fill(null);return e.toArray(t)}static createPointFromInternalCoord(e,t){return t.getPrecisionModel().makePrecise(e),t.getFactory().createPoint(e)}toGeometry(e){return e.isNull()?this.createPoint():e.getMinX()===e.getMaxX()&&e.getMinY()===e.getMaxY()?this.createPoint(new Re(e.getMinX(),e.getMinY())):e.getMinX()===e.getMaxX()||e.getMinY()===e.getMaxY()?this.createLineString([new Re(e.getMinX(),e.getMinY()),new Re(e.getMaxX(),e.getMaxY())]):this.createPolygon(this.createLinearRing([new Re(e.getMinX(),e.getMinY()),new Re(e.getMinX(),e.getMaxY()),new Re(e.getMaxX(),e.getMaxY()),new Re(e.getMaxX(),e.getMinY()),new Re(e.getMinX(),e.getMinY())]),null)}createLineString(){if(0===arguments.length)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){let e=arguments[0];return this.createLineString(null===e?null:this.getCoordinateSequenceFactory().create(e))}if(l(arguments[0],qe)){let e=arguments[0];return new ut(e,this)}}}createMultiLineString(){if(0===arguments.length)return new st(null,this);if(1===arguments.length){let e=arguments[0];return new st(e,this)}}buildGeometry(e){for(var t=null,n=!1,o=!1,r=e.iterator();r.hasNext();){var i=r.next(),d=i.getClass();null===t&&(t=d),d!==t&&(n=!0),i instanceof dt&&(o=!0)}if(null===t)return this.createGeometryCollection();if(n||o)return this.createGeometryCollection(Ft.toGeometryArray(e));var s=e.iterator().next(),a=1<e.size();if(a){if(s instanceof xt)return this.createMultiPolygon(Ft.toPolygonArray(e));if(s instanceof ut)return this.createMultiLineString(Ft.toLineStringArray(e));if(s instanceof mt)return this.createMultiPoint(Ft.toPointArray(e));Te.shouldNeverReachHere("Unhandled class: "+s.getClass().getName())}return s}createMultiPointFromCoords(e){return this.createMultiPoint(null===e?null:this.getCoordinateSequenceFactory().create(e))}createPoint(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Re){let e=arguments[0];return this.createPoint(null===e?null:this.getCoordinateSequenceFactory().create([e]))}if(l(arguments[0],qe)){let e=arguments[0];return new mt(e,this)}}}getCoordinateSequenceFactory(){return this._coordinateSequenceFactory}createPolygon(){if(0===arguments.length)return this.createPolygon(null,null);if(1===arguments.length){if(l(arguments[0],qe)){let e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof Array){let e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof Et){let e=arguments[0];return this.createPolygon(e,null)}}else if(2===arguments.length){let e=arguments[0],t=arguments[1];return new xt(e,t,this)}}getSRID(){return this._SRID}createGeometryCollection(){if(0===arguments.length)return new dt(null,this);if(1===arguments.length){let e=arguments[0];return new dt(e,this)}}createGeometry(e){var t=new Nt(this);return t.edit(e,new class{edit(){if(2===arguments.length&&arguments[1]instanceof Ue&&l(arguments[0],qe)){let e=arguments[0];return this._coordinateSequenceFactory.create(e)}}})}getPrecisionModel(){return this._precisionModel}createLinearRing(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){let e=arguments[0];return this.createLinearRing(null===e?null:this.getCoordinateSequenceFactory().create(e))}if(l(arguments[0],qe)){let e=arguments[0];return new Et(e,this)}}}createMultiPolygon(){if(0===arguments.length)return new It(null,this);if(1===arguments.length){let e=arguments[0];return new It(e,this)}}createMultiPoint(){if(0===arguments.length)return new ht(null,this);if(1===arguments.length){if(arguments[0]instanceof Array){let e=arguments[0];return new ht(e,this)}if(l(arguments[0],qe)){let i=arguments[0];if(null===i)return this.createMultiPoint([].fill(null));for(var e=Array(i.size()).fill(null),t=0,n;t<i.size();t++)n=this.getCoordinateSequenceFactory().create(1,i.getDimension()),ct.copy(i,t,n,0,1),e[t]=this.createPoint(n);return this.createMultiPoint(e)}}}getClass(){return Ft}get interfaces_(){return[a]}}Ft.constructor_=function(){if(this._precisionModel=null,this._coordinateSequenceFactory=null,this._SRID=null,0===arguments.length)Ft.constructor_.call(this,new Dt,0);else if(1===arguments.length){if(l(arguments[0],Be)){let e=arguments[0];Ft.constructor_.call(this,new Dt,0,e)}else if(arguments[0]instanceof Dt){let e=arguments[0];Ft.constructor_.call(this,e,0,Ft.getDefaultCoordinateSequenceFactory())}}else if(2===arguments.length){let e=arguments[0],t=arguments[1];Ft.constructor_.call(this,e,t,Ft.getDefaultCoordinateSequenceFactory())}else if(3===arguments.length){let e=arguments[0],t=arguments[1],n=arguments[2];this._precisionModel=e,this._coordinateSequenceFactory=n,this._SRID=t}},Ft.serialVersionUID=-6820524753094096e3;const Mt={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,// can't use {2} here
trimParens:/^\s*\(?(.*?)\)?\s*$/};/**
   * Class for reading and writing Well-Known Text.
   *
   * NOTE: Adapted from OpenLayers 2.11 implementation.
   */class Gt{/** Create a new parser for WKT
     *
     * @param {GeometryFactory} geometryFactory
     * @return An instance of WKTParser.
     * @private
     */constructor(e){this.geometryFactory=e||new Ft,this.precisionModel=this.geometryFactory.getPrecisionModel()}/**
     * Deserialize a WKT string and return a geometry. Supports WKT for POINT,
     * MULTIPOINT, LINESTRING, LINEARRING, MULTILINESTRING, POLYGON, MULTIPOLYGON,
     * and GEOMETRYCOLLECTION.
     *
     * @param {String} wkt A WKT string.
     * @return {Geometry} A geometry instance.
     * @private
     */read(e){var t,n,i;e=e.replace(/[\n\r]/g," ");var o=Mt.typeStr.exec(e);if(-1!==e.search("EMPTY")&&(o=Mt.emptyTypeStr.exec(e),o[2]=void 0),o&&(n=o[1].toLowerCase(),i=o[2],zt[n]&&(t=zt[n].call(this,i))),void 0===t)throw new Error("Could not parse WKT "+e);return t}/**
     * Serialize a geometry into a WKT string.
     *
     * @param {Geometry} geometry A feature or array of features.
     * @return {String} The WKT string representation of the input geometries.
     * @private
     */write(e){return this.extractGeometry(e)}/**
     * Entry point to construct the WKT for a single Geometry object.
     *
     * @param {Geometry} geometry
     * @return {String} A WKT string of representing the geometry.
     * @private
     */extractGeometry(e){var t=e.getGeometryType().toLowerCase();if(!Yt[t])return null;var n=t.toUpperCase(),i;return i=e.isEmpty()?n+" EMPTY":n+"("+Yt[t].call(this,e)+")",i}}/**
   * Object with properties corresponding to the geometry types. Property values
   * are functions that do the actual data extraction.
   * @private
   */const Yt={coordinate(e){return e.x+" "+e.y},/**
     * Return a space delimited string of point coordinates.
     *
     * @param {Point}
     *          point
     * @return {String} A string of coordinates representing the point.
     */point(e){return Yt.coordinate.call(this,e._coordinates._coordinates[0])},/**
     * Return a comma delimited string of point coordinates from a multipoint.
     *
     * @param {MultiPoint}
     *          multipoint
     * @return {String} A string of point coordinate strings representing the
     *         multipoint.
     */multipoint(e){var t=[];for(let n=0,i=e._geometries.length;n<i;++n)t.push("("+Yt.point.call(this,e._geometries[n])+")");return t.join(",")},/**
     * Return a comma delimited string of point coordinates from a line.
     *
     * @param {LineString} linestring
     * @return {String} A string of point coordinate strings representing the linestring.
     */linestring(e){var t=[];for(let n=0,i=e._points._coordinates.length;n<i;++n)t.push(Yt.coordinate.call(this,e._points._coordinates[n]));return t.join(",")},linearring(e){var t=[];for(let n=0,i=e._points._coordinates.length;n<i;++n)t.push(Yt.coordinate.call(this,e._points._coordinates[n]));return t.join(",")},/**
     * Return a comma delimited string of linestring strings from a
     * multilinestring.
     *
     * @param {MultiLineString} multilinestring
     * @return {String} A string of of linestring strings representing the multilinestring.
     */multilinestring(e){var t=[];for(let n=0,i=e._geometries.length;n<i;++n)t.push("("+Yt.linestring.call(this,e._geometries[n])+")");return t.join(",")},/**
     * Return a comma delimited string of linear ring arrays from a polygon.
     *
     * @param {Polygon} polygon
     * @return {String} An array of linear ring arrays representing the polygon.
     */polygon(e){var t=["("+Yt.linestring.call(this,e._shell)+")"];for(let n=0,i=e._holes.length;n<i;++n)t.push("("+Yt.linestring.call(this,e._holes[n])+")");return t.join(",")},/**
     * Return an array of polygon arrays from a multipolygon.
     *
     * @param {MultiPolygon} multipolygon
     * @return {String} An array of polygon arrays representing the multipolygon.
     */multipolygon(e){var t=[];for(let n=0,i=e._geometries.length;n<i;++n)t.push("("+Yt.polygon.call(this,e._geometries[n])+")");return t.join(",")},/**
     * Return the WKT portion between 'GEOMETRYCOLLECTION(' and ')' for an
     * geometrycollection.
     *
     * @param {GeometryCollection} collection
     * @return {String} internal WKT representation of the collection.
     */geometrycollection(e){var t=[];for(let n=0,i=e._geometries.length;n<i;++n)t.push(this.extractGeometry(e._geometries[n]));return t.join(",")}},zt={coord(e){var t=e.trim().split(Mt.spaces),n=new Re(ye(t[0]),ye(t[1]));return this.precisionModel.makePrecise(n),n},/**
     * Return point geometry given a point WKT fragment.
     *
     * @param {String} str A WKT fragment representing the point.
     * @return {Point} A point geometry.
     * @private
     */point(e){return void 0===e?this.geometryFactory.createPoint():this.geometryFactory.createPoint(zt.coord.call(this,e))},/**
     * Return a multipoint geometry given a multipoint WKT fragment.
     *
     * @param {String} str A WKT fragment representing the multipoint.
     * @return {Point} A multipoint feature.
     * @private
     */multipoint(e){if(void 0===e)return this.geometryFactory.createMultiPoint();var t=e.trim().split(","),n=[],o;for(let r=0,i=t.length;r<i;++r)o=t[r].replace(Mt.trimParens,"$1"),n.push(zt.point.call(this,o));return this.geometryFactory.createMultiPoint(n)},/**
     * Return a linestring geometry given a linestring WKT fragment.
     *
     * @param {String} str A WKT fragment representing the linestring.
     * @return {LineString} A linestring geometry.
     * @private
     */linestring(e){if(void 0===e)return this.geometryFactory.createLineString();var t=e.trim().split(","),n=[];for(let o=0,i=t.length;o<i;++o)n.push(zt.coord.call(this,t[o]));return this.geometryFactory.createLineString(n)},/**
     * Return a linearring geometry given a linearring WKT fragment.
     *
     * @param {String} str A WKT fragment representing the linearring.
     * @return {LinearRing} A linearring geometry.
     * @private
     */linearring(e){if(void 0===e)return this.geometryFactory.createLinearRing();var t=e.trim().split(","),n=[];for(let o=0,i=t.length;o<i;++o)n.push(zt.coord.call(this,t[o]));return this.geometryFactory.createLinearRing(n)},/**
     * Return a multilinestring geometry given a multilinestring WKT fragment.
     *
     * @param {String} str A WKT fragment representing the multilinestring.
     * @return {MultiLineString} A multilinestring geometry.
     * @private
     */multilinestring(e){if(void 0===e)return this.geometryFactory.createMultiLineString();var t=e.trim().split(Mt.parenComma),n=[],o;for(let r=0,i=t.length;r<i;++r)o=t[r].replace(Mt.trimParens,"$1"),n.push(zt.linestring.call(this,o));return this.geometryFactory.createMultiLineString(n)},/**
     * Return a polygon geometry given a polygon WKT fragment.
     *
     * @param {String} str A WKT fragment representing the polygon.
     * @return {Polygon} A polygon geometry.
     * @private
     */polygon(e){if(void 0===e)return this.geometryFactory.createPolygon();var t=e.trim().split(Mt.parenComma),n=[],o,r,d,s;for(let a=0,i=t.length;a<i;++a)o=t[a].replace(Mt.trimParens,"$1"),r=zt.linestring.call(this,o),d=this.geometryFactory.createLinearRing(r._points),0==a?s=d:n.push(d);return this.geometryFactory.createPolygon(s,n)},/**
     * Return a multipolygon geometry given a multipolygon WKT fragment.
     *
     * @param {String} str A WKT fragment representing the multipolygon.
     * @return {MultiPolygon} A multipolygon geometry.
     * @private
     */multipolygon(e){if(void 0===e)return this.geometryFactory.createMultiPolygon();var t=e.trim().split(Mt.doubleParenComma),n=[],o;for(let r=0,i=t.length;r<i;++r)o=t[r].replace(Mt.trimParens,"$1"),n.push(zt.polygon.call(this,o));return this.geometryFactory.createMultiPolygon(n)},/**
     * Return a geometrycollection given a geometrycollection WKT fragment.
     *
     * @param {String} str A WKT fragment representing the geometrycollection.
     * @return {GeometryCollection}
     * @private
     */geometrycollection(e){if(void 0===e)return this.geometryFactory.createGeometryCollection();// separate components of the collection with |
e=e.replace(/,\s*([A-Za-z])/g,"|$1");var t=e.trim().split("|"),n=[];for(let o=0,i=t.length;o<i;++o)n.push(this.read(t[o]));return this.geometryFactory.createGeometryCollection(n)}};/**
   * Object with properties corresponding to the geometry types. Property values
   * are functions that do the actual parsing.
   * @private
   */ /**
   * @module org/locationtech/jts/io/WKTWriter
   */ /**
   * Writes the Well-Known Text representation of a {@link Geometry}. The
   * Well-Known Text format is defined in the <A
   * HREF="http://www.opengis.org/techno/specs.htm"> OGC Simple Features
   * Specification for SQL</A>.
   * <p>
   * The <code>WKTWriter</code> outputs coordinates rounded to the precision
   * model. Only the maximum number of decimal places necessary to represent the
   * ordinates to the required precision will be output.
   * <p>
   * The SFS WKT spec does not define a special tag for {@link LinearRing}s.
   * Under the spec, rings are output as <code>LINESTRING</code>s.
   */class qt{/**
     * @param {GeometryFactory} geometryFactory
     */constructor(e){this.parser=new Gt(e)}/**
     * Converts a <code>Geometry</code> to its Well-known Text representation.
     *
     * @param {Geometry} geometry a <code>Geometry</code> to process.
     * @return {string} a <Geometry Tagged Text> string (see the OpenGIS Simple
     *         Features Specification).
     * @memberof module:org/locationtech/jts/io/WKTWriter#
     */write(e){return this.parser.write(e)}/**
     * Generates the WKT for a <tt>LINESTRING</tt> specified by two
     * {@link Coordinate}s.
     *
     * @param p0 the first coordinate.
     * @param p1 the second coordinate.
     *
     * @return the WKT.
     * @private
     */static toLineString(e,t){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+e.x+" "+e.y+", "+t.x+" "+t.y+" )"}}class Bt{constructor(){Bt.constructor_.apply(this,arguments)}static computeEdgeDistance(e,t,n){var i=Ne(n.x-t.x),o=Ne(n.y-t.y),r=-1;if(e.equals(t))r=0;else if(e.equals(n))r=i>o?i:o;else{var d=Ne(e.x-t.x),s=Ne(e.y-t.y);r=i>o?d:s,0!==r||e.equals(t)||(r=Ee(d,s))}return Te.isTrue(0!==r||e.equals(t),"Bad distance calculation"),r}static nonRobustComputeEdgeDistance(e,t){var n=e.x-t.x,i=e.y-t.y,o=_e(n*n+i*i);return Te.isTrue(0!==o||e.equals(t),"Invalid distance calculation"),o}getIndexAlongSegment(e,t){return this.computeIntLineIndex(),this._intLineIndex[e][t]}getTopologySummary(){var e=new V;return this.isEndPoint()&&e.append(" endpoint"),this._isProper&&e.append(" proper"),this.isCollinear()&&e.append(" collinear"),e.toString()}computeIntersection(e,t,n,i){this._inputLines[0][0]=e,this._inputLines[0][1]=t,this._inputLines[1][0]=n,this._inputLines[1][1]=i,this._result=this.computeIntersect(e,t,n,i)}getIntersectionNum(){return this._result}computeIntLineIndex(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=[,,].fill().map(()=>[,,]),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){let n=arguments[0];var e=this.getEdgeDistance(n,0),t=this.getEdgeDistance(n,1);e>t?(this._intLineIndex[n][0]=0,this._intLineIndex[n][1]=1):(this._intLineIndex[n][0]=1,this._intLineIndex[n][1]=0)}}isProper(){return this.hasIntersection()&&this._isProper}setPrecisionModel(e){this._precisionModel=e}isInteriorIntersection(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){let t=arguments[0];for(var e=0;e<this._result;e++)if(!(this._intPt[e].equals2D(this._inputLines[t][0])||this._intPt[e].equals2D(this._inputLines[t][1])))return!0;return!1}}getIntersection(e){return this._intPt[e]}isEndPoint(){return this.hasIntersection()&&!this._isProper}hasIntersection(){return this._result!==Bt.NO_INTERSECTION}getEdgeDistance(e,t){var n=Bt.computeEdgeDistance(this._intPt[t],this._inputLines[e][0],this._inputLines[e][1]);return n}isCollinear(){return this._result===Bt.COLLINEAR_INTERSECTION}toString(){return qt.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+qt.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()}getEndpoint(e,t){return this._inputLines[e][t]}isIntersection(e){for(var t=0;t<this._result;t++)if(this._intPt[t].equals2D(e))return!0;return!1}getIntersectionAlongSegment(e,t){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[e][t]]}getClass(){return Bt}get interfaces_(){return[]}}Bt.constructor_=function(){this._result=null,this._inputLines=[,,].fill().map(()=>[,,]),this._intPt=[,,].fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new Re,this._intPt[1]=new Re,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},Bt.DONT_INTERSECT=0,Bt.DO_INTERSECT=1,Bt.COLLINEAR=2,Bt.NO_INTERSECTION=0,Bt.POINT_INTERSECTION=1,Bt.COLLINEAR_INTERSECTION=2;class Vt extends Bt{constructor(){super(),Vt.constructor_.apply(this,arguments)}static nearestEndpoint(e,t,n,i){var o=e,r=ze.pointToSegment(e,n,i),d=ze.pointToSegment(t,n,i);return d<r&&(r=d,o=t),d=ze.pointToSegment(n,e,t),d<r&&(r=d,o=n),d=ze.pointToSegment(i,e,t),d<r&&(r=d,o=i),o}isInSegmentEnvelopes(e){var t=new be(this._inputLines[0][0],this._inputLines[0][1]),n=new be(this._inputLines[1][0],this._inputLines[1][1]);return t.contains(e)&&n.contains(e)}computeIntersection(){if(3===arguments.length){let e=arguments[0],t=arguments[1],n=arguments[2];if(this._isProper=!1,be.intersects(t,n,e)&&0===Me.index(t,n,e)&&0===Me.index(n,t,e))return this._isProper=!0,(e.equals(t)||e.equals(n))&&(this._isProper=!1),this._result=Bt.POINT_INTERSECTION,null;this._result=Bt.NO_INTERSECTION}else return super.computeIntersection.apply(this,arguments)}normalizeToMinimum(e,t,n,i,o){o.x=this.smallestInAbsValue(e.x,t.x,n.x,i.x),o.y=this.smallestInAbsValue(e.y,t.y,n.y,i.y),e.x-=o.x,e.y-=o.y,t.x-=o.x,t.y-=o.y,n.x-=o.x,n.y-=o.y,i.x-=o.x,i.y-=o.y}safeHCoordinateIntersection(t,n,i,o){var r=null;try{r=Ge.intersection(t,n,i,o)}catch(d){if(d instanceof De)r=Vt.nearestEndpoint(t,n,i,o);else throw d}finally{}return r}intersection(e,t,n,i){var o=this.intersectionWithNormalization(e,t,n,i);return this.isInSegmentEnvelopes(o)||(o=new Re(Vt.nearestEndpoint(e,t,n,i))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o}smallestInAbsValue(e,t,n,i){var o=e,r=Ne(o);return Ne(t)<r&&(o=t,r=Ne(t)),Ne(n)<r&&(o=n,r=Ne(n)),Ne(i)<r&&(o=i),o}checkDD(e,t,n,i,o){var r=Fe.intersection(e,t,n,i),d=this.isInSegmentEnvelopes(r);N.out.println("DD in env = "+d+"  --------------------- "+r),1e-4<o.distance(r)&&N.out.println("Distance = "+o.distance(r))}intersectionWithNormalization(e,t,n,i){var o=new Re(e),r=new Re(t),d=new Re(n),s=new Re(i),a=new Re;this.normalizeToEnvCentre(o,r,d,s,a);var _=this.safeHCoordinateIntersection(o,r,d,s);return _.x+=a.x,_.y+=a.y,_}computeCollinearIntersection(e,t,n,i){var o=be.intersects(e,t,n),r=be.intersects(e,t,i),d=be.intersects(n,i,e),s=be.intersects(n,i,t);return o&&r?(this._intPt[0]=n,this._intPt[1]=i,Bt.COLLINEAR_INTERSECTION):d&&s?(this._intPt[0]=e,this._intPt[1]=t,Bt.COLLINEAR_INTERSECTION):o&&d?(this._intPt[0]=n,this._intPt[1]=e,!n.equals(e)||r||s?Bt.COLLINEAR_INTERSECTION:Bt.POINT_INTERSECTION):o&&s?(this._intPt[0]=n,this._intPt[1]=t,!n.equals(t)||r||d?Bt.COLLINEAR_INTERSECTION:Bt.POINT_INTERSECTION):r&&d?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||o||s?Bt.COLLINEAR_INTERSECTION:Bt.POINT_INTERSECTION):r&&s?(this._intPt[0]=i,this._intPt[1]=t,!i.equals(t)||o||d?Bt.COLLINEAR_INTERSECTION:Bt.POINT_INTERSECTION):Bt.NO_INTERSECTION}normalizeToEnvCentre(e,t,n,i,o){var r=e.x<t.x?e.x:t.x,d=e.y<t.y?e.y:t.y,s=e.x>t.x?e.x:t.x,a=e.y>t.y?e.y:t.y,_=n.x<i.x?n.x:i.x,l=n.y<i.y?n.y:i.y,g=n.x>i.x?n.x:i.x,c=n.y>i.y?n.y:i.y,u=r>_?r:_,p=s<g?s:g,m=d>l?d:l,y=a<c?a:c;o.x=(u+p)/2,o.y=(m+y)/2,e.x-=o.x,e.y-=o.y,t.x-=o.x,t.y-=o.y,n.x-=o.x,n.y-=o.y,i.x-=o.x,i.y-=o.y}computeIntersect(e,t,n,i){if(this._isProper=!1,!be.intersects(e,t,n,i))return Bt.NO_INTERSECTION;var o=Me.index(e,t,n),r=Me.index(e,t,i);if(0<o&&0<r||0>o&&0>r)return Bt.NO_INTERSECTION;var d=Me.index(n,i,e),s=Me.index(n,i,t);if(0<d&&0<s||0>d&&0>s)return Bt.NO_INTERSECTION;return 0===o&&0===r&&0===d&&0===s?this.computeCollinearIntersection(e,t,n,i):(0===o||0===r||0===d||0===s?(this._isProper=!1,e.equals2D(n)||e.equals2D(i)?this._intPt[0]=e:t.equals2D(n)||t.equals2D(i)?this._intPt[0]=t:0===o?this._intPt[0]=new Re(n):0===r?this._intPt[0]=new Re(i):0===d?this._intPt[0]=new Re(e):0===s&&(this._intPt[0]=new Re(t))):(this._isProper=!0,this._intPt[0]=this.intersection(e,t,n,i)),Bt.POINT_INTERSECTION)}getClass(){return Vt}get interfaces_(){return[]}}Vt.constructor_=function(){};class Ut{constructor(){Ut.constructor_.apply(this,arguments)}static midPoint(e,t){return new Re((e.x+t.x)/2,(e.y+t.y)/2)}minX(){return Ie(this.p0.x,this.p1.x)}orientationIndex(){if(arguments[0]instanceof Ut){let n=arguments[0];var e=Me.index(this.p0,this.p1,n.p0),t=Me.index(this.p0,this.p1,n.p1);return 0<=e&&0<=t?Ee(e,t):0>=e&&0>=t?Ee(e,t):0}if(arguments[0]instanceof Re){let e=arguments[0];return Me.index(this.p0,this.p1,e)}}toGeometry(e){return e.createLineString([this.p0,this.p1])}isVertical(){return this.p0.x===this.p1.x}equals(e){if(!(e instanceof Ut))return!1;var t=e;return this.p0.equals(t.p0)&&this.p1.equals(t.p1)}intersection(e){var t=new Vt;return t.computeIntersection(this.p0,this.p1,e.p0,e.p1),t.hasIntersection()?t.getIntersection(0):null}project(){if(arguments[0]instanceof Re){let n=arguments[0];if(n.equals(this.p0)||n.equals(this.p1))return new Re(n);var e=this.projectionFactor(n),t=new Re;return t.x=this.p0.x+e*(this.p1.x-this.p0.x),t.y=this.p0.y+e*(this.p1.y-this.p0.y),t}if(arguments[0]instanceof Ut){let e=arguments[0];var n=this.projectionFactor(e.p0),i=this.projectionFactor(e.p1);if(1<=n&&1<=i)return null;if(0>=n&&0>=i)return null;var o=this.project(e.p0);0>n&&(o=this.p0),1<n&&(o=this.p1);var r=this.project(e.p1);return 0>i&&(r=this.p0),1<i&&(r=this.p1),new Ut(o,r)}}normalize(){0>this.p1.compareTo(this.p0)&&this.reverse()}angle(){return se(this.p1.y-this.p0.y,this.p1.x-this.p0.x)}getCoordinate(e){return 0===e?this.p0:this.p1}distancePerpendicular(e){return ze.pointToLinePerpendicular(e,this.p0,this.p1)}minY(){return Ie(this.p0.y,this.p1.y)}midPoint(){return Ut.midPoint(this.p0,this.p1)}projectionFactor(e){if(e.equals(this.p0))return 0;if(e.equals(this.p1))return 1;var t=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,i=t*t+n*n;if(0>=i)return o.NaN;var d=((e.x-this.p0.x)*t+(e.y-this.p0.y)*n)/i;return d}closestPoints(e){var t=this.intersection(e);if(null!==t)return[t,t];var n=[,,].fill(null),i=o.MAX_VALUE,r=null,d=this.closestPoint(e.p0);i=d.distance(e.p0),n[0]=d,n[1]=e.p0;var s=this.closestPoint(e.p1);r=s.distance(e.p1),r<i&&(i=r,n[0]=s,n[1]=e.p1);var a=e.closestPoint(this.p0);r=a.distance(this.p0),r<i&&(i=r,n[0]=this.p0,n[1]=a);var _=e.closestPoint(this.p1);return r=_.distance(this.p1),r<i&&(i=r,n[0]=this.p1,n[1]=_),n}closestPoint(e){var t=this.projectionFactor(e);if(0<t&&1>t)return this.project(e);var n=this.p0.distance(e),i=this.p1.distance(e);return n<i?this.p0:this.p1}maxX(){return Ee(this.p0.x,this.p1.x)}getLength(){return this.p0.distance(this.p1)}compareTo(e){var t=e,n=this.p0.compareTo(t.p0);return 0===n?this.p1.compareTo(t.p1):n}reverse(){var e=this.p0;this.p0=this.p1,this.p1=e}equalsTopo(e){return this.p0.equals(e.p0)&&this.p1.equals(e.p1)||this.p0.equals(e.p1)&&this.p1.equals(e.p0)}lineIntersection(e){try{var t=Ge.intersection(this.p0,this.p1,e.p0,e.p1);return t}catch(e){if(e instanceof De);else throw e}finally{}return null}maxY(){return Ee(this.p0.y,this.p1.y)}pointAlongOffset(e,t){var n=this.p0.x+e*(this.p1.x-this.p0.x),i=this.p0.y+e*(this.p1.y-this.p0.y),o=this.p1.x-this.p0.x,r=this.p1.y-this.p0.y,d=_e(o*o+r*r),s=0,a=0;if(0!==t){if(0>=d)throw new IllegalStateException("Cannot compute offset from zero-length line segment");s=t*o/d,a=t*r/d}var _=n-a,l=i+s,g=new Re(_,l);return g}setCoordinates(){if(1===arguments.length){let e=arguments[0];this.setCoordinates(e.p0,e.p1)}else if(2===arguments.length){let e=arguments[0],t=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=t.x,this.p1.y=t.y}}segmentFraction(e){var t=this.projectionFactor(e);return 0>t?t=0:(1<t||o.isNaN(t))&&(t=1),t}toString(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"}isHorizontal(){return this.p0.y===this.p1.y}distance(){if(arguments[0]instanceof Ut){let e=arguments[0];return ze.segmentToSegment(this.p0,this.p1,e.p0,e.p1)}if(arguments[0]instanceof Re){let e=arguments[0];return ze.pointToSegment(e,this.p0,this.p1)}}pointAlong(e){var t=new Re;return t.x=this.p0.x+e*(this.p1.x-this.p0.x),t.y=this.p0.y+e*(this.p1.y-this.p0.y),t}hashCode(){var e=java.lang.Double.doubleToLongBits(this.p0.x);e^=31*java.lang.Double.doubleToLongBits(this.p0.y);var t=pe(e)^pe(e>>32),n=java.lang.Double.doubleToLongBits(this.p1.x);n^=31*java.lang.Double.doubleToLongBits(this.p1.y);var i=pe(n)^pe(n>>32);return t^i}getClass(){return Ut}get interfaces_(){return[r,a]}}Ut.constructor_=function(){if(this.p0=null,this.p1=null,0===arguments.length)Ut.constructor_.call(this,new Re,new Re);else if(1===arguments.length){let e=arguments[0];Ut.constructor_.call(this,e.p0,e.p1)}else if(2===arguments.length){let e=arguments[0],t=arguments[1];this.p0=e,this.p1=t}else if(4===arguments.length){let e=arguments[0],t=arguments[1],n=arguments[2],i=arguments[3];Ut.constructor_.call(this,new Re(e,t),new Re(n,i))}},Ut.serialVersionUID=3252005833466256400;class Xt{constructor(){Xt.constructor_.apply(this,arguments)}static toLocationSymbol(e){switch(e){case Xt.EXTERIOR:return"e";case Xt.BOUNDARY:return"b";case Xt.INTERIOR:return"i";case Xt.NONE:return"-";}throw new t("Unknown location value: "+e)}getClass(){return Xt}get interfaces_(){return[]}}Xt.constructor_=function(){},Xt.INTERIOR=0,Xt.BOUNDARY=1,Xt.EXTERIOR=2,Xt.NONE=-1;class kt{constructor(){kt.constructor_.apply(this,arguments)}static matches(){if(xe(arguments[0])&&"string"==typeof arguments[1]){let e=arguments[0],t=arguments[1];return t===it.SYM_DONTCARE||!!(t===it.SYM_TRUE&&(0<=e||e===it.TRUE))||t===it.SYM_FALSE&&e===it.FALSE||t===it.SYM_P&&e===it.P||t===it.SYM_L&&e===it.L||t===it.SYM_A&&e===it.A}if("string"==typeof arguments[0]&&"string"==typeof arguments[1]){let t=arguments[0],n=arguments[1];var e=new kt(t);return e.matches(n)}}static isTrue(e){return!!(0<=e||e===it.TRUE)}isIntersects(){return!this.isDisjoint()}isCovers(){var e=kt.isTrue(this._matrix[Xt.INTERIOR][Xt.INTERIOR])||kt.isTrue(this._matrix[Xt.INTERIOR][Xt.BOUNDARY])||kt.isTrue(this._matrix[Xt.BOUNDARY][Xt.INTERIOR])||kt.isTrue(this._matrix[Xt.BOUNDARY][Xt.BOUNDARY]);return e&&this._matrix[Xt.EXTERIOR][Xt.INTERIOR]===it.FALSE&&this._matrix[Xt.EXTERIOR][Xt.BOUNDARY]===it.FALSE}isCoveredBy(){var e=kt.isTrue(this._matrix[Xt.INTERIOR][Xt.INTERIOR])||kt.isTrue(this._matrix[Xt.INTERIOR][Xt.BOUNDARY])||kt.isTrue(this._matrix[Xt.BOUNDARY][Xt.INTERIOR])||kt.isTrue(this._matrix[Xt.BOUNDARY][Xt.BOUNDARY]);return e&&this._matrix[Xt.INTERIOR][Xt.EXTERIOR]===it.FALSE&&this._matrix[Xt.BOUNDARY][Xt.EXTERIOR]===it.FALSE}set(){if(1===arguments.length){let i=arguments[0];for(var e=0;e<i.length;e++){var t=pe(e/3),n=e%3;this._matrix[t][n]=it.toDimensionValue(i.charAt(e))}}else if(3===arguments.length){let e=arguments[0],t=arguments[1],n=arguments[2];this._matrix[e][t]=n}}isContains(){return kt.isTrue(this._matrix[Xt.INTERIOR][Xt.INTERIOR])&&this._matrix[Xt.EXTERIOR][Xt.INTERIOR]===it.FALSE&&this._matrix[Xt.EXTERIOR][Xt.BOUNDARY]===it.FALSE}setAtLeast(){if(1===arguments.length){let i=arguments[0];for(var e=0;e<i.length;e++){var t=pe(e/3),n=e%3;this.setAtLeast(t,n,it.toDimensionValue(i.charAt(e)))}}else if(3===arguments.length){let e=arguments[0],t=arguments[1],n=arguments[2];this._matrix[e][t]<n&&(this._matrix[e][t]=n)}}setAtLeastIfValid(e,t,n){0<=e&&0<=t&&this.setAtLeast(e,t,n)}isWithin(){return kt.isTrue(this._matrix[Xt.INTERIOR][Xt.INTERIOR])&&this._matrix[Xt.INTERIOR][Xt.EXTERIOR]===it.FALSE&&this._matrix[Xt.BOUNDARY][Xt.EXTERIOR]===it.FALSE}isTouches(e,t){return e>t?this.isTouches(t,e):(e===it.A&&t===it.A||e===it.L&&t===it.L||e===it.L&&t===it.A||e===it.P&&t===it.A||e===it.P&&t===it.L)&&this._matrix[Xt.INTERIOR][Xt.INTERIOR]===it.FALSE&&(kt.isTrue(this._matrix[Xt.INTERIOR][Xt.BOUNDARY])||kt.isTrue(this._matrix[Xt.BOUNDARY][Xt.INTERIOR])||kt.isTrue(this._matrix[Xt.BOUNDARY][Xt.BOUNDARY]))}isOverlaps(e,t){return e===it.P&&t===it.P||e===it.A&&t===it.A?kt.isTrue(this._matrix[Xt.INTERIOR][Xt.INTERIOR])&&kt.isTrue(this._matrix[Xt.INTERIOR][Xt.EXTERIOR])&&kt.isTrue(this._matrix[Xt.EXTERIOR][Xt.INTERIOR]):e===it.L&&t===it.L&&1===this._matrix[Xt.INTERIOR][Xt.INTERIOR]&&kt.isTrue(this._matrix[Xt.INTERIOR][Xt.EXTERIOR])&&kt.isTrue(this._matrix[Xt.EXTERIOR][Xt.INTERIOR])}isEquals(e,t){return e===t&&kt.isTrue(this._matrix[Xt.INTERIOR][Xt.INTERIOR])&&this._matrix[Xt.INTERIOR][Xt.EXTERIOR]===it.FALSE&&this._matrix[Xt.BOUNDARY][Xt.EXTERIOR]===it.FALSE&&this._matrix[Xt.EXTERIOR][Xt.INTERIOR]===it.FALSE&&this._matrix[Xt.EXTERIOR][Xt.BOUNDARY]===it.FALSE}toString(){for(var e=new V("123456789"),t=0;3>t;t++)for(var n=0;3>n;n++)e.setCharAt(3*t+n,it.toDimensionSymbol(this._matrix[t][n]));return e.toString()}setAll(e){for(var t=0;3>t;t++)for(var n=0;3>n;n++)this._matrix[t][n]=e}get(e,t){return this._matrix[e][t]}transpose(){var e=this._matrix[1][0];return this._matrix[1][0]=this._matrix[0][1],this._matrix[0][1]=e,e=this._matrix[2][0],this._matrix[2][0]=this._matrix[0][2],this._matrix[0][2]=e,e=this._matrix[2][1],this._matrix[2][1]=this._matrix[1][2],this._matrix[1][2]=e,this}matches(e){if(9!==e.length)throw new t("Should be length 9: "+e);for(var n=0;3>n;n++)for(var i=0;3>i;i++)if(!kt.matches(this._matrix[n][i],e.charAt(3*n+i)))return!1;return!0}add(e){for(var t=0;3>t;t++)for(var n=0;3>n;n++)this.setAtLeast(t,n,e.get(t,n))}isDisjoint(){return this._matrix[Xt.INTERIOR][Xt.INTERIOR]===it.FALSE&&this._matrix[Xt.INTERIOR][Xt.BOUNDARY]===it.FALSE&&this._matrix[Xt.BOUNDARY][Xt.INTERIOR]===it.FALSE&&this._matrix[Xt.BOUNDARY][Xt.BOUNDARY]===it.FALSE}isCrosses(e,t){return e===it.P&&t===it.L||e===it.P&&t===it.A||e===it.L&&t===it.A?kt.isTrue(this._matrix[Xt.INTERIOR][Xt.INTERIOR])&&kt.isTrue(this._matrix[Xt.INTERIOR][Xt.EXTERIOR]):e===it.L&&t===it.P||e===it.A&&t===it.P||e===it.A&&t===it.L?kt.isTrue(this._matrix[Xt.INTERIOR][Xt.INTERIOR])&&kt.isTrue(this._matrix[Xt.EXTERIOR][Xt.INTERIOR]):e===it.L&&t===it.L&&0===this._matrix[Xt.INTERIOR][Xt.INTERIOR]}getClass(){return kt}get interfaces_(){return[d]}}kt.constructor_=function(){if(this._matrix=null,0===arguments.length)this._matrix=[,,,].fill().map(()=>[,,,]),this.setAll(it.FALSE);else if(1===arguments.length)if("string"==typeof arguments[0]){let e=arguments[0];kt.constructor_.call(this),this.set(e)}else if(arguments[0]instanceof kt){let e=arguments[0];kt.constructor_.call(this),this._matrix[Xt.INTERIOR][Xt.INTERIOR]=e._matrix[Xt.INTERIOR][Xt.INTERIOR],this._matrix[Xt.INTERIOR][Xt.BOUNDARY]=e._matrix[Xt.INTERIOR][Xt.BOUNDARY],this._matrix[Xt.INTERIOR][Xt.EXTERIOR]=e._matrix[Xt.INTERIOR][Xt.EXTERIOR],this._matrix[Xt.BOUNDARY][Xt.INTERIOR]=e._matrix[Xt.BOUNDARY][Xt.INTERIOR],this._matrix[Xt.BOUNDARY][Xt.BOUNDARY]=e._matrix[Xt.BOUNDARY][Xt.BOUNDARY],this._matrix[Xt.BOUNDARY][Xt.EXTERIOR]=e._matrix[Xt.BOUNDARY][Xt.EXTERIOR],this._matrix[Xt.EXTERIOR][Xt.INTERIOR]=e._matrix[Xt.EXTERIOR][Xt.INTERIOR],this._matrix[Xt.EXTERIOR][Xt.BOUNDARY]=e._matrix[Xt.EXTERIOR][Xt.BOUNDARY],this._matrix[Xt.EXTERIOR][Xt.EXTERIOR]=e._matrix[Xt.EXTERIOR][Xt.EXTERIOR]}};class Ht{constructor(){Ht.constructor_.apply(this,arguments)}static toDegrees(e){return 180*e/de}static normalize(e){for(;e>de;)e-=Ht.PI_TIMES_2;for(;e<=-de;)e+=Ht.PI_TIMES_2;return e}static angle(){if(1===arguments.length){let e=arguments[0];return se(e.y,e.x)}if(2===arguments.length){let n=arguments[0],i=arguments[1];var e=i.x-n.x,t=i.y-n.y;return se(t,e)}}static isAcute(e,t,n){var i=e.x-t.x,o=e.y-t.y,r=n.x-t.x,d=n.y-t.y;return 0<i*r+o*d}static isObtuse(e,t,n){var i=e.x-t.x,o=e.y-t.y,r=n.x-t.x,d=n.y-t.y;return 0>i*r+o*d}static interiorAngle(e,t,n){var i=Ht.angle(t,e),o=Ht.angle(t,n);return Ne(o-i)}static normalizePositive(e){if(0>e){for(;0>e;)e+=Ht.PI_TIMES_2;e>=Ht.PI_TIMES_2&&(e=0)}else{for(;e>=Ht.PI_TIMES_2;)e-=Ht.PI_TIMES_2;0>e&&(e=0)}return e}static angleBetween(e,t,n){var i=Ht.angle(t,e),o=Ht.angle(t,n);return Ht.diff(i,o)}static diff(e,t){var n=null;return n=e<t?t-e:e-t,n>de&&(n=2*de-n),n}static toRadians(e){return e*de/180}static getTurn(e,t){var n=re(t-e);return 0<n?Ht.COUNTERCLOCKWISE:0>n?Ht.CLOCKWISE:Ht.NONE}static angleBetweenOriented(e,t,n){var i=Ht.angle(t,e),o=Ht.angle(t,n),r=o-i;return r<=-de?r+Ht.PI_TIMES_2:r>de?r-Ht.PI_TIMES_2:r}getClass(){return Ht}get interfaces_(){return[]}}Ht.constructor_=function(){},Ht.PI_TIMES_2=2*de,Ht.PI_OVER_2=de/2,Ht.PI_OVER_4=de/4,Ht.COUNTERCLOCKWISE=Me.COUNTERCLOCKWISE,Ht.CLOCKWISE=Me.CLOCKWISE,Ht.NONE=Me.COLLINEAR;class wt{constructor(){wt.constructor_.apply(this,arguments)}static area(e,t,n){return Ne(((n.x-e.x)*(t.y-e.y)-(t.x-e.x)*(n.y-e.y))/2)}static signedArea(e,t,n){return((n.x-e.x)*(t.y-e.y)-(t.x-e.x)*(n.y-e.y))/2}static det(e,t,n,i){return e*i-t*n}static interpolateZ(e,t,n,i){var o=t.x,r=t.y,s=n.x-o,a=i.x-o,_=n.y-r,l=i.y-r,d=s*l-a*_,g=e.x-o,c=e.y-r,u=t.z+(l*g-a*c)/d*(n.z-t.z)+(-_*g+s*c)/d*(i.z-t.z);return u}static longestSideLength(e,t,n){var i=e.distance(t),o=t.distance(n),r=n.distance(e),d=i;return o>d&&(d=o),r>d&&(d=r),d}static isAcute(e,t,n){return!!Ht.isAcute(e,t,n)&&!!Ht.isAcute(t,n,e)&&!!Ht.isAcute(n,e,t)}static circumcentre(e,t,n){var i=n.x,o=n.y,r=e.x-i,d=e.y-o,s=t.x-i,a=t.y-o,_=2*wt.det(r,d,s,a),l=wt.det(d,r*r+d*d,a,s*s+a*a),g=wt.det(r,r*r+d*d,s,s*s+a*a);return new Re(i-l/_,o+g/_)}static perpendicularBisector(e,t){var n=t.x-e.x,i=t.y-e.y,o=new Ge(e.x+n/2,e.y+i/2,1),r=new Ge(e.x-i+n/2,e.y+n+i/2,1);return new Ge(o,r)}static angleBisector(e,t,n){var i=t.distance(e),o=t.distance(n),r=i/(i+o),d=n.x-e.x,s=n.y-e.y,a=new Re(e.x+r*d,e.y+r*s);return a}static area3D(e,t,n){var i=t.x-e.x,o=t.y-e.y,r=t.z-e.z,d=n.x-e.x,s=n.y-e.y,a=n.z-e.z,_=o*a-r*s,l=r*d-i*a,g=i*s-o*d,c=_e(_*_+l*l+g*g)/2;return c}static centroid(e,t,n){var i=(e.x+t.x+n.x)/3,o=(e.y+t.y+n.y)/3;return new Re(i,o)}static inCentre(e,t,n){var i=t.distance(n),o=e.distance(n),r=e.distance(t),d=i+o+r,s=(i*e.x+o*t.x+r*n.x)/d,a=(i*e.y+o*t.y+r*n.y)/d;return new Re(s,a)}area(){return wt.area(this.p0,this.p1,this.p2)}signedArea(){return wt.signedArea(this.p0,this.p1,this.p2)}interpolateZ(e){if(null===e)throw new t("Supplied point is null.");return wt.interpolateZ(e,this.p0,this.p1,this.p2)}longestSideLength(){return wt.longestSideLength(this.p0,this.p1,this.p2)}isAcute(){return wt.isAcute(this.p0,this.p1,this.p2)}circumcentre(){return wt.circumcentre(this.p0,this.p1,this.p2)}area3D(){return wt.area3D(this.p0,this.p1,this.p2)}centroid(){return wt.centroid(this.p0,this.p1,this.p2)}inCentre(){return wt.inCentre(this.p0,this.p1,this.p2)}getClass(){return wt}get interfaces_(){return[]}}wt.constructor_=function(){this.p0=null,this.p1=null,this.p2=null;let e=arguments[0],t=arguments[1],n=arguments[2];this.p0=e,this.p1=t,this.p2=n};class Wt extends x{constructor(){super(),Wt.constructor_.apply(this,arguments)}getClass(){return Wt}get interfaces_(){return[]}}Wt.constructor_=function(){if(0===arguments.length)x.constructor_.call(this);else if(1===arguments.length){let e=arguments[0];x.constructor_.call(this,e)}};class jt{constructor(){jt.constructor_.apply(this,arguments)}static translationInstance(e,t){var n=new jt;return n.setToTranslation(e,t),n}static shearInstance(e,t){var n=new jt;return n.setToShear(e,t),n}static reflectionInstance(){if(2===arguments.length){let t=arguments[0],n=arguments[1];var e=new jt;return e.setToReflection(t,n),e}if(4===arguments.length){let t=arguments[0],n=arguments[1],i=arguments[2],o=arguments[3];var e=new jt;return e.setToReflection(t,n,i,o),e}}static rotationInstance(){if(1===arguments.length){let e=arguments[0];return jt.rotationInstance(re(e),oe(e))}if(2===arguments.length){let t=arguments[0],n=arguments[1];var e=new jt;return e.setToRotation(t,n),e}if(3===arguments.length){let e=arguments[0],t=arguments[1],n=arguments[2];return jt.rotationInstance(re(e),oe(e),t,n)}if(4===arguments.length){let t=arguments[0],n=arguments[1],i=arguments[2],o=arguments[3];var e=new jt;return e.setToRotation(t,n,i,o),e}}static scaleInstance(){if(2===arguments.length){let t=arguments[0],n=arguments[1];var e=new jt;return e.setToScale(t,n),e}if(4===arguments.length){let t=arguments[0],n=arguments[1],i=arguments[2],o=arguments[3];var e=new jt;return e.translate(-i,-o),e.scale(t,n),e.translate(i,o),e}}setToReflectionBasic(e,n,i,o){if(e===i&&n===o)throw new t("Reflection line points must be distinct");var r=i-e,s=o-n,a=_e(r*r+s*s),d=s/a,_=r/a,l=2*d*_,g=_*_-d*d;return this._m00=g,this._m01=l,this._m02=0,this._m10=l,this._m11=-g,this._m12=0,this}getInverse(){var e=this.getDeterminant();if(0===e)throw new Wt("Transformation is non-invertible");var t=this._m11/e,n=-this._m10/e,i=-this._m01/e,o=this._m00/e,r=(this._m01*this._m12-this._m02*this._m11)/e,d=(-this._m00*this._m12+this._m10*this._m02)/e;return new jt(t,i,r,n,o,d)}compose(e){var t=e._m00*this._m00+e._m01*this._m10,n=e._m00*this._m01+e._m01*this._m11,i=e._m00*this._m02+e._m01*this._m12+e._m02,o=e._m10*this._m00+e._m11*this._m10,r=e._m10*this._m01+e._m11*this._m11,d=e._m10*this._m02+e._m11*this._m12+e._m12;return this._m00=t,this._m01=n,this._m02=i,this._m10=o,this._m11=r,this._m12=d,this}equals(e){if(null===e)return!1;if(!(e instanceof jt))return!1;var t=e;return this._m00===t._m00&&this._m01===t._m01&&this._m02===t._m02&&this._m10===t._m10&&this._m11===t._m11&&this._m12===t._m12}setToScale(e,t){return this._m00=e,this._m01=0,this._m02=0,this._m10=0,this._m11=t,this._m12=0,this}isIdentity(){return 1===this._m00&&0===this._m01&&0===this._m02&&0===this._m10&&1===this._m11&&0===this._m12}scale(e,t){return this.compose(jt.scaleInstance(e,t)),this}setToIdentity(){return this._m00=1,this._m01=0,this._m02=0,this._m10=0,this._m11=1,this._m12=0,this}isGeometryChanged(){return!0}setTransformation(){if(1===arguments.length){let e=arguments[0];return this._m00=e._m00,this._m01=e._m01,this._m02=e._m02,this._m10=e._m10,this._m11=e._m11,this._m12=e._m12,this}if(6===arguments.length){let e=arguments[0],t=arguments[1],n=arguments[2],i=arguments[3],o=arguments[4],r=arguments[5];return this._m00=e,this._m01=t,this._m02=n,this._m10=i,this._m11=o,this._m12=r,this}}setToRotation(){if(1===arguments.length){let e=arguments[0];return this.setToRotation(re(e),oe(e)),this}if(2===arguments.length){let e=arguments[0],t=arguments[1];return this._m00=t,this._m01=-e,this._m02=0,this._m10=e,this._m11=t,this._m12=0,this}if(3===arguments.length){let e=arguments[0],t=arguments[1],n=arguments[2];return this.setToRotation(re(e),oe(e),t,n),this}if(4===arguments.length){let e=arguments[0],t=arguments[1],n=arguments[2],i=arguments[3];return this._m00=t,this._m01=-e,this._m02=n-n*t+i*e,this._m10=e,this._m11=t,this._m12=i-n*e-i*t,this}}getMatrixEntries(){return[this._m00,this._m01,this._m02,this._m10,this._m11,this._m12]}filter(e,t){this.transform(e,t)}rotate(){if(1===arguments.length){let e=arguments[0];return this.compose(jt.rotationInstance(e)),this}if(2===arguments.length){let e=arguments[0],t=arguments[1];return this.compose(jt.rotationInstance(e,t)),this}if(3===arguments.length){let e=arguments[0],t=arguments[1],n=arguments[2];return this.compose(jt.rotationInstance(e,t,n)),this}if(4===arguments.length){let e=arguments[0],t=arguments[1];return this.compose(jt.rotationInstance(e,t)),this}}getDeterminant(){return this._m00*this._m11-this._m01*this._m10}composeBefore(e){var t=this._m00*e._m00+this._m01*e._m10,n=this._m00*e._m01+this._m01*e._m11,i=this._m00*e._m02+this._m01*e._m12+this._m02,o=this._m10*e._m00+this._m11*e._m10,r=this._m10*e._m01+this._m11*e._m11,d=this._m10*e._m02+this._m11*e._m12+this._m12;return this._m00=t,this._m01=n,this._m02=i,this._m10=o,this._m11=r,this._m12=d,this}setToShear(e,t){return this._m00=1,this._m01=e,this._m02=0,this._m10=t,this._m11=1,this._m12=0,this}isDone(){return!1}clone(){try{return null}catch(e){if(e instanceof x)Te.shouldNeverReachHere();else throw e}finally{}return null}translate(e,t){return this.compose(jt.translationInstance(e,t)),this}setToReflection(){if(2===arguments.length){let o=arguments[0],r=arguments[1];if(0===o&&0===r)throw new t("Reflection vector must be non-zero");if(o===r)return this._m00=0,this._m01=1,this._m02=0,this._m10=1,this._m11=0,this._m12=0,this;var e=_e(o*o+r*r),n=r/e,i=o/e;return this.rotate(-n,i),this.scale(1,-1),this.rotate(n,i),this}if(4===arguments.length){let d=arguments[0],s=arguments[1],a=arguments[2],_=arguments[3];if(d===a&&s===_)throw new t("Reflection line points must be distinct");this.setToTranslation(-d,-s);var o=a-d,r=_-s,e=_e(o*o+r*r),n=r/e,i=o/e;return this.rotate(-n,i),this.scale(1,-1),this.rotate(n,i),this.translate(d,s),this}}toString(){return"AffineTransformation[["+this._m00+", "+this._m01+", "+this._m02+"], ["+this._m10+", "+this._m11+", "+this._m12+"]]"}setToTranslation(e,t){return this._m00=1,this._m01=0,this._m02=e,this._m10=0,this._m11=1,this._m12=t,this}shear(e,t){return this.compose(jt.shearInstance(e,t)),this}transform(){if(1===arguments.length){let t=arguments[0];var e=t.copy();return e.apply(this),e}if(2===arguments.length){if(arguments[0]instanceof Re&&arguments[1]instanceof Re){let e=arguments[0],i=arguments[1];var t=this._m00*e.x+this._m01*e.y+this._m02,n=this._m10*e.x+this._m11*e.y+this._m12;return i.x=t,i.y=n,i}if(l(arguments[0],qe)&&xe(arguments[1])){let e=arguments[0],o=arguments[1];var t=this._m00*e.getOrdinate(o,0)+this._m01*e.getOrdinate(o,1)+this._m02,n=this._m10*e.getOrdinate(o,0)+this._m11*e.getOrdinate(o,1)+this._m12;e.setOrdinate(o,0,t),e.setOrdinate(o,1,n)}}}reflect(){if(2===arguments.length){let e=arguments[0],t=arguments[1];return this.compose(jt.reflectionInstance(e,t)),this}if(4===arguments.length){let e=arguments[0],t=arguments[1],n=arguments[2],i=arguments[3];return this.compose(jt.reflectionInstance(e,t,n,i)),this}}getClass(){return jt}get interfaces_(){return[d,rt]}}jt.constructor_=function(){if(this._m00=null,this._m01=null,this._m02=null,this._m10=null,this._m11=null,this._m12=null,0===arguments.length)this.setToIdentity();else if(1===arguments.length){if(arguments[0]instanceof Array){let e=arguments[0];this._m00=e[0],this._m01=e[1],this._m02=e[2],this._m10=e[3],this._m11=e[4],this._m12=e[5]}else if(arguments[0]instanceof jt){let e=arguments[0];this.setTransformation(e)}}else if(6===arguments.length&&"number"==typeof arguments[5]&&"number"==typeof arguments[4]&&"number"==typeof arguments[3]&&"number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){let e=arguments[0],t=arguments[1],n=arguments[2],i=arguments[3],o=arguments[4],r=arguments[5];this.setTransformation(e,t,n,i,o,r)}};class Kt{constructor(){Kt.constructor_.apply(this,arguments)}static create(){if(1===arguments.length){if(arguments[0]instanceof Kt){let e=arguments[0];return new Kt(e)}if(arguments[0]instanceof Re){let e=arguments[0];return new Kt(e)}}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){let e=arguments[0],t=arguments[1];return new Kt(e,t)}if(arguments[0]instanceof Re&&arguments[1]instanceof Re){let e=arguments[0],t=arguments[1];return new Kt(e,t)}}}dot(e){return this._x*e._x+this._y*e._y}isParallel(e){return 0===Fe.signOfDet2x2(this._x,this._y,e._x,e._y)}getComponent(e){return 0===e?this._x:this._y}subtract(e){return Kt.create(this._x-e._x,this._y-e._y)}equals(e){if(!(e instanceof Kt))return!1;var t=e;return this._x===t._x&&this._y===t._y}normalize(){var e=this.length();return 0<e?this.divide(e):Kt.create(0,0)}angle(){if(0===arguments.length)return se(this._y,this._x);if(1===arguments.length){let e=arguments[0];return Ht.diff(e.angle(),this.angle())}}weightedSum(e,t){return Kt.create(t*this._x+(1-t)*e._x,t*this._y+(1-t)*e._y)}divide(e){return Kt.create(this._x/e,this._y/e)}rotateByQuarterCircle(e){var t=e%4;switch(0>e&&0!==t&&(t+=4),t){case 0:return Kt.create(this._x,this._y);case 1:return Kt.create(-this._y,this._x);case 2:return Kt.create(-this._x,-this._y);case 3:return Kt.create(this._y,-this._x);}return Te.shouldNeverReachHere(),null}rotate(e){var t=oe(e),n=re(e);return Kt.create(this._x*t-this._y*n,this._x*n+this._y*t)}angleTo(e){var t=this.angle(),n=e.angle(),i=n-t;return i<=-de?i+Ht.PI_TIMES_2:i>de?i-Ht.PI_TIMES_2:i}getX(){return this._x}lengthSquared(){return this._x*this._x+this._y*this._y}negate(){return Kt.create(-this._x,-this._y)}clone(){return new Kt(this)}toCoordinate(){return new Re(this._x,this._y)}translate(e){return new Re(this._x+e.x,this._y+e.y)}multiply(e){return Kt.create(this._x*e,this._y*e)}toString(){return"["+this._x+", "+this._y+"]"}length(){return _e(this._x*this._x+this._y*this._y)}average(e){return this.weightedSum(e,.5)}getY(){return this._y}add(e){return Kt.create(this._x+e._x,this._y+e._y)}distance(e){var t=e._x-this._x,n=e._y-this._y;return _e(t*t+n*n)}hashCode(){var e=17;return e=37*e+Re.hashCode(this._x),e=37*e+Re.hashCode(this._y),e}getClass(){return Kt}get interfaces_(){return[]}}Kt.constructor_=function(){if(this._x=null,this._y=null,0===arguments.length)Kt.constructor_.call(this,0,0);else if(1===arguments.length){if(arguments[0]instanceof Kt){let e=arguments[0];this._x=e._x,this._y=e._y}else if(arguments[0]instanceof Re){let e=arguments[0];this._x=e.x,this._y=e.y}}else if(2===arguments.length)if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){let e=arguments[0],t=arguments[1];this._x=e,this._y=t}else if(arguments[0]instanceof Re&&arguments[1]instanceof Re){let e=arguments[0],t=arguments[1];this._x=t.x-e.x,this._y=t.y-e.y}};var Zt=/*#__PURE__*/Object.freeze({Coordinate:Re,CoordinateList:ve,Envelope:be,LineSegment:Ut,GeometryFactory:Ft,Geometry:Ue,Point:mt,LineString:ut,LinearRing:Et,Polygon:xt,GeometryCollection:dt,MultiPoint:ht,MultiLineString:st,MultiPolygon:It,Dimension:it,IntersectionMatrix:kt,PrecisionModel:Dt,Location:Xt,Triangle:wt,AffineTransformation:jt,Vector2D:Kt});class Qt{constructor(){Qt.constructor_.apply(this,arguments)}getCoordinates(){return this._pt}getCoordinate(e){return this._pt[e]}setMinimum(){if(1===arguments.length){let e=arguments[0];this.setMinimum(e._pt[0],e._pt[1])}else if(2===arguments.length){let t=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(t,n),null;var e=t.distance(n);e<this._distance&&this.initialize(t,n,e)}}initialize(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){let e=arguments[0],t=arguments[1];this._pt[0].setCoordinate(e),this._pt[1].setCoordinate(t),this._distance=e.distance(t),this._isNull=!1}else if(3===arguments.length){let e=arguments[0],t=arguments[1],n=arguments[2];this._pt[0].setCoordinate(e),this._pt[1].setCoordinate(t),this._distance=n,this._isNull=!1}}toString(){return qt.toLineString(this._pt[0],this._pt[1])}getDistance(){return this._distance}setMaximum(){if(1===arguments.length){let e=arguments[0];this.setMaximum(e._pt[0],e._pt[1])}else if(2===arguments.length){let t=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(t,n),null;var e=t.distance(n);e>this._distance&&this.initialize(t,n,e)}}getClass(){return Qt}get interfaces_(){return[]}}Qt.constructor_=function(){this._pt=[new Re,new Re],this._distance=o.NaN,this._isNull=!0};class Jt{constructor(){Jt.constructor_.apply(this,arguments)}static computeDistance(){if(arguments[2]instanceof Qt&&arguments[0]instanceof ut&&arguments[1]instanceof Re){let i=arguments[0],r=arguments[1],d=arguments[2];for(var e=new Ut,t=i.getCoordinates(),n=0;n<t.length-1;n++){e.setCoordinates(t[n],t[n+1]);var o=e.closestPoint(r);d.setMinimum(o,r)}}else if(arguments[2]instanceof Qt&&arguments[0]instanceof xt&&arguments[1]instanceof Re){let e=arguments[0],t=arguments[1],i=arguments[2];Jt.computeDistance(e.getExteriorRing(),t,i);for(var n=0;n<e.getNumInteriorRing();n++)Jt.computeDistance(e.getInteriorRingN(n),t,i)}else if(arguments[2]instanceof Qt&&arguments[0]instanceof Ue&&arguments[1]instanceof Re){let e=arguments[0],t=arguments[1],i=arguments[2];if(e instanceof ut)Jt.computeDistance(e,t,i);else if(e instanceof xt)Jt.computeDistance(e,t,i);else if(e instanceof dt)for(var r=e,n=0,d;n<r.getNumGeometries();n++)d=r.getGeometryN(n),Jt.computeDistance(d,t,i);else i.setMinimum(e.getCoordinate(),t)}else if(arguments[2]instanceof Qt&&arguments[0]instanceof Ut&&arguments[1]instanceof Re){let e=arguments[0],t=arguments[1],n=arguments[2];var o=e.closestPoint(t);n.setMinimum(o,t)}}getClass(){return Jt}get interfaces_(){return[]}}Jt.constructor_=function(){};class $t{constructor(){$t.constructor_.apply(this,arguments)}static distance(){if(2===arguments.length){let t=arguments[0],n=arguments[1];var e=new $t(t,n);return e.distance()}if(3===arguments.length){let t=arguments[0],n=arguments[1],i=arguments[2];var e=new $t(t,n);return e.setDensifyFraction(i),e.distance()}}getCoordinates(){return this._ptDist.getCoordinates()}setDensifyFraction(e){if(1<e||0>=e)throw new t("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=e}compute(e,t){this.computeOrientedDistance(e,t,this._ptDist),this.computeOrientedDistance(t,e,this._ptDist)}distance(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()}computeOrientedDistance(e,t,n){var i=new en(t);if(e.apply(i),n.setMaximum(i.getMaxPointDistance()),0<this._densifyFrac){var o=new tn(t,this._densifyFrac);e.apply(o),n.setMaximum(o.getMaxPointDistance())}}orientedDistance(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()}getClass(){return $t}get interfaces_(){return[]}}class en{constructor(){en.constructor_.apply(this,arguments)}filter(e){this._minPtDist.initialize(),Jt.computeDistance(this._geom,e,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}getMaxPointDistance(){return this._maxPtDist}getClass(){return en}get interfaces_(){return[Xe]}}en.constructor_=function(){this._maxPtDist=new Qt,this._minPtDist=new Qt,this._euclideanDist=new Jt,this._geom=null;let e=arguments[0];this._geom=e};class tn{constructor(){tn.constructor_.apply(this,arguments)}filter(e,t){if(0===t)return null;for(var n=e.getCoordinate(t-1),o=e.getCoordinate(t),r=(o.x-n.x)/this._numSubSegs,d=(o.y-n.y)/this._numSubSegs,s=0;s<this._numSubSegs;s++){var a=n.x+s*r,_=n.y+s*d,l=new Re(a,_);this._minPtDist.initialize(),Jt.computeDistance(this._geom,l,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}}isDone(){return!1}isGeometryChanged(){return!1}getMaxPointDistance(){return this._maxPtDist}getClass(){return tn}get interfaces_(){return[rt]}}tn.constructor_=function(){this._maxPtDist=new Qt,this._minPtDist=new Qt,this._geom=null,this._numSubSegs=0;let e=arguments[0],t=arguments[1];this._geom=e,this._numSubSegs=pe(ae(1/t))},$t.MaxPointDistanceFilter=en,$t.MaxDensifiedByFractionDistanceFilter=tn,$t.constructor_=function(){this._g0=null,this._g1=null,this._ptDist=new Qt,this._densifyFrac=0;let e=arguments[0],t=arguments[1];this._g0=e,this._g1=t};var nn=/*#__PURE__*/Object.freeze({DiscreteHausdorffDistance:$t,DistanceToPoint:Jt,PointPairDistance:Qt});class on{constructor(){on.constructor_.apply(this,arguments)}visitItem(){}getClass(){return on}get interfaces_(){return[]}}on.constructor_=function(){};class rn{constructor(){rn.constructor_.apply(this,arguments)}locate(){}getClass(){return rn}get interfaces_(){return[]}}rn.constructor_=function(){};class dn{constructor(){dn.constructor_.apply(this,arguments)}getMin(){return this._min}intersects(e,t){return!(this._min>t||this._max<e)}getMax(){return this._max}toString(){return qt.toLineString(new Re(this._min,0),new Re(this._max,0))}getClass(){return dn}get interfaces_(){return[]}}class sn{constructor(){sn.constructor_.apply(this,arguments)}compare(e,t){var n=e,i=t,o=(n._min+n._max)/2,r=(i._min+i._max)/2;return o<r?-1:o>r?1:0}getClass(){return sn}get interfaces_(){return[s]}}sn.constructor_=function(){},dn.NodeComparator=sn,dn.constructor_=function(){this._min=o.POSITIVE_INFINITY,this._max=o.NEGATIVE_INFINITY};class an extends dn{constructor(){super(),an.constructor_.apply(this,arguments)}query(e,t,n){return this.intersects(e,t)?void n.visitItem(this._item):null}getClass(){return an}get interfaces_(){return[]}}an.constructor_=function(){this._item=null;let e=arguments[0],t=arguments[1],n=arguments[2];this._min=e,this._max=t,this._item=n};const _n={reverseOrder:function(){return{compare(e,t){return t.compareTo(e)}}},min:function(e){return _n.sort(e),e.get(0)},sort:function(e,t){const n=e.toArray();t?M.sort(n,t):M.sort(n);const o=e.iterator();for(let i=0,r=n.length;i<r;i++)o.next(),o.set(n[i])},singletonList:function(e){const t=new f;return t.add(e),t}};class ln extends dn{constructor(){super(),ln.constructor_.apply(this,arguments)}buildExtent(e,t){this._min=Ie(e._min,t._min),this._max=Ee(e._max,t._max)}query(e,t,n){return this.intersects(e,t)?void(null!==this._node1&&this._node1.query(e,t,n),null!==this._node2&&this._node2.query(e,t,n)):null}getClass(){return ln}get interfaces_(){return[]}}ln.constructor_=function(){this._node1=null,this._node2=null;let e=arguments[0],t=arguments[1];this._node1=e,this._node2=t,this.buildExtent(this._node1,this._node2)};class gn{constructor(){gn.constructor_.apply(this,arguments)}buildTree(){_n.sort(this._leaves,new dn.NodeComparator);for(var e=this._leaves,t=null,n=new f;;){if(this.buildLevel(e,n),1===n.size())return n.get(0);t=e,e=n,n=t}}insert(e,t,n){if(null!==this._root)throw new IllegalStateException("Index cannot be added to once it has been queried");this._leaves.add(new an(e,t,n))}query(e,t,n){this.init(),this._root.query(e,t,n)}buildRoot(){return null===this._root?void(this._root=this.buildTree()):null}printNode(e){N.out.println(qt.toLineString(new Re(e._min,this._level),new Re(e._max,this._level)))}init(){return null===this._root?void this.buildRoot():null}buildLevel(e,t){this._level++,t.clear();for(var n=0;n<e.size();n+=2){var o=e.get(n),r=n+1<e.size()?e.get(n):null;if(null===r)t.add(o);else{var d=new ln(e.get(n),e.get(n+1));t.add(d)}}}getClass(){return gn}get interfaces_(){return[]}}gn.constructor_=function(){this._leaves=new f,this._root=null,this._level=0};class cn{constructor(){cn.constructor_.apply(this,arguments)}static getGeometry(){if(1===arguments.length){let e=arguments[0];return e.getFactory().buildGeometry(cn.getLines(e))}if(2===arguments.length){let e=arguments[0],t=arguments[1];return e.getFactory().buildGeometry(cn.getLines(e,t))}}static getLines(){if(1===arguments.length){let e=arguments[0];return cn.getLines(e,!1)}if(2===arguments.length){if(l(arguments[0],c)&&l(arguments[1],c)){let n=arguments[0],i=arguments[1];for(var e=n.iterator(),t;e.hasNext();)t=e.next(),cn.getLines(t,i);return i}if(arguments[0]instanceof Ue&&"boolean"==typeof arguments[1]){let e=arguments[0],t=arguments[1];var n=new f;return e.apply(new cn(n,t)),n}if(arguments[0]instanceof Ue&&l(arguments[1],c)){let e=arguments[0],t=arguments[1];return e instanceof ut?t.add(e):e.apply(new cn(t)),t}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&l(arguments[0],c)&&l(arguments[1],c)){let n=arguments[0],i=arguments[1],o=arguments[2];for(var e=n.iterator(),t;e.hasNext();)t=e.next(),cn.getLines(t,i,o);return i}if("boolean"==typeof arguments[2]&&arguments[0]instanceof Ue&&l(arguments[1],c)){let e=arguments[0],t=arguments[1],n=arguments[2];return e.apply(new cn(t,n)),t}}}filter(e){if(this._isForcedToLineString&&e instanceof Et){var t=e.getFactory().createLineString(e.getCoordinateSequence());return this._lines.add(t),null}e instanceof ut&&this._lines.add(e)}setForceToLineString(e){this._isForcedToLineString=e}getClass(){return cn}get interfaces_(){return[Ve]}}cn.constructor_=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){let e=arguments[0];this._lines=e}else if(2===arguments.length){let e=arguments[0],t=arguments[1];this._lines=e,this._isForcedToLineString=t}};class un{constructor(){un.constructor_.apply(this,arguments)}visitItem(e){this._items.add(e)}getItems(){return this._items}getClass(){return un}get interfaces_(){return[on]}}un.constructor_=function(){this._items=new f};class pn{constructor(){pn.constructor_.apply(this,arguments)}static locatePointInRing(){if(arguments[0]instanceof Re&&l(arguments[1],qe)){let i=arguments[0],r=arguments[1];for(var e=new pn(i),t=new Re,n=new Re,o=1;o<r.size();o++)if(r.getCoordinate(o,t),r.getCoordinate(o-1,n),e.countSegment(t,n),e.isOnSegment())return e.getLocation();return e.getLocation()}if(arguments[0]instanceof Re&&arguments[1]instanceof Array){let i=arguments[0],r=arguments[1];for(var e=new pn(i),o=1;o<r.length;o++){var t=r[o],n=r[o-1];if(e.countSegment(t,n),e.isOnSegment())return e.getLocation()}return e.getLocation()}}countSegment(e,t){if(e.x<this._p.x&&t.x<this._p.x)return null;if(this._p.x===t.x&&this._p.y===t.y)return this._isPointOnSegment=!0,null;if(e.y===this._p.y&&t.y===this._p.y){var n=e.x,i=t.x;return n>i&&(n=t.x,i=e.x),this._p.x>=n&&this._p.x<=i&&(this._isPointOnSegment=!0),null}if(e.y>this._p.y&&t.y<=this._p.y||t.y>this._p.y&&e.y<=this._p.y){var o=Me.index(e,t,this._p);if(o===Me.COLLINEAR)return this._isPointOnSegment=!0,null;t.y<e.y&&(o=-o),o===Me.LEFT&&this._crossingCount++}}isPointInPolygon(){return this.getLocation()!==Xt.EXTERIOR}getLocation(){return this._isPointOnSegment?Xt.BOUNDARY:1==this._crossingCount%2?Xt.INTERIOR:Xt.EXTERIOR}isOnSegment(){return this._isPointOnSegment}getClass(){return pn}get interfaces_(){return[]}}pn.constructor_=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;let e=arguments[0];this._p=e};class mn{constructor(){mn.constructor_.apply(this,arguments)}locate(e){var t=new pn(e),n=new yn(t);return this._index.query(e.y,e.y,n),t.getLocation()}getClass(){return mn}get interfaces_(){return[rn]}}class yn{constructor(){yn.constructor_.apply(this,arguments)}visitItem(e){var t=e;this._counter.countSegment(t.getCoordinate(0),t.getCoordinate(1))}getClass(){return yn}get interfaces_(){return[on]}}yn.constructor_=function(){this._counter=null;let e=arguments[0];this._counter=e};class fn{constructor(){fn.constructor_.apply(this,arguments)}init(e){for(var t=cn.getLines(e),n=t.iterator();n.hasNext();){var i=n.next(),o=i.getCoordinates();this.addLine(o)}}addLine(e){for(var t=1;t<e.length;t++){var n=new Ut(e[t-1],e[t]),o=Ie(n.p0.y,n.p1.y),r=Ee(n.p0.y,n.p1.y);this._index.insert(o,r,n)}}query(){if(2===arguments.length){let t=arguments[0],n=arguments[1];var e=new un;return this._index.query(t,n,e),e.getItems()}if(3===arguments.length){let e=arguments[0],t=arguments[1],n=arguments[2];this._index.query(e,t,n)}}getClass(){return fn}get interfaces_(){return[]}}fn.constructor_=function(){this._index=new gn;let e=arguments[0];this.init(e)},mn.SegmentVisitor=yn,mn.IntervalIndexedGeometry=fn,mn.constructor_=function(){this._index=null;let e=arguments[0];if(!(l(e,ft)||e instanceof Et))throw new t("Argument must be Polygonal or LinearRing");this._index=new fn(e)};class xn{constructor(){xn.constructor_.apply(this,arguments)}static isOnLine(){if(arguments[0]instanceof Re&&l(arguments[1],qe)){let i=arguments[0],d=arguments[1];for(var e=new Vt,t=new Re,o=new Re,r=d.size(),n=1;n<r;n++)if(d.getCoordinate(n-1,t),d.getCoordinate(n,o),e.computeIntersection(i,t,o),e.hasIntersection())return!0;return!1}if(arguments[0]instanceof Re&&arguments[1]instanceof Array){let i=arguments[0],r=arguments[1];for(var e=new Vt,n=1;n<r.length;n++){var t=r[n-1],o=r[n];if(e.computeIntersection(i,t,o),e.hasIntersection())return!0}return!1}}static locateInRing(e,t){return pn.locatePointInRing(e,t)}static isInRing(e,t){return xn.locateInRing(e,t)!==Xt.EXTERIOR}getClass(){return xn}get interfaces_(){return[]}}xn.constructor_=function(){};class hn{constructor(){hn.constructor_.apply(this,arguments)}static isAtomic(e){return!(e instanceof dt)}next(){if(this._atStart)return this._atStart=!1,hn.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new m;var e=this._parent.getGeometryN(this._index++);return e instanceof dt?(this._subcollectionIterator=new hn(e),this._subcollectionIterator.next()):e}remove(){throw new UnsupportedOperationException(this.getClass().getName())}hasNext(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)}getClass(){return hn}get interfaces_(){return[g]}}hn.constructor_=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;let e=arguments[0];this._parent=e,this._atStart=!0,this._index=0,this._max=e.getNumGeometries()};class En{constructor(){En.constructor_.apply(this,arguments)}static locatePointInPolygon(e,t){if(t.isEmpty())return Xt.EXTERIOR;var n=t.getExteriorRing(),o=En.locatePointInRing(e,n);if(o!==Xt.INTERIOR)return o;for(var r=0;r<t.getNumInteriorRing();r++){var d=t.getInteriorRingN(r),s=En.locatePointInRing(e,d);if(s===Xt.BOUNDARY)return Xt.BOUNDARY;if(s===Xt.INTERIOR)return Xt.EXTERIOR}return Xt.INTERIOR}static locatePointInRing(e,t){return t.getEnvelopeInternal().intersects(e)?xn.locateInRing(e,t.getCoordinates()):Xt.EXTERIOR}static containsPointInPolygon(e,t){return Xt.EXTERIOR!==En.locatePointInPolygon(e,t)}static locateInGeometry(e,t){if(t instanceof xt)return En.locatePointInPolygon(e,t);if(t instanceof dt)for(var n=new hn(t),i;n.hasNext();)if(i=n.next(),i!==t){var o=En.locateInGeometry(e,i);if(o!==Xt.EXTERIOR)return o}return Xt.EXTERIOR}static locate(e,t){return t.isEmpty()?Xt.EXTERIOR:En.locateInGeometry(e,t)}locate(e){return En.locate(e,this._geom)}getClass(){return En}get interfaces_(){return[rn]}}En.constructor_=function(){this._geom=null;let e=arguments[0];this._geom=e};var In=/*#__PURE__*/Object.freeze({IndexedPointInAreaLocator:mn,PointOnGeometryLocator:rn,SimplePointInAreaLocator:En});class Nn{constructor(){Nn.constructor_.apply(this,arguments)}measure(){}getClass(){return Nn}get interfaces_(){return[]}}Nn.constructor_=function(){};class Ln{constructor(){Ln.constructor_.apply(this,arguments)}measure(e,t){var n=e.intersection(t).getArea(),i=e.union(t).getArea();return n/i}getClass(){return Ln}get interfaces_(){return[Nn]}}Ln.constructor_=function(){};class Cn{constructor(){Cn.constructor_.apply(this,arguments)}static diagonalSize(e){if(e.isNull())return 0;var t=e.getWidth(),n=e.getHeight();return _e(t*t+n*n)}measure(e,t){var n=$t.distance(e,t,Cn.DENSIFY_FRACTION),i=new be(e.getEnvelopeInternal());i.expandToInclude(t.getEnvelopeInternal());var o=Cn.diagonalSize(i);return 1-n/o}getClass(){return Cn}get interfaces_(){return[Nn]}}Cn.constructor_=function(){},Cn.DENSIFY_FRACTION=.25;class Sn{constructor(){Sn.constructor_.apply(this,arguments)}static combine(e,t){return Ie(e,t)}getClass(){return Sn}get interfaces_(){return[]}}Sn.constructor_=function(){};var Tn=/*#__PURE__*/Object.freeze({AreaSimilarityMeasure:Ln,HausdorffSimilarityMeasure:Cn,SimilarityMeasure:Nn,SimilarityMeasureCombiner:Sn});class Rn{constructor(){Rn.constructor_.apply(this,arguments)}static area2(e,t,n){return(t.x-e.x)*(n.y-e.y)-(n.x-e.x)*(t.y-e.y)}static centroid3(e,t,n,i){return i.x=e.x+t.x+n.x,i.y=e.y+t.y+n.y,null}static getCentroid(e){var t=new Rn(e);return t.getCentroid()}setAreaBasePoint(e){this._areaBasePt=e}addPoint(e){this._ptCount+=1,this._ptCentSum.x+=e.x,this._ptCentSum.y+=e.y}addLineSegments(e){for(var t=0,n=0,o;n<e.length-1;n++)if(o=e[n].distance(e[n+1]),0!==o){t+=o;var r=(e[n].x+e[n+1].x)/2;this._lineCentSum.x+=o*r;var d=(e[n].y+e[n+1].y)/2;this._lineCentSum.y+=o*d}this._totalLength+=t,0===t&&0<e.length&&this.addPoint(e[0])}addHole(e){for(var t=Me.isCCW(e),n=0;n<e.length-1;n++)this.addTriangle(this._areaBasePt,e[n],e[n+1],t);this.addLineSegments(e)}getCentroid(){var e=new Re;if(0<Ne(this._areasum2))e.x=this._cg3.x/3/this._areasum2,e.y=this._cg3.y/3/this._areasum2;else if(0<this._totalLength)e.x=this._lineCentSum.x/this._totalLength,e.y=this._lineCentSum.y/this._totalLength;else if(0<this._ptCount)e.x=this._ptCentSum.x/this._ptCount,e.y=this._ptCentSum.y/this._ptCount;else return null;return e}addShell(e){0<e.length&&this.setAreaBasePoint(e[0]);for(var t=!Me.isCCW(e),n=0;n<e.length-1;n++)this.addTriangle(this._areaBasePt,e[n],e[n+1],t);this.addLineSegments(e)}addTriangle(e,t,n,i){var o=i?1:-1;Rn.centroid3(e,t,n,this._triangleCent3);var r=Rn.area2(e,t,n);this._cg3.x+=o*r*this._triangleCent3.x,this._cg3.y+=o*r*this._triangleCent3.y,this._areasum2+=o*r}add(){if(arguments[0]instanceof xt){let t=arguments[0];this.addShell(t.getExteriorRing().getCoordinates());for(var e=0;e<t.getNumInteriorRing();e++)this.addHole(t.getInteriorRingN(e).getCoordinates())}else if(arguments[0]instanceof Ue){let i=arguments[0];if(i.isEmpty())return null;if(i instanceof mt)this.addPoint(i.getCoordinate());else if(i instanceof ut)this.addLineSegments(i.getCoordinates());else if(i instanceof xt){var t=i;this.add(t)}else if(i instanceof dt)for(var n=i,e=0;e<n.getNumGeometries();e++)this.add(n.getGeometryN(e))}}getClass(){return Rn}get interfaces_(){return[]}}Rn.constructor_=function(){this._areaBasePt=null,this._triangleCent3=new Re,this._areasum2=0,this._cg3=new Re,this._lineCentSum=new Re,this._totalLength=0,this._ptCount=0,this._ptCentSum=new Re;let e=arguments[0];this._areaBasePt=null,this.add(e)},J.prototype=new Error,J.prototype.name="EmptyStackException",$.prototype=new p,$.prototype.add=function(t){return this.array_.push(t),!0},$.prototype.get=function(e){if(0>e||e>=this.size())throw new IndexOutOfBoundsException;return this.array_[e]},$.prototype.push=function(t){return this.array_.push(t),t},$.prototype.pop=function(){if(0===this.array_.length)throw new J;return this.array_.pop()},$.prototype.peek=function(){if(0===this.array_.length)throw new J;return this.array_[this.array_.length-1]},$.prototype.empty=function(){return 0===this.array_.length},$.prototype.isEmpty=function(){return this.empty()},$.prototype.search=function(e){return this.array_.indexOf(e)},$.prototype.size=function(){return this.array_.length},$.prototype.toArray=function(){for(var e=[],t=0,n=this.array_.length;t<n;t++)e.push(this.array_[t]);return e};class On{constructor(){On.constructor_.apply(this,arguments)}static filterCoordinates(e){for(var t=new On,n=0;n<e.length;n++)t.filter(e[n]);return t.getCoordinates()}filter(e){this.treeSet.contains(e)||(this.list.add(e),this.treeSet.add(e))}getCoordinates(){var e=Array(this.list.size()).fill(null);return this.list.toArray(e)}getClass(){return On}get interfaces_(){return[Xe]}}On.constructor_=function(){this.treeSet=new F,this.list=new f};class Pn{constructor(){Pn.constructor_.apply(this,arguments)}static extractCoordinates(e){var t=new On;return e.apply(t),t.getCoordinates()}preSort(e){for(var n=null,o=1;o<e.length;o++)(e[o].y<e[0].y||e[o].y===e[0].y&&e[o].x<e[0].x)&&(n=e[0],e[0]=e[o],e[o]=n);return M.sort(e,1,e.length,new vn(e[0])),e}computeOctRing(e){var t=this.computeOctPts(e),n=new ve;return(n.add(t,!1),3>n.size())?null:(n.closeRing(),n.toCoordinateArray())}lineOrPolygon(e){if(e=this.cleanRing(e),3===e.length)return this._geomFactory.createLineString([e[0],e[1]]);var t=this._geomFactory.createLinearRing(e);return this._geomFactory.createPolygon(t)}cleanRing(e){Te.equals(e[0],e[e.length-1]);for(var t=new f,n=null,o=0;o<=e.length-2;o++){var r=e[o],d=e[o+1];r.equals(d)||null!==n&&this.isBetween(n,r,d)||(t.add(r),n=r)}t.add(e[e.length-1]);var s=Array(t.size()).fill(null);return t.toArray(s)}isBetween(e,t,n){if(0!==Me.index(e,t,n))return!1;if(e.x!==n.x){if(e.x<=t.x&&t.x<=n.x)return!0;if(n.x<=t.x&&t.x<=e.x)return!0}if(e.y!==n.y){if(e.y<=t.y&&t.y<=n.y)return!0;if(n.y<=t.y&&t.y<=e.y)return!0}return!1}reduce(e){var t=this.computeOctRing(e);if(null===t)return e;for(var n=new F,o=0;o<t.length;o++)n.add(t[o]);for(var o=0;o<e.length;o++)xn.isInRing(e[o],t)||n.add(e[o]);var r=Ke.toCoordinateArray(n);return 3>r.length?this.padArray3(r):r}getConvexHull(){if(0===this._inputPts.length)return this._geomFactory.createGeometryCollection();if(1===this._inputPts.length)return this._geomFactory.createPoint(this._inputPts[0]);if(2===this._inputPts.length)return this._geomFactory.createLineString(this._inputPts);var e=this._inputPts;50<this._inputPts.length&&(e=this.reduce(this._inputPts));var t=this.preSort(e),n=this.grahamScan(t),i=this.toCoordinateArray(n);return this.lineOrPolygon(i)}padArray3(e){for(var t=[,,,].fill(null),n=0;n<t.length;n++)t[n]=n<e.length?e[n]:e[0];return t}computeOctPts(e){for(var t=Array(8).fill(null),n=0;n<t.length;n++)t[n]=e[0];for(var o=1;o<e.length;o++)e[o].x<t[0].x&&(t[0]=e[o]),e[o].x-e[o].y<t[1].x-t[1].y&&(t[1]=e[o]),e[o].y>t[2].y&&(t[2]=e[o]),e[o].x+e[o].y>t[3].x+t[3].y&&(t[3]=e[o]),e[o].x>t[4].x&&(t[4]=e[o]),e[o].x-e[o].y>t[5].x-t[5].y&&(t[5]=e[o]),e[o].y<t[6].y&&(t[6]=e[o]),e[o].x+e[o].y<t[7].x+t[7].y&&(t[7]=e[o]);return t}toCoordinateArray(e){for(var t=Array(e.size()).fill(null),n=0,o;n<e.size();n++)o=e.get(n),t[n]=o;return t}grahamScan(e){var t=null,n=new $;n.push(e[0]),n.push(e[1]),n.push(e[2]);for(var o=3;o<e.length;o++){for(t=n.pop();!n.empty()&&0<Me.index(n.peek(),t,e[o]);)t=n.pop();n.push(t),n.push(e[o])}return n.push(e[0]),n}getClass(){return Pn}get interfaces_(){return[]}}class vn{constructor(){vn.constructor_.apply(this,arguments)}static polarCompare(e,t,n){var i=t.x-e.x,o=t.y-e.y,r=n.x-e.x,d=n.y-e.y,s=Me.index(e,t,n);if(s===Me.COUNTERCLOCKWISE)return 1;if(s===Me.CLOCKWISE)return-1;var a=i*i+o*o,_=r*r+d*d;return a<_?-1:a>_?1:0}compare(e,t){return vn.polarCompare(this._origin,e,t)}getClass(){return vn}get interfaces_(){return[s]}}vn.constructor_=function(){this._origin=null;let e=arguments[0];this._origin=e},Pn.RadialComparator=vn,Pn.constructor_=function(){if(this._geomFactory=null,this._inputPts=null,1===arguments.length){let e=arguments[0];Pn.constructor_.call(this,Pn.extractCoordinates(e),e.getFactory())}else if(2===arguments.length){let e=arguments[0],t=arguments[1];this._inputPts=On.filterCoordinates(e),this._geomFactory=t}};class bn{constructor(){bn.constructor_.apply(this,arguments)}static centre(e){return new Re(bn.avg(e.getMinX(),e.getMaxX()),bn.avg(e.getMinY(),e.getMaxY()))}static avg(e,t){return(e+t)/2}addPolygon(e){if(e.isEmpty())return null;var t=null,n=null,i=this.horizontalBisector(e);if(0===i.getLength())n=0,t=i.getCoordinate();else{var o=i.intersection(e),r=this.widestGeometry(o);n=r.getEnvelopeInternal().getWidth(),t=bn.centre(r.getEnvelopeInternal())}(null===this._interiorPoint||n>this._maxWidth)&&(this._interiorPoint=t,this._maxWidth=n)}getInteriorPoint(){return this._interiorPoint}widestGeometry(){if(arguments[0]instanceof dt){let n=arguments[0];if(n.isEmpty())return n;for(var e=n.getGeometryN(0),t=1;t<n.getNumGeometries();t++)n.getGeometryN(t).getEnvelopeInternal().getWidth()>e.getEnvelopeInternal().getWidth()&&(e=n.getGeometryN(t));return e}if(arguments[0]instanceof Ue){let e=arguments[0];return e instanceof dt?this.widestGeometry(e):e}}horizontalBisector(e){var t=e.getEnvelopeInternal(),n=Dn.getBisectorY(e);return this._factory.createLineString([new Re(t.getMinX(),n),new Re(t.getMaxX(),n)])}add(e){if(e instanceof xt)this.addPolygon(e);else if(e instanceof dt)for(var t=e,n=0;n<t.getNumGeometries();n++)this.add(t.getGeometryN(n))}getClass(){return bn}get interfaces_(){return[]}}class Dn{constructor(){Dn.constructor_.apply(this,arguments)}static getBisectorY(e){var t=new Dn(e);return t.getBisectorY()}updateInterval(e){e<=this._centreY?e>this._loY&&(this._loY=e):e>this._centreY&&e<this._hiY&&(this._hiY=e)}getBisectorY(){this.process(this._poly.getExteriorRing());for(var e=0;e<this._poly.getNumInteriorRing();e++)this.process(this._poly.getInteriorRingN(e));var t=bn.avg(this._hiY,this._loY);return t}process(e){for(var t=e.getCoordinateSequence(),n=0,o;n<t.size();n++)o=t.getY(n),this.updateInterval(o)}getClass(){return Dn}get interfaces_(){return[]}}Dn.constructor_=function(){this._poly=null,this._centreY=null,this._hiY=o.MAX_VALUE,this._loY=-o.MAX_VALUE;let e=arguments[0];this._poly=e,this._hiY=e.getEnvelopeInternal().getMaxY(),this._loY=e.getEnvelopeInternal().getMinY(),this._centreY=bn.avg(this._loY,this._hiY)},bn.SafeBisectorFinder=Dn,bn.constructor_=function(){this._factory=null,this._interiorPoint=null,this._maxWidth=0;let e=arguments[0];this._factory=e.getFactory(),this.add(e)};class An{constructor(){An.constructor_.apply(this,arguments)}addEndpoints(){if(arguments[0]instanceof Ue){let n=arguments[0];if(n instanceof ut)this.addEndpoints(n.getCoordinates());else if(n instanceof dt)for(var e=n,t=0;t<e.getNumGeometries();t++)this.addEndpoints(e.getGeometryN(t))}else if(arguments[0]instanceof Array){let e=arguments[0];this.add(e[0]),this.add(e[e.length-1])}}getInteriorPoint(){return this._interiorPoint}addInterior(){if(arguments[0]instanceof Ue){let n=arguments[0];if(n instanceof ut)this.addInterior(n.getCoordinates());else if(n instanceof dt)for(var e=n,t=0;t<e.getNumGeometries();t++)this.addInterior(e.getGeometryN(t))}else if(arguments[0]instanceof Array){let e=arguments[0];for(var t=1;t<e.length-1;t++)this.add(e[t])}}add(e){var t=e.distance(this._centroid);t<this._minDistance&&(this._interiorPoint=new Re(e),this._minDistance=t)}getClass(){return An}get interfaces_(){return[]}}An.constructor_=function(){this._centroid=null,this._minDistance=o.MAX_VALUE,this._interiorPoint=null;let e=arguments[0];this._centroid=e.getCentroid().getCoordinate(),this.addInterior(e),null===this._interiorPoint&&this.addEndpoints(e)};class Fn{constructor(){Fn.constructor_.apply(this,arguments)}getInteriorPoint(){return this._interiorPoint}add(){if(arguments[0]instanceof Ue){let n=arguments[0];if(n instanceof mt)this.add(n.getCoordinate());else if(n instanceof dt)for(var e=n,t=0;t<e.getNumGeometries();t++)this.add(e.getGeometryN(t))}else if(arguments[0]instanceof Re){let e=arguments[0];var n=e.distance(this._centroid);n<this._minDistance&&(this._interiorPoint=new Re(e),this._minDistance=n)}}getClass(){return Fn}get interfaces_(){return[]}}Fn.constructor_=function(){this._centroid=null,this._minDistance=o.MAX_VALUE,this._interiorPoint=null;let e=arguments[0];this._centroid=e.getCentroid().getCoordinate(),this.add(e)};class Mn{constructor(){Mn.constructor_.apply(this,arguments)}static pointWitMinAngleWithX(e,t){for(var n=o.MAX_VALUE,r=null,d=0,s;d<e.length;d++)if(s=e[d],s!==t){var a=s.x-t.x,_=s.y-t.y;0>_&&(_=-_);var l=_e(a*a+_*_),g=_/l;g<n&&(n=g,r=s)}return r}static lowestPoint(e){for(var t=e[0],n=1;n<e.length;n++)e[n].y<t.y&&(t=e[n]);return t}static pointWithMinAngleWithSegment(e,t,n){for(var r=o.MAX_VALUE,d=null,s=0,a;s<e.length;s++)if(a=e[s],a!==t&&a!==n){var _=Ht.angleBetween(t,a,n);_<r&&(r=_,d=a)}return d}getRadius(){return this.compute(),this._radius}getDiameter(){switch(this.compute(),this._extremalPts.length){case 0:return this._input.getFactory().createLineString();case 1:return this._input.getFactory().createPoint(this._centre);}var e=this._extremalPts[0],t=this._extremalPts[1];return this._input.getFactory().createLineString([e,t])}getExtremalPoints(){return this.compute(),this._extremalPts}computeCirclePoints(){if(this._input.isEmpty())return this._extremalPts=[].fill(null),null;if(1===this._input.getNumPoints()){var e=this._input.getCoordinates();return this._extremalPts=[new Re(e[0])],null}var t=this._input.convexHull(),n=t.getCoordinates(),e=n;if(n[0].equals2D(n[n.length-1])&&(e=Array(n.length-1).fill(null),Ke.copyDeep(n,0,e,0,n.length-1)),2>=e.length)return this._extremalPts=Ke.copyDeep(e),null;for(var o=Mn.lowestPoint(e),r=Mn.pointWitMinAngleWithX(e,o),d=0,s;d<e.length;d++){if(s=Mn.pointWithMinAngleWithSegment(e,o,r),Ht.isObtuse(o,s,r))return this._extremalPts=[new Re(o),new Re(r)],null;if(Ht.isObtuse(s,o,r)){o=s;continue}if(Ht.isObtuse(s,r,o)){r=s;continue}return this._extremalPts=[new Re(o),new Re(r),new Re(s)],null}Te.shouldNeverReachHere("Logic failure in Minimum Bounding Circle algorithm!")}compute(){return null===this._extremalPts?void(this.computeCirclePoints(),this.computeCentre(),null!==this._centre&&(this._radius=this._centre.distance(this._extremalPts[0]))):null}getFarthestPoints(){switch(this.compute(),this._extremalPts.length){case 0:return this._input.getFactory().createLineString();case 1:return this._input.getFactory().createPoint(this._centre);}var e=this._extremalPts[0],t=this._extremalPts[this._extremalPts.length-1];return this._input.getFactory().createLineString([e,t])}getCircle(){if(this.compute(),null===this._centre)return this._input.getFactory().createPolygon();var e=this._input.getFactory().createPoint(this._centre);return 0===this._radius?e:e.buffer(this._radius)}getCentre(){return this.compute(),this._centre}computeCentre(){switch(this._extremalPts.length){case 0:this._centre=null;break;case 1:this._centre=this._extremalPts[0];break;case 2:this._centre=new Re((this._extremalPts[0].x+this._extremalPts[1].x)/2,(this._extremalPts[0].y+this._extremalPts[1].y)/2);break;case 3:this._centre=wt.circumcentre(this._extremalPts[0],this._extremalPts[1],this._extremalPts[2]);}}getClass(){return Mn}get interfaces_(){return[]}}Mn.constructor_=function(){this._input=null,this._extremalPts=null,this._centre=null,this._radius=0;let e=arguments[0];this._input=e};class Gn{constructor(){Gn.constructor_.apply(this,arguments)}static nextIndex(e,t){return t++,t>=e.length&&(t=0),t}static computeC(e,t,n){return e*n.y-t*n.x}static getMinimumDiameter(e){return new Gn(e).getDiameter()}static getMinimumRectangle(e){return new Gn(e).getMinimumRectangle()}static computeSegmentForLine(e,t,n){var i=null,o=null;return Ne(t)>Ne(e)?(i=new Re(0,n/t),o=new Re(1,n/t-e/t)):(i=new Re(n/e,0),o=new Re(n/e-t/e,1)),new Ut(i,o)}getWidthCoordinate(){return this.computeMinimumDiameter(),this._minWidthPt}getSupportingSegment(){return this.computeMinimumDiameter(),this._inputGeom.getFactory().createLineString([this._minBaseSeg.p0,this._minBaseSeg.p1])}getDiameter(){if(this.computeMinimumDiameter(),null===this._minWidthPt)return this._inputGeom.getFactory().createLineString();var e=this._minBaseSeg.project(this._minWidthPt);return this._inputGeom.getFactory().createLineString([e,this._minWidthPt])}computeWidthConvex(e){this._convexHullPts=e instanceof xt?e.getExteriorRing().getCoordinates():e.getCoordinates(),0===this._convexHullPts.length?(this._minWidth=0,this._minWidthPt=null,this._minBaseSeg=null):1===this._convexHullPts.length?(this._minWidth=0,this._minWidthPt=this._convexHullPts[0],this._minBaseSeg.p0=this._convexHullPts[0],this._minBaseSeg.p1=this._convexHullPts[0]):2===this._convexHullPts.length||3===this._convexHullPts.length?(this._minWidth=0,this._minWidthPt=this._convexHullPts[0],this._minBaseSeg.p0=this._convexHullPts[0],this._minBaseSeg.p1=this._convexHullPts[1]):this.computeConvexRingMinDiameter(this._convexHullPts)}computeConvexRingMinDiameter(e){this._minWidth=o.MAX_VALUE;for(var t=1,n=new Ut,r=0;r<e.length-1;r++)n.p0=e[r],n.p1=e[r+1],t=this.findMaxPerpDistance(e,n,t)}computeMinimumDiameter(){if(null!==this._minWidthPt)return null;if(this._isConvex)this.computeWidthConvex(this._inputGeom);else{var e=new Pn(this._inputGeom).getConvexHull();this.computeWidthConvex(e)}}getLength(){return this.computeMinimumDiameter(),this._minWidth}findMaxPerpDistance(e,t,n){for(var i=t.distancePerpendicular(e[n]),o=i,r=n,d=r;o>=i;)i=o,r=d,d=Gn.nextIndex(e,r),o=t.distancePerpendicular(e[d]);return i<this._minWidth&&(this._minPtIndex=r,this._minWidth=i,this._minWidthPt=e[this._minPtIndex],this._minBaseSeg=new Ut(t)),r}getMinimumRectangle(){if(this.computeMinimumDiameter(),0===this._minWidth)return this._minBaseSeg.p0.equals2D(this._minBaseSeg.p1)?this._inputGeom.getFactory().createPoint(this._minBaseSeg.p0):this._minBaseSeg.toGeometry(this._inputGeom.getFactory());for(var e=this._minBaseSeg.p1.x-this._minBaseSeg.p0.x,t=this._minBaseSeg.p1.y-this._minBaseSeg.p0.y,n=o.MAX_VALUE,r=-o.MAX_VALUE,d=o.MAX_VALUE,s=-o.MAX_VALUE,a=0,_;a<this._convexHullPts.length;a++){_=Gn.computeC(e,t,this._convexHullPts[a]),_>r&&(r=_),_<n&&(n=_);var l=Gn.computeC(-t,e,this._convexHullPts[a]);l>s&&(s=l),l<d&&(d=l)}var g=Gn.computeSegmentForLine(-e,-t,s),c=Gn.computeSegmentForLine(-e,-t,d),u=Gn.computeSegmentForLine(-t,e,r),p=Gn.computeSegmentForLine(-t,e,n),m=u.lineIntersection(g),y=p.lineIntersection(g),f=p.lineIntersection(c),x=u.lineIntersection(c),h=this._inputGeom.getFactory().createLinearRing([m,y,f,x,m]);return this._inputGeom.getFactory().createPolygon(h)}getClass(){return Gn}get interfaces_(){return[]}}Gn.constructor_=function(){if(this._inputGeom=null,this._isConvex=null,this._convexHullPts=null,this._minBaseSeg=new Ut,this._minWidthPt=null,this._minPtIndex=null,this._minWidth=0,1===arguments.length){let e=arguments[0];Gn.constructor_.call(this,e,!1)}else if(2===arguments.length){let e=arguments[0],t=arguments[1];this._inputGeom=e,this._isConvex=t}};var Yn=/*#__PURE__*/Object.freeze({distance:nn,locate:In,match:Tn,Angle:Ht,Area:yt,Centroid:Rn,ConvexHull:Pn,Distance:ze,InteriorPointArea:bn,InteriorPointLine:An,InteriorPointPoint:Fn,Length:lt,Orientation:Me,PointLocation:xn,RobustLineIntersector:Vt,MinimumBoundingCircle:Mn,MinimumDiameter:Gn});class zn{constructor(){zn.constructor_.apply(this,arguments)}transformPoint(e){return this._factory.createPoint(this.transformCoordinates(e.getCoordinateSequence(),e))}transformPolygon(e){var t=!0,n=this.transformLinearRing(e.getExteriorRing(),e);(null===n||!(n instanceof Et)||n.isEmpty())&&(t=!1);for(var o=new f,r=0,d;r<e.getNumInteriorRing();r++)(d=this.transformLinearRing(e.getInteriorRingN(r),e),!(null===d||d.isEmpty()))&&(d instanceof Et||(t=!1),o.add(d));if(t)return this._factory.createPolygon(n,o.toArray([]));var s=new f;return null!==n&&s.add(n),s.addAll(o),this._factory.buildGeometry(s)}createCoordinateSequence(e){return this._factory.getCoordinateSequenceFactory().create(e)}getInputGeometry(){return this._inputGeom}transformMultiLineString(e){for(var t=new f,n=0,o;n<e.getNumGeometries();n++)o=this.transformLineString(e.getGeometryN(n),e),null===o||o.isEmpty()||t.add(o);return this._factory.buildGeometry(t)}transformCoordinates(e){return this.copy(e)}transformLineString(e){return this._factory.createLineString(this.transformCoordinates(e.getCoordinateSequence(),e))}transformMultiPoint(e){for(var t=new f,n=0,o;n<e.getNumGeometries();n++)o=this.transformPoint(e.getGeometryN(n),e),null===o||o.isEmpty()||t.add(o);return this._factory.buildGeometry(t)}transformMultiPolygon(e){for(var t=new f,n=0,o;n<e.getNumGeometries();n++)o=this.transformPolygon(e.getGeometryN(n),e),null===o||o.isEmpty()||t.add(o);return this._factory.buildGeometry(t)}copy(e){return e.copy()}transformGeometryCollection(e){for(var t=new f,n=0,o;n<e.getNumGeometries();n++)o=this.transform(e.getGeometryN(n)),null===o||this._pruneEmptyGeometry&&o.isEmpty()||t.add(o);return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(Ft.toGeometryArray(t)):this._factory.buildGeometry(t)}transform(e){if(this._inputGeom=e,this._factory=e.getFactory(),e instanceof mt)return this.transformPoint(e,null);if(e instanceof ht)return this.transformMultiPoint(e,null);if(e instanceof Et)return this.transformLinearRing(e,null);if(e instanceof ut)return this.transformLineString(e,null);if(e instanceof st)return this.transformMultiLineString(e,null);if(e instanceof xt)return this.transformPolygon(e,null);if(e instanceof It)return this.transformMultiPolygon(e,null);if(e instanceof dt)return this.transformGeometryCollection(e,null);throw new t("Unknown Geometry subtype: "+e.getClass().getName())}transformLinearRing(e){var t=this.transformCoordinates(e.getCoordinateSequence(),e);if(null===t)return this._factory.createLinearRing(null);var n=t.size();return 0<n&&4>n&&!this._preserveType?this._factory.createLineString(t):this._factory.createLinearRing(t)}getClass(){return zn}get interfaces_(){return[]}}zn.constructor_=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};class qn{constructor(){qn.constructor_.apply(this,arguments)}static densifyPoints(e,t,n){for(var o=new Ut,r=new ve,d=0;d<e.length-1;d++){o.p0=e[d],o.p1=e[d+1],r.add(o.p0,!1);var s=o.getLength(),a=pe(s/t)+1;if(1<a)for(var _=1;_<a;_++){var l=_*(s/a)/s,g=o.pointAlong(l);n.makePrecise(g),r.add(g,!1)}}return r.add(e[e.length-1],!1),r.toCoordinateArray()}static densify(e,t){var n=new qn(e);return n.setDistanceTolerance(t),n.getResultGeometry()}getResultGeometry(){return new Bn(this._distanceTolerance).transform(this._inputGeom)}setDistanceTolerance(e){if(0>=e)throw new t("Tolerance must be positive");this._distanceTolerance=e}getClass(){return qn}get interfaces_(){return[]}}class Bn extends zn{constructor(){super(),Bn.constructor_.apply(this,arguments)}transformMultiPolygon(e,t){var n=super.transformMultiPolygon.call(this,e,t);return this.createValidArea(n)}transformPolygon(e,t){var n=super.transformPolygon.call(this,e,t);return t instanceof It?n:this.createValidArea(n)}transformCoordinates(e,t){var n=e.toCoordinateArray(),i=qn.densifyPoints(n,this.distanceTolerance,t.getPrecisionModel());return t instanceof ut&&1===i.length&&(i=[].fill(null)),this._factory.getCoordinateSequenceFactory().create(i)}createValidArea(e){return e.buffer(0)}getClass(){return Bn}get interfaces_(){return[]}}Bn.constructor_=function(){this.distanceTolerance=null;let e=arguments[0];this.distanceTolerance=e},qn.DensifyTransformer=Bn,qn.constructor_=function(){this._inputGeom=null,this._distanceTolerance=null;let e=arguments[0];this._inputGeom=e};var Vn=/*#__PURE__*/Object.freeze({Densifier:qn});class Un{constructor(){Un.constructor_.apply(this,arguments)}static isNorthern(e){return e===Un.NE||e===Un.NW}static isOpposite(e,t){if(e===t)return!1;return 2==(e-t+4)%4}static commonHalfPlane(e,t){if(e===t)return e;if(2==(e-t+4)%4)return-1;var n=e<t?e:t,i=e>t?e:t;return 0==n&&3===i?3:n}static isInHalfPlane(e,t){return t===Un.SE?e===Un.SE||e===Un.SW:e===t||e===t+1}static quadrant(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){let e=arguments[0],n=arguments[1];if(0===e&&0===n)throw new t("Cannot compute the quadrant for point ( "+e+", "+n+" )");return 0<=e?0<=n?Un.NE:Un.SE:0<=n?Un.NW:Un.SW}if(arguments[0]instanceof Re&&arguments[1]instanceof Re){let e=arguments[0],n=arguments[1];if(n.x===e.x&&n.y===e.y)throw new t("Cannot compute the quadrant for two identical points "+e);return n.x>=e.x?n.y>=e.y?Un.NE:Un.SE:n.y>=e.y?Un.NW:Un.SW}}getClass(){return Un}get interfaces_(){return[]}}Un.constructor_=function(){},Un.NE=0,Un.NW=1,Un.SW=2,Un.SE=3;class Xn{constructor(){Xn.constructor_.apply(this,arguments)}static init(e,t){if(null!==e._sym||null!==t._sym||null!==e._next||null!==t._next)throw new IllegalStateException("Edges are already initialized");return e.init(t),e}static create(e,t){var n=new Xn(e),i=new Xn(t);return n.init(i),n}find(e){var t=this;do{if(null===t)return null;if(t.dest().equals2D(e))return t;t=t.oNext()}while(t!==this);return null}dest(){return this._sym._orig}oNext(){return this._sym._next}insert(t){if(this.oNext()===this)return this.insertAfter(t),null;var e=this.compareTo(t),n=this;do{var i=n.oNext(),o=i.compareTo(t);if(o!==e||i===this)return n.insertAfter(t),null;n=i}while(n!==this);Te.shouldNeverReachHere()}insertAfter(t){Te.equals(this._orig,t.orig());var e=this.oNext();this._sym.setNext(t),t.sym().setNext(e)}degree(){var t=0,n=this;do t++,n=n.oNext();while(n!==this);return t}equals(){if(2===arguments.length&&arguments[1]instanceof Re&&arguments[0]instanceof Re){let e=arguments[0],t=arguments[1];return this._orig.equals2D(e)&&this._sym._orig.equals(t)}}deltaY(){return this._sym._orig.y-this._orig.y}sym(){return this._sym}prev(){return this._sym.next()._sym}compareAngularDirection(t){var e=this.deltaX(),n=this.deltaY(),i=t.deltaX(),o=t.deltaY();if(e===i&&n===o)return 0;var r=Un.quadrant(e,n),d=Un.quadrant(i,o);return r>d?1:r<d?-1:Me.index(t._orig,t.dest(),this.dest())}prevNode(){for(var t=this;2===t.degree();)if(t=t.prev(),t===this)return null;return t}compareTo(e){var t=this.compareAngularDirection(e);return t}next(){return this._next}setSym(t){this._sym=t}orig(){return this._orig}toString(){return"HE("+this._orig.x+" "+this._orig.y+", "+this._sym._orig.x+" "+this._sym._orig.y+")"}setNext(t){this._next=t}init(t){this.setSym(t),t.setSym(this),this.setNext(t),t.setNext(this)}deltaX(){return this._sym._orig.x-this._orig.x}getClass(){return Xn}get interfaces_(){return[]}}Xn.constructor_=function(){this._orig=null,this._sym=null,this._next=null;let e=arguments[0];this._orig=e};class kn extends Xn{constructor(){super(),kn.constructor_.apply(this,arguments)}static setMarkBoth(t,e){t.setMark(e),t.sym().setMark(e)}static isMarked(t){return t.isMarked()}static setMark(t,e){t.setMark(e)}static markBoth(t){t.mark(),t.sym().mark()}static mark(t){t.mark()}mark(){this._isMarked=!0}setMark(e){this._isMarked=e}isMarked(){return this._isMarked}getClass(){return kn}get interfaces_(){return[]}}kn.constructor_=function(){this._isMarked=!1;let e=arguments[0];Xn.constructor_.call(this,e)};class Hn{constructor(){Hn.constructor_.apply(this,arguments)}static isValidEdge(e,t){var n=t.compareTo(e);return 0!==n}insert(t,n,i){var o=this.create(t,n);null===i?this._vertexMap.put(t,o):i.insert(o);var e=this._vertexMap.get(n);return null===e?this._vertexMap.put(n,o.sym()):e.insert(o.sym()),o}create(e,t){var n=this.createEdge(e),i=this.createEdge(t);return Xn.init(n,i),n}createEdge(e){return new Xn(e)}addEdge(t,n){if(!Hn.isValidEdge(t,n))return null;var i=this._vertexMap.get(t),o=null;if(null!==i&&(o=i.find(n)),null!==o)return o;var r=this.insert(t,n,i);return r}getVertexEdges(){return this._vertexMap.values()}findEdge(t,n){var i=this._vertexMap.get(t);return null===i?null:i.find(n)}getClass(){return Hn}get interfaces_(){return[]}}Hn.constructor_=function(){this._vertexMap=new Q};class wn extends kn{constructor(){super(),wn.constructor_.apply(this,arguments)}setStart(){this._isStart=!0}isStart(){return this._isStart}getClass(){return wn}get interfaces_(){return[]}}wn.constructor_=function(){this._isStart=!1;let e=arguments[0];kn.constructor_.call(this,e)};class Wn extends Hn{constructor(){super(),Wn.constructor_.apply(this,arguments)}createEdge(e){return new wn(e)}getClass(){return Wn}get interfaces_(){return[]}}Wn.constructor_=function(){};class jn{constructor(){jn.constructor_.apply(this,arguments)}static dissolve(e){var t=new jn;return t.add(e),t.getResult()}addLine(e){this._lines.add(this._factory.createLineString(e.toCoordinateArray()))}updateRingStartEdge(t){return!t.isStart()&&(t=t.sym(),!t.isStart())?null:null===this._ringStartEdge?(this._ringStartEdge=t,null):void(0>t.orig().compareTo(this._ringStartEdge.orig())&&(this._ringStartEdge=t))}getResult(){return null===this._result&&this.computeResult(),this._result}process(t){var e=t.prevNode();null===e&&(e=t),this.stackEdges(e),this.buildLines()}buildRing(t){var n=new ve,i=t;for(n.add(i.orig().copy(),!1);2===i.sym().degree();){var o=i.next();if(o===t)break;n.add(o.orig().copy(),!1),i=o}n.add(i.dest().copy(),!1),this.addLine(n)}buildLine(t){var n=new ve,i=t;for(this._ringStartEdge=null,kn.markBoth(i),n.add(i.orig().copy(),!1);2===i.sym().degree();){this.updateRingStartEdge(i);var o=i.next();if(o===t)return this.buildRing(this._ringStartEdge),null;n.add(o.orig().copy(),!1),i=o,kn.markBoth(i)}n.add(i.dest().clone(),!1),this.stackEdges(i.sym()),this.addLine(n)}stackEdges(t){var n=t;do kn.isMarked(n)||this._nodeEdgeStack.add(n),n=n.oNext();while(n!==t)}computeResult(){for(var t=this._graph.getVertexEdges(),n=t.iterator(),i;n.hasNext();)i=n.next(),kn.isMarked(i)||this.process(i);this._result=this._factory.buildGeometry(this._lines)}buildLines(){for(;!this._nodeEdgeStack.empty();){var t=this._nodeEdgeStack.pop();kn.isMarked(t)||this.buildLine(t)}}add(){if(arguments[0]instanceof Ue){let e=arguments[0];e.apply(new class{get interfaces_(){return[Ve]}filter(e){e instanceof ut&&this.add(e)}})}else if(l(arguments[0],c)){let e=arguments[0];for(var t=e.iterator(),n;t.hasNext();)n=t.next(),this.add(n)}else if(arguments[0]instanceof ut){let e=arguments[0];null===this._factory&&(this._factory=e.getFactory());for(var o=e.getCoordinateSequence(),r=!1,t=1,d;t<o.size();t++)d=this._graph.addEdge(o.getCoordinate(t-1),o.getCoordinate(t)),null===d||r||(d.setStart(),r=!0)}}getClass(){return jn}get interfaces_(){return[]}}jn.constructor_=function(){this._result=null,this._factory=null,this._graph=null,this._lines=new f,this._nodeEdgeStack=new $,this._ringStartEdge=null,this._graph=new Wn};var Kn=/*#__PURE__*/Object.freeze({LineDissolver:jn});class Zn{constructor(){Zn.constructor_.apply(this,arguments)}locateInPolygonRing(e,t){return t.getEnvelopeInternal().intersects(e)?xn.locateInRing(e,t.getCoordinates()):Xt.EXTERIOR}intersects(e,t){return this.locate(e,t)!==Xt.EXTERIOR}updateLocationInfo(e){e===Xt.INTERIOR&&(this._isIn=!0),e===Xt.BOUNDARY&&this._numBoundaries++}computeLocation(e,t){if(t instanceof mt&&this.updateLocationInfo(this.locateOnPoint(e,t)),t instanceof ut)this.updateLocationInfo(this.locateOnLineString(e,t));else if(t instanceof xt)this.updateLocationInfo(this.locateInPolygon(e,t));else if(t instanceof st)for(var n=t,o=0,r;o<n.getNumGeometries();o++)r=n.getGeometryN(o),this.updateLocationInfo(this.locateOnLineString(e,r));else if(t instanceof It)for(var d=t,o=0,s;o<d.getNumGeometries();o++)s=d.getGeometryN(o),this.updateLocationInfo(this.locateInPolygon(e,s));else if(t instanceof dt)for(var a=new hn(t),_;a.hasNext();)_=a.next(),_!==t&&this.computeLocation(e,_)}locateOnPoint(e,t){var n=t.getCoordinate();return n.equals2D(e)?Xt.INTERIOR:Xt.EXTERIOR}locateOnLineString(e,t){if(!t.getEnvelopeInternal().intersects(e))return Xt.EXTERIOR;var n=t.getCoordinateSequence();return!t.isClosed()&&(e.equals(n.getCoordinate(0))||e.equals(n.getCoordinate(n.size()-1)))?Xt.BOUNDARY:xn.isOnLine(e,n)?Xt.INTERIOR:Xt.EXTERIOR}locateInPolygon(e,t){if(t.isEmpty())return Xt.EXTERIOR;var n=t.getExteriorRing(),o=this.locateInPolygonRing(e,n);if(o===Xt.EXTERIOR)return Xt.EXTERIOR;if(o===Xt.BOUNDARY)return Xt.BOUNDARY;for(var r=0;r<t.getNumInteriorRing();r++){var d=t.getInteriorRingN(r),s=this.locateInPolygonRing(e,d);if(s===Xt.INTERIOR)return Xt.EXTERIOR;if(s===Xt.BOUNDARY)return Xt.BOUNDARY}return Xt.INTERIOR}locate(e,t){return t.isEmpty()?Xt.EXTERIOR:t instanceof ut?this.locateOnLineString(e,t):t instanceof xt?this.locateInPolygon(e,t):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(e,t),this._boundaryRule.isInBoundary(this._numBoundaries)?Xt.BOUNDARY:0<this._numBoundaries||this._isIn?Xt.INTERIOR:Xt.EXTERIOR)}getClass(){return Zn}get interfaces_(){return[]}}Zn.constructor_=function(){if(this._boundaryRule=ke.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){let e=arguments[0];if(null===e)throw new t("Rule must be non-null");this._boundaryRule=e}};class Qn{constructor(){Qn.constructor_.apply(this,arguments)}static opposite(e){return e===Qn.LEFT?Qn.RIGHT:e===Qn.RIGHT?Qn.LEFT:e}getClass(){return Qn}get interfaces_(){return[]}}Qn.constructor_=function(){},Qn.ON=0,Qn.LEFT=1,Qn.RIGHT=2;class Jn{constructor(){Jn.constructor_.apply(this,arguments)}computeIntersections(e,t){this.mce.computeIntersectsForChain(this.chainIndex,e.mce,e.chainIndex,t)}getClass(){return Jn}get interfaces_(){return[]}}Jn.constructor_=function(){this.mce=null,this.chainIndex=null;let e=arguments[0],t=arguments[1];this.mce=e,this.chainIndex=t};class $n{constructor(){$n.constructor_.apply(this,arguments)}isDelete(){return this._eventType===$n.DELETE}setDeleteEventIndex(e){this._deleteEventIndex=e}getObject(){return this._obj}compareTo(e){var t=e;return this._xValue<t._xValue?-1:this._xValue>t._xValue?1:this._eventType<t._eventType?-1:this._eventType>t._eventType?1:0}getInsertEvent(){return this._insertEvent}isInsert(){return this._eventType===$n.INSERT}isSameLabel(e){return null!==this._label&&this._label===e._label}getDeleteEventIndex(){return this._deleteEventIndex}getClass(){return $n}get interfaces_(){return[r]}}$n.constructor_=function(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){let e=arguments[0],t=arguments[1];this._eventType=$n.DELETE,this._xValue=e,this._insertEvent=t}else if(3===arguments.length){let e=arguments[0],t=arguments[1],n=arguments[2];this._eventType=$n.INSERT,this._label=e,this._xValue=t,this._obj=n}},$n.INSERT=1,$n.DELETE=2;class ei{constructor(){ei.constructor_.apply(this,arguments)}getClass(){return ei}get interfaces_(){return[]}}ei.constructor_=function(){};class ti{constructor(){ti.constructor_.apply(this,arguments)}static isAdjacentSegments(e,t){return 1===Ne(e-t)}isTrivialIntersection(e,t,n,i){if(e===n&&1===this._li.getIntersectionNum()){if(ti.isAdjacentSegments(t,i))return!0;if(e.isClosed()){var o=e.getNumPoints()-1;if(0===t&&i===o||0===i&&t===o)return!0}}return!1}getProperIntersectionPoint(){return this._properIntersectionPoint}setIsDoneIfProperInt(e){this._isDoneWhenProperInt=e}hasProperInteriorIntersection(){return this._hasProperInterior}isBoundaryPointInternal(e,t){for(var n=t.iterator();n.hasNext();){var i=n.next(),o=i.getCoordinate();if(e.isIntersection(o))return!0}return!1}hasProperIntersection(){return this._hasProper}hasIntersection(){return this._hasIntersection}isDone(){return this._isDone}isBoundaryPoint(e,t){return null!==t&&(!!this.isBoundaryPointInternal(e,t[0])||!!this.isBoundaryPointInternal(e,t[1]))}setBoundaryNodes(e,t){this._bdyNodes=[,,].fill(null),this._bdyNodes[0]=e,this._bdyNodes[1]=t}addIntersections(e,t,n,i){if(e===n&&t===i)return null;this.numTests++;var o=e.getCoordinates()[t],r=e.getCoordinates()[t+1],d=n.getCoordinates()[i],s=n.getCoordinates()[i+1];this._li.computeIntersection(o,r,d,s),this._li.hasIntersection()&&(this._recordIsolated&&(e.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,!this.isTrivialIntersection(e,t,n,i)&&(this._hasIntersection=!0,(this._includeProper||!this._li.isProper())&&(e.addIntersections(this._li,t,0),n.addIntersections(this._li,i,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),!this.isBoundaryPoint(this._li,this._bdyNodes)&&(this._hasProperInterior=!0))))}getClass(){return ti}get interfaces_(){return[]}}ti.constructor_=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;let e=arguments[0],t=arguments[1],n=arguments[2];this._li=e,this._includeProper=t,this._recordIsolated=n};class ni extends ei{constructor(){super(),ni.constructor_.apply(this,arguments)}prepareEvents(){_n.sort(this.events);for(var e=0,t;e<this.events.size();e++)t=this.events.get(e),t.isDelete()&&t.getInsertEvent().setDeleteEventIndex(e)}computeIntersections(){if(1===arguments.length){let n=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0,t;e<this.events.size()&&(t=this.events.get(e),t.isInsert()&&this.processOverlaps(e,t.getDeleteEventIndex(),t,n),!n.isDone());e++);}else if(3===arguments.length)if(arguments[2]instanceof ti&&l(arguments[0],p)&&l(arguments[1],p)){let e=arguments[0],t=arguments[1],n=arguments[2];this.addEdges(e,e),this.addEdges(t,t),this.computeIntersections(n)}else if("boolean"==typeof arguments[2]&&l(arguments[0],p)&&arguments[1]instanceof ti){let e=arguments[0],t=arguments[1],n=arguments[2];n?this.addEdges(e,null):this.addEdges(e),this.computeIntersections(t)}}addEdge(e,t){for(var n=e.getMonotoneChainEdge(),o=n.getStartIndexes(),r=0;r<o.length-1;r++){var d=new Jn(n,r),s=new $n(t,n.getMinX(r),d);this.events.add(s),this.events.add(new $n(n.getMaxX(r),s))}}processOverlaps(e,t,n,o){for(var r=n.getObject(),d=e,s;d<t;d++)if(s=this.events.get(d),s.isInsert()){var a=s.getObject();n.isSameLabel(s)||(r.computeIntersections(a,o),this.nOverlaps++)}}addEdges(){if(1===arguments.length){let n=arguments[0];for(var e=n.iterator(),t;e.hasNext();)t=e.next(),this.addEdge(t,t)}else if(2===arguments.length){let n=arguments[0],i=arguments[1];for(var e=n.iterator(),t;e.hasNext();)t=e.next(),this.addEdge(t,i)}}getClass(){return ni}get interfaces_(){return[]}}ni.constructor_=function(){this.events=new f,this.nOverlaps=null};class ii{constructor(){ii.constructor_.apply(this,arguments)}setAllLocations(e){for(var t=0;t<this.location.length;t++)this.location[t]=e}isNull(){for(var e=0;e<this.location.length;e++)if(this.location[e]!==Xt.NONE)return!1;return!0}setAllLocationsIfNull(e){for(var t=0;t<this.location.length;t++)this.location[t]===Xt.NONE&&(this.location[t]=e)}isLine(){return 1===this.location.length}merge(e){if(e.location.length>this.location.length){var t=[,,,].fill(null);t[Qn.ON]=this.location[Qn.ON],t[Qn.LEFT]=Xt.NONE,t[Qn.RIGHT]=Xt.NONE,this.location=t}for(var n=0;n<this.location.length;n++)this.location[n]===Xt.NONE&&n<e.location.length&&(this.location[n]=e.location[n])}getLocations(){return this.location}flip(){if(1>=this.location.length)return null;var e=this.location[Qn.LEFT];this.location[Qn.LEFT]=this.location[Qn.RIGHT],this.location[Qn.RIGHT]=e}toString(){var e=new h;return 1<this.location.length&&e.append(Xt.toLocationSymbol(this.location[Qn.LEFT])),e.append(Xt.toLocationSymbol(this.location[Qn.ON])),1<this.location.length&&e.append(Xt.toLocationSymbol(this.location[Qn.RIGHT])),e.toString()}setLocations(e,t,n){this.location[Qn.ON]=e,this.location[Qn.LEFT]=t,this.location[Qn.RIGHT]=n}get(e){return e<this.location.length?this.location[e]:Xt.NONE}isArea(){return 1<this.location.length}isAnyNull(){for(var e=0;e<this.location.length;e++)if(this.location[e]===Xt.NONE)return!0;return!1}setLocation(){if(1===arguments.length){let e=arguments[0];this.setLocation(Qn.ON,e)}else if(2===arguments.length){let e=arguments[0],t=arguments[1];this.location[e]=t}}init(e){this.location=Array(e).fill(null),this.setAllLocations(Xt.NONE)}isEqualOnSide(e,t){return this.location[t]===e.location[t]}allPositionsEqual(e){for(var t=0;t<this.location.length;t++)if(this.location[t]!==e)return!1;return!0}getClass(){return ii}get interfaces_(){return[]}}ii.constructor_=function(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){let e=arguments[0];this.init(e.length)}else if(xe(arguments[0])){let e=arguments[0];this.init(1),this.location[Qn.ON]=e}else if(arguments[0]instanceof ii){let t=arguments[0];if(this.init(t.location.length),null!==t)for(var e=0;e<this.location.length;e++)this.location[e]=t.location[e]}}else if(3===arguments.length){let e=arguments[0],t=arguments[1],n=arguments[2];this.init(3),this.location[Qn.ON]=e,this.location[Qn.LEFT]=t,this.location[Qn.RIGHT]=n}};class oi{constructor(){oi.constructor_.apply(this,arguments)}static toLineLabel(e){for(var t=new oi(Xt.NONE),n=0;2>n;n++)t.setLocation(n,e.getLocation(n));return t}getGeometryCount(){var e=0;return this.elt[0].isNull()||e++,this.elt[1].isNull()||e++,e}setAllLocations(e,t){this.elt[e].setAllLocations(t)}isNull(e){return this.elt[e].isNull()}setAllLocationsIfNull(){if(1===arguments.length){let e=arguments[0];this.setAllLocationsIfNull(0,e),this.setAllLocationsIfNull(1,e)}else if(2===arguments.length){let e=arguments[0],t=arguments[1];this.elt[e].setAllLocationsIfNull(t)}}isLine(e){return this.elt[e].isLine()}merge(e){for(var t=0;2>t;t++)null===this.elt[t]&&null!==e.elt[t]?this.elt[t]=new ii(e.elt[t]):this.elt[t].merge(e.elt[t])}flip(){this.elt[0].flip(),this.elt[1].flip()}getLocation(){if(1===arguments.length){let e=arguments[0];return this.elt[e].get(Qn.ON)}if(2===arguments.length){let e=arguments[0],t=arguments[1];return this.elt[e].get(t)}}toString(){var e=new h;return null!==this.elt[0]&&(e.append("A:"),e.append(this.elt[0].toString())),null!==this.elt[1]&&(e.append(" B:"),e.append(this.elt[1].toString())),e.toString()}isArea(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){let e=arguments[0];return this.elt[e].isArea()}}isAnyNull(e){return this.elt[e].isAnyNull()}setLocation(){if(2===arguments.length){let e=arguments[0],t=arguments[1];this.elt[e].setLocation(Qn.ON,t)}else if(3===arguments.length){let e=arguments[0],t=arguments[1],n=arguments[2];this.elt[e].setLocation(t,n)}}isEqualOnSide(e,t){return this.elt[0].isEqualOnSide(e.elt[0],t)&&this.elt[1].isEqualOnSide(e.elt[1],t)}allPositionsEqual(e,t){return this.elt[e].allPositionsEqual(t)}toLine(e){this.elt[e].isArea()&&(this.elt[e]=new ii(this.elt[e].location[0]))}getClass(){return oi}get interfaces_(){return[]}}oi.constructor_=function(){if(this.elt=[,,].fill(null),1===arguments.length){if(xe(arguments[0])){let e=arguments[0];this.elt[0]=new ii(e),this.elt[1]=new ii(e)}else if(arguments[0]instanceof oi){let e=arguments[0];this.elt[0]=new ii(e.elt[0]),this.elt[1]=new ii(e.elt[1])}}else if(2===arguments.length){let e=arguments[0],t=arguments[1];this.elt[0]=new ii(Xt.NONE),this.elt[1]=new ii(Xt.NONE),this.elt[e].setLocation(t)}else if(3===arguments.length){let e=arguments[0],t=arguments[1],n=arguments[2];this.elt[0]=new ii(e,t,n),this.elt[1]=new ii(e,t,n)}else if(4===arguments.length){let e=arguments[0],t=arguments[1],n=arguments[2],i=arguments[3];this.elt[0]=new ii(Xt.NONE,Xt.NONE,Xt.NONE),this.elt[1]=new ii(Xt.NONE,Xt.NONE,Xt.NONE),this.elt[e].setLocations(t,n,i)}};class ri{constructor(){ri.constructor_.apply(this,arguments)}getSegmentIndex(){return this.segmentIndex}getCoordinate(){return this.coord}print(e){e.print(this.coord),e.print(" seg # = "+this.segmentIndex),e.println(" dist = "+this.dist)}compareTo(e){var t=e;return this.compare(t.segmentIndex,t.dist)}isEndPoint(e){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===e}toString(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist}getDistance(){return this.dist}compare(e,t){return this.segmentIndex<e?-1:this.segmentIndex>e?1:this.dist<t?-1:this.dist>t?1:0}getClass(){return ri}get interfaces_(){return[r]}}ri.constructor_=function(){this.coord=null,this.segmentIndex=null,this.dist=null;let e=arguments[0],t=arguments[1],n=arguments[2];this.coord=new Re(e),this.segmentIndex=t,this.dist=n};class di{constructor(){di.constructor_.apply(this,arguments)}print(e){e.println("Intersections:");for(var t=this.iterator(),n;t.hasNext();)n=t.next(),n.print(e)}iterator(){return this._nodeMap.values().iterator()}addSplitEdges(e){this.addEndpoints();for(var t=this.iterator(),n=t.next();t.hasNext();){var i=t.next(),o=this.createSplitEdge(n,i);e.add(o),n=i}}addEndpoints(){var e=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[e],e,0)}createSplitEdge(e,t){var n=t.segmentIndex-e.segmentIndex+2,o=this.edge.pts[t.segmentIndex],r=0<t.dist||!t.coord.equals2D(o);r||n--;var d=Array(n).fill(null),s=0;d[s++]=new Re(e.coord);for(var a=e.segmentIndex+1;a<=t.segmentIndex;a++)d[s++]=this.edge.pts[a];return r&&(d[s]=t.coord),new gi(d,new oi(this.edge._label))}add(e,t,n){var i=new ri(e,t,n),o=this._nodeMap.get(i);return null===o?(this._nodeMap.put(i,i),i):o}isIntersection(e){for(var t=this.iterator(),n;t.hasNext();)if(n=t.next(),n.coord.equals(e))return!0;return!1}getClass(){return di}get interfaces_(){return[]}}di.constructor_=function(){this._nodeMap=new D,this.edge=null;let e=arguments[0];this.edge=e};class si{constructor(){si.constructor_.apply(this,arguments)}static toIntArray(e){for(var t=Array(e.size()).fill(null),n=0;n<t.length;n++)t[n]=e.get(n).intValue();return t}getChainStartIndices(e){var t=0,n=new f;n.add(new E(t));do{var i=this.findChainEnd(e,t);n.add(new E(i)),t=i}while(t<e.length-1);var o=si.toIntArray(n);return o}findChainEnd(e,t){for(var n=Un.quadrant(e[t],e[t+1]),i=t+1,o;i<e.length&&(o=Un.quadrant(e[i-1],e[i]),o===n);)i++;return i-1}getClass(){return si}get interfaces_(){return[]}}si.constructor_=function(){};class ai{constructor(){ai.constructor_.apply(this,arguments)}getCoordinates(){return this.pts}getMaxX(e){var t=this.pts[this.startIndex[e]].x,n=this.pts[this.startIndex[e+1]].x;return t>n?t:n}getMinX(e){var t=this.pts[this.startIndex[e]].x,n=this.pts[this.startIndex[e+1]].x;return t<n?t:n}computeIntersectsForChain(){if(4===arguments.length){let e=arguments[0],t=arguments[1],n=arguments[2],i=arguments[3];this.computeIntersectsForChain(this.startIndex[e],this.startIndex[e+1],t,t.startIndex[n],t.startIndex[n+1],i)}else if(6===arguments.length){let n=arguments[0],i=arguments[1],o=arguments[2],r=arguments[3],d=arguments[4],s=arguments[5];if(1==i-n&&1==d-r)return s.addIntersections(this.e,n,o.e,r),null;if(!this.overlaps(n,i,o,r,d))return null;var e=pe((n+i)/2),t=pe((r+d)/2);n<e&&(r<t&&this.computeIntersectsForChain(n,e,o,r,t,s),t<d&&this.computeIntersectsForChain(n,e,o,t,d,s)),e<i&&(r<t&&this.computeIntersectsForChain(e,i,o,r,t,s),t<d&&this.computeIntersectsForChain(e,i,o,t,d,s))}}overlaps(e,t,n,i,o){return be.intersects(this.pts[e],this.pts[t],n.pts[i],n.pts[o])}getStartIndexes(){return this.startIndex}computeIntersects(e,t){for(var n=0;n<this.startIndex.length-1;n++)for(var o=0;o<e.startIndex.length-1;o++)this.computeIntersectsForChain(n,e,o,t)}getClass(){return ai}get interfaces_(){return[]}}ai.constructor_=function(){this.e=null,this.pts=null,this.startIndex=null;let t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new si;this.startIndex=e.getChainStartIndices(this.pts)};class _i{constructor(){_i.constructor_.apply(this,arguments)}static depthAtLocation(e){return e===Xt.EXTERIOR?0:e===Xt.INTERIOR?1:_i.NULL_VALUE}getDepth(e,t){return this._depth[e][t]}setDepth(e,t,n){this._depth[e][t]=n}isNull(){if(0===arguments.length){for(var e=0;2>e;e++)for(var t=0;3>t;t++)if(this._depth[e][t]!==_i.NULL_VALUE)return!1;return!0}if(1===arguments.length){let e=arguments[0];return this._depth[e][1]===_i.NULL_VALUE}if(2===arguments.length){let e=arguments[0],t=arguments[1];return this._depth[e][t]===_i.NULL_VALUE}}normalize(){for(var e=0;2>e;e++)if(!this.isNull(e)){var t=this._depth[e][1];this._depth[e][2]<t&&(t=this._depth[e][2]),0>t&&(t=0);for(var n=1,o;3>n;n++)o=0,this._depth[e][n]>t&&(o=1),this._depth[e][n]=o}}getDelta(e){return this._depth[e][Qn.RIGHT]-this._depth[e][Qn.LEFT]}getLocation(e,t){return 0>=this._depth[e][t]?Xt.EXTERIOR:Xt.INTERIOR}toString(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]}add(){if(1===arguments.length){let i=arguments[0];for(var e=0;2>e;e++)for(var t=1,n;3>t;t++)n=i.getLocation(e,t),(n===Xt.EXTERIOR||n===Xt.INTERIOR)&&(this.isNull(e,t)?this._depth[e][t]=_i.depthAtLocation(n):this._depth[e][t]+=_i.depthAtLocation(n))}else if(3===arguments.length){let e=arguments[0],t=arguments[1],n=arguments[2];n===Xt.INTERIOR&&this._depth[e][t]++}}getClass(){return _i}get interfaces_(){return[]}}_i.constructor_=function(){this._depth=[,,].fill().map(()=>[,,,]);for(var e=0;2>e;e++)for(var t=0;3>t;t++)this._depth[e][t]=_i.NULL_VALUE},_i.NULL_VALUE=-1;class li{constructor(){li.constructor_.apply(this,arguments)}setVisited(e){this._isVisited=e}setInResult(e){this._isInResult=e}isCovered(){return this._isCovered}isCoveredSet(){return this._isCoveredSet}setLabel(e){this._label=e}getLabel(){return this._label}setCovered(e){this._isCovered=e,this._isCoveredSet=!0}updateIM(e){Te.isTrue(2<=this._label.getGeometryCount(),"found partial label"),this.computeIM(e)}isInResult(){return this._isInResult}isVisited(){return this._isVisited}getClass(){return li}get interfaces_(){return[]}}li.constructor_=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){let e=arguments[0];this._label=e}};class gi extends li{constructor(){super(),gi.constructor_.apply(this,arguments)}static updateIM(){if(2===arguments.length&&arguments[1]instanceof kt&&arguments[0]instanceof oi){let e=arguments[0],t=arguments[1];t.setAtLeastIfValid(e.getLocation(0,Qn.ON),e.getLocation(1,Qn.ON),1),e.isArea()&&(t.setAtLeastIfValid(e.getLocation(0,Qn.LEFT),e.getLocation(1,Qn.LEFT),2),t.setAtLeastIfValid(e.getLocation(0,Qn.RIGHT),e.getLocation(1,Qn.RIGHT),2))}else return super.updateIM.apply(this,arguments)}getDepth(){return this._depth}getCollapsedEdge(){var e=[,,].fill(null);e[0]=this.pts[0],e[1]=this.pts[1];var t=new gi(e,oi.toLineLabel(this._label));return t}isIsolated(){return this._isIsolated}getCoordinates(){return this.pts}setIsolated(e){this._isIsolated=e}setName(e){this._name=e}equals(t){if(!(t instanceof gi))return!1;var n=t;if(this.pts.length!==n.pts.length)return!1;for(var e=!0,o=!0,r=this.pts.length,d=0;d<this.pts.length;d++)if(this.pts[d].equals2D(n.pts[d])||(e=!1),this.pts[d].equals2D(n.pts[--r])||(o=!1),!e&&!o)return!1;return!0}getCoordinate(){if(0===arguments.length)return 0<this.pts.length?this.pts[0]:null;if(1===arguments.length){let e=arguments[0];return this.pts[e]}}print(e){e.print("edge "+this._name+": "),e.print("LINESTRING (");for(var t=0;t<this.pts.length;t++)0<t&&e.print(","),e.print(this.pts[t].x+" "+this.pts[t].y);e.print(")  "+this._label+" "+this._depthDelta)}computeIM(e){gi.updateIM(this._label,e)}isCollapsed(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])}isClosed(){return this.pts[0].equals(this.pts[this.pts.length-1])}getMaximumSegmentIndex(){return this.pts.length-1}getDepthDelta(){return this._depthDelta}getNumPoints(){return this.pts.length}printReverse(e){e.print("edge "+this._name+": ");for(var t=this.pts.length-1;0<=t;t--)e.print(this.pts[t]+" ");e.println("")}getMonotoneChainEdge(){return null===this._mce&&(this._mce=new ai(this)),this._mce}getEnvelope(){if(null===this._env){this._env=new be;for(var e=0;e<this.pts.length;e++)this._env.expandToInclude(this.pts[e])}return this._env}addIntersection(e,t,n,i){var o=new Re(e.getIntersection(i)),r=t,d=e.getEdgeDistance(n,i),s=r+1;if(s<this.pts.length){var a=this.pts[s];o.equals2D(a)&&(r=s,d=0)}this.eiList.add(o,r,d)}toString(){var e=new V;e.append("edge "+this._name+": "),e.append("LINESTRING (");for(var t=0;t<this.pts.length;t++)0<t&&e.append(","),e.append(this.pts[t].x+" "+this.pts[t].y);return e.append(")  "+this._label+" "+this._depthDelta),e.toString()}isPointwiseEqual(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0}setDepthDelta(e){this._depthDelta=e}getEdgeIntersectionList(){return this.eiList}addIntersections(e,t,n){for(var o=0;o<e.getIntersectionNum();o++)this.addIntersection(e,t,n,o)}getClass(){return gi}get interfaces_(){return[]}}gi.constructor_=function(){if(this.pts=null,this._env=null,this.eiList=new di(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new _i,this._depthDelta=0,1===arguments.length){let e=arguments[0];gi.constructor_.call(this,e,null)}else if(2===arguments.length){let e=arguments[0],t=arguments[1];this.pts=e,this._label=t}};class ci extends li{constructor(){super(),ci.constructor_.apply(this,arguments)}isIncidentEdgeInResult(){for(var e=this.getEdges().getEdges().iterator(),t;e.hasNext();)if(t=e.next(),t.getEdge().isInResult())return!0;return!1}isIsolated(){return 1===this._label.getGeometryCount()}getCoordinate(){return this._coord}print(e){e.println("node "+this._coord+" lbl: "+this._label)}computeIM(){}computeMergedLocation(e,t){var n=Xt.NONE;if(n=this._label.getLocation(t),!e.isNull(t)){var i=e.getLocation(t);n!==Xt.BOUNDARY&&(n=i)}return n}setLabel(){if(2===arguments.length&&xe(arguments[1])&&xe(arguments[0])){let e=arguments[0],t=arguments[1];null===this._label?this._label=new oi(e,t):this._label.setLocation(e,t)}else return super.setLabel.apply(this,arguments)}getEdges(){return this._edges}mergeLabel(){if(arguments[0]instanceof ci){let e=arguments[0];this.mergeLabel(e._label)}else if(arguments[0]instanceof oi){let i=arguments[0];for(var e=0;2>e;e++){var t=this.computeMergedLocation(i,e),n=this._label.getLocation(e);n===Xt.NONE&&this._label.setLocation(e,t)}}}add(t){this._edges.insert(t),t.setNode(this)}setLabelBoundary(e){if(null===this._label)return null;var t=Xt.NONE;null!==this._label&&(t=this._label.getLocation(e));var n=null;n=t===Xt.BOUNDARY?Xt.INTERIOR:t===Xt.INTERIOR?Xt.BOUNDARY:Xt.BOUNDARY;this._label.setLocation(e,n)}getClass(){return ci}get interfaces_(){return[]}}ci.constructor_=function(){this._coord=null,this._edges=null;let e=arguments[0],t=arguments[1];this._coord=e,this._edges=t,this._label=new oi(0,Xt.NONE)};class ui{constructor(){ui.constructor_.apply(this,arguments)}find(e){return this.nodeMap.get(e)}addNode(){if(arguments[0]instanceof Re){let t=arguments[0];var e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof ci){let t=arguments[0];var e=this.nodeMap.get(t.getCoordinate());return null===e?(this.nodeMap.put(t.getCoordinate(),t),t):(e.mergeLabel(t),e)}}print(e){for(var t=this.iterator(),i;t.hasNext();)i=t.next(),i.print(e)}iterator(){return this.nodeMap.values().iterator()}values(){return this.nodeMap.values()}getBoundaryNodes(e){for(var t=new f,n=this.iterator(),i;n.hasNext();)i=n.next(),i.getLabel().getLocation(e)===Xt.BOUNDARY&&t.add(i);return t}add(t){var e=t.getCoordinate(),i=this.addNode(e);i.add(t)}getClass(){return ui}get interfaces_(){return[]}}ui.constructor_=function(){this.nodeMap=new D,this.nodeFact=null;let e=arguments[0];this.nodeFact=e};class pi{constructor(){pi.constructor_.apply(this,arguments)}compareDirection(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:Me.index(t._p0,t._p1,this._p1)}getDy(){return this._dy}getCoordinate(){return this._p0}setNode(e){this._node=e}print(e){var t=se(this._dy,this._dx),n=this.getClass().getName(),i=n.lastIndexOf("."),o=n.substring(i+1);e.print("  "+o+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label)}compareTo(e){return this.compareDirection(e)}getDirectedCoordinate(){return this._p1}getDx(){return this._dx}getLabel(){return this._label}getEdge(){return this._edge}getQuadrant(){return this._quadrant}getNode(){return this._node}toString(){var e=se(this._dy,this._dx),t=this.getClass().getName(),n=t.lastIndexOf("."),i=t.substring(n+1);return"  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label}computeLabel(){}init(e,t){this._p0=e,this._p1=t,this._dx=t.x-e.x,this._dy=t.y-e.y,this._quadrant=Un.quadrant(this._dx,this._dy),Te.isTrue(0!==this._dx||0!==this._dy,"EdgeEnd with identical endpoints found")}getClass(){return pi}get interfaces_(){return[r]}}pi.constructor_=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){let e=arguments[0];this._edge=e}else if(3===arguments.length){let e=arguments[0],t=arguments[1],n=arguments[2];pi.constructor_.call(this,e,t,n,null)}else if(4===arguments.length){let e=arguments[0],t=arguments[1],n=arguments[2],i=arguments[3];pi.constructor_.call(this,e),this.init(t,n),this._label=i}};class mi extends _{constructor(){if(1===arguments.length){let e=arguments[0];super(e),_.call(this,e)}else if(2===arguments.length){let e=arguments[0],t=arguments[1];super(mi.msgWithCoord(e,t)),this.name="TopologyException",this.pt=new Re(t)}}getCoordinate(){return this.pt}get interfaces_(){return[]}getClass(){return mi}static msgWithCoord(e,t){return null===t?e:e+" [ "+t+" ]"}}class yi extends pi{constructor(){super(),yi.constructor_.apply(this,arguments)}static depthFactor(e,t){return e===Xt.EXTERIOR&&t===Xt.INTERIOR?1:e===Xt.INTERIOR&&t===Xt.EXTERIOR?-1:0}getNextMin(){return this._nextMin}getDepth(e){return this._depth[e]}setVisited(e){this._isVisited=e}computeDirectedLabel(){this._label=new oi(this._edge.getLabel()),this._isForward||this._label.flip()}getNext(){return this._next}setDepth(e,t){if(-999!==this._depth[e]&&this._depth[e]!==t)throw new mi("assigned depths do not match",this.getCoordinate());this._depth[e]=t}isInteriorAreaEdge(){for(var e=!0,t=0;2>t;t++)this._label.isArea(t)&&this._label.getLocation(t,Qn.LEFT)===Xt.INTERIOR&&this._label.getLocation(t,Qn.RIGHT)===Xt.INTERIOR||(e=!1);return e}setNextMin(e){this._nextMin=e}print(e){super.print.call(this,e),e.print(" "+this._depth[Qn.LEFT]+"/"+this._depth[Qn.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")}setMinEdgeRing(e){this._minEdgeRing=e}isLineEdge(){var e=this._label.isLine(0)||this._label.isLine(1),t=!this._label.isArea(0)||this._label.allPositionsEqual(0,Xt.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,Xt.EXTERIOR);return e&&t&&n}setEdgeRing(e){this._edgeRing=e}getMinEdgeRing(){return this._minEdgeRing}getDepthDelta(){var e=this._edge.getDepthDelta();return this._isForward||(e=-e),e}setInResult(e){this._isInResult=e}getSym(){return this._sym}isForward(){return this._isForward}getEdge(){return this._edge}printEdge(e){this.print(e),e.print(" "),this._isForward?this._edge.print(e):this._edge.printReverse(e)}setSym(e){this._sym=e}setVisitedEdge(e){this.setVisited(e),this._sym.setVisited(e)}setEdgeDepths(e,t){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var i=1;e===Qn.LEFT&&(i=-1);var o=Qn.opposite(e),r=n*i;this.setDepth(e,t),this.setDepth(o,t+r)}getEdgeRing(){return this._edgeRing}isInResult(){return this._isInResult}setNext(e){this._next=e}isVisited(){return this._isVisited}getClass(){return yi}get interfaces_(){return[]}}yi.constructor_=function(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999];let e=arguments[0],t=arguments[1];if(pi.constructor_.call(this,e),this._isForward=t,t)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var i=e.getNumPoints()-1;this.init(e.getCoordinate(i),e.getCoordinate(i-1))}this.computeDirectedLabel()};class fi{constructor(){fi.constructor_.apply(this,arguments)}createNode(e){return new ci(e,null)}getClass(){return fi}get interfaces_(){return[]}}fi.constructor_=function(){};class xi{constructor(){xi.constructor_.apply(this,arguments)}static linkResultDirectedEdges(e){for(var t=e.iterator(),n;t.hasNext();)n=t.next(),n.getEdges().linkResultDirectedEdges()}printEdges(t){t.println("Edges:");for(var n=0;n<this._edges.size();n++){t.println("edge "+n+":");var o=this._edges.get(n);o.print(t),o.eiList.print(t)}}find(e){return this._nodes.find(e)}addNode(){if(arguments[0]instanceof ci){let e=arguments[0];return this._nodes.addNode(e)}if(arguments[0]instanceof Re){let e=arguments[0];return this._nodes.addNode(e)}}getNodeIterator(){return this._nodes.iterator()}linkResultDirectedEdges(){for(var e=this._nodes.iterator(),t;e.hasNext();)t=e.next(),t.getEdges().linkResultDirectedEdges()}debugPrintln(e){N.out.println(e)}isBoundaryNode(e,t){var n=this._nodes.find(t);if(null===n)return!1;var i=n.getLabel();return null!==i&&i.getLocation(e)===Xt.BOUNDARY}linkAllDirectedEdges(){for(var e=this._nodes.iterator(),t;e.hasNext();)t=e.next(),t.getEdges().linkAllDirectedEdges()}matchInSameDirection(e,t,n,i){return!!e.equals(n)&&Me.index(e,t,i)===Me.COLLINEAR&&Un.quadrant(e,t)===Un.quadrant(n,i)}getEdgeEnds(){return this._edgeEndList}debugPrint(e){N.out.print(e)}getEdgeIterator(){return this._edges.iterator()}findEdgeInSameDirection(t,n){for(var o=0;o<this._edges.size();o++){var r=this._edges.get(o),e=r.getCoordinates();if(this.matchInSameDirection(t,n,e[0],e[1]))return r;if(this.matchInSameDirection(t,n,e[e.length-1],e[e.length-2]))return r}return null}insertEdge(t){this._edges.add(t)}findEdgeEnd(t){for(var e=this.getEdgeEnds().iterator(),n;e.hasNext();)if(n=e.next(),n.getEdge()===t)return n;return null}addEdges(t){for(var n=t.iterator(),i;n.hasNext();){i=n.next(),this._edges.add(i);var o=new yi(i,!0),r=new yi(i,!1);o.setSym(r),r.setSym(o),this.add(o),this.add(r)}}add(t){this._nodes.add(t),this._edgeEndList.add(t)}getNodes(){return this._nodes.values()}findEdge(t,n){for(var o=0;o<this._edges.size();o++){var r=this._edges.get(o),e=r.getCoordinates();if(t.equals(e[0])&&n.equals(e[1]))return r}return null}getClass(){return xi}get interfaces_(){return[]}}xi.constructor_=function(){if(this._edges=new f,this._nodes=null,this._edgeEndList=new f,0===arguments.length)this._nodes=new ui(new fi());else if(1===arguments.length){let e=arguments[0];this._nodes=new ui(e)}};class hi extends xi{constructor(){super(),hi.constructor_.apply(this,arguments)}static determineBoundary(e,t){return e.isInBoundary(t)?Xt.BOUNDARY:Xt.INTERIOR}insertBoundaryPoint(e,t){var i=this._nodes.addNode(t),n=i.getLabel(),o=1,r=Xt.NONE;r=n.getLocation(e,Qn.ON),r===Xt.BOUNDARY&&o++;var d=hi.determineBoundary(this._boundaryNodeRule,o);n.setLocation(e,d)}computeSelfNodes(){if(2===arguments.length){let e=arguments[0],t=arguments[1];return this.computeSelfNodes(e,t,!1)}if(3===arguments.length){let o=arguments[0],r=arguments[1],d=arguments[2];var e=new ti(o,!0,!1);e.setIsDoneIfProperInt(d);var t=this.createEdgeSetIntersector(),n=this._parentGeom instanceof Et||this._parentGeom instanceof xt||this._parentGeom instanceof It,i=r||!n;return t.computeIntersections(this._edges,e,i),this.addSelfIntersectionNodes(this._argIndex),e}}computeSplitEdges(t){for(var n=this._edges.iterator(),i;n.hasNext();)i=n.next(),i.eiList.addSplitEdges(t)}computeEdgeIntersections(e,t,n){var i=new ti(t,n,!0);i.setBoundaryNodes(this.getBoundaryNodes(),e.getBoundaryNodes());var o=this.createEdgeSetIntersector();return o.computeIntersections(this._edges,e._edges,i),i}getGeometry(){return this._parentGeom}getBoundaryNodeRule(){return this._boundaryNodeRule}hasTooFewPoints(){return this._hasTooFewPoints}addPoint(){if(arguments[0]instanceof mt){let t=arguments[0];var e=t.getCoordinate();this.insertPoint(this._argIndex,e,Xt.INTERIOR)}else if(arguments[0]instanceof Re){let e=arguments[0];this.insertPoint(this._argIndex,e,Xt.INTERIOR)}}addPolygon(e){this.addPolygonRing(e.getExteriorRing(),Xt.EXTERIOR,Xt.INTERIOR);for(var t=0,n;t<e.getNumInteriorRing();t++)n=e.getInteriorRingN(t),this.addPolygonRing(n,Xt.INTERIOR,Xt.EXTERIOR)}addEdge(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],Xt.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],Xt.BOUNDARY)}addLineString(t){var n=Ke.removeRepeatedPoints(t.getCoordinates());if(2>n.length)return this._hasTooFewPoints=!0,this._invalidPoint=n[0],null;var i=new gi(n,new oi(this._argIndex,Xt.INTERIOR));this._lineEdgeMap.put(t,i),this.insertEdge(i),Te.isTrue(2<=n.length,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,n[0]),this.insertBoundaryPoint(this._argIndex,n[n.length-1])}getInvalidPoint(){return this._invalidPoint}getBoundaryPoints(){for(var e=this.getBoundaryNodes(),t=Array(e.size()).fill(null),n=0,o=e.iterator(),r;o.hasNext();)r=o.next(),t[n++]=r.getCoordinate().copy();return t}getBoundaryNodes(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes}addSelfIntersectionNode(e,t,n){return this.isBoundaryNode(e,t)?null:void(n===Xt.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(e,t):this.insertPoint(e,t,n))}addPolygonRing(t,n,i){if(t.isEmpty())return null;var o=Ke.removeRepeatedPoints(t.getCoordinates());if(4>o.length)return this._hasTooFewPoints=!0,this._invalidPoint=o[0],null;var r=n,d=i;Me.isCCW(o)&&(r=i,d=n);var s=new gi(o,new oi(this._argIndex,Xt.BOUNDARY,r,d));this._lineEdgeMap.put(t,s),this.insertEdge(s),this.insertPoint(this._argIndex,o[0],Xt.BOUNDARY)}insertPoint(e,t,i){var o=this._nodes.addNode(t),n=o.getLabel();null===n?o._label=new oi(e,i):n.setLocation(e,i)}createEdgeSetIntersector(){return new ni}addSelfIntersectionNodes(t){for(var n=this._edges.iterator();n.hasNext();)for(var i=n.next(),e=i.getLabel().getLocation(t),o=i.eiList.iterator(),r;o.hasNext();)r=o.next(),this.addSelfIntersectionNode(t,r.coord,e)}add(){if(1===arguments.length&&arguments[0]instanceof Ue){let e=arguments[0];if(e.isEmpty())return null;if(e instanceof It&&(this._useBoundaryDeterminationRule=!1),e instanceof xt)this.addPolygon(e);else if(e instanceof ut)this.addLineString(e);else if(e instanceof mt)this.addPoint(e);else if(e instanceof ht)this.addCollection(e);else if(e instanceof st)this.addCollection(e);else if(e instanceof It)this.addCollection(e);else if(e instanceof dt)this.addCollection(e);else throw new UnsupportedOperationException(e.getClass().getName())}else return super.add.apply(this,arguments)}addCollection(e){for(var t=0,n;t<e.getNumGeometries();t++)n=e.getGeometryN(t),this.add(n)}locate(e){return l(this._parentGeom,ft)&&50<this._parentGeom.getNumGeometries()?(null===this._areaPtLocator&&(this._areaPtLocator=new mn(this._parentGeom)),this._areaPtLocator.locate(e)):this._ptLocator.locate(e,this._parentGeom)}findEdge(){if(1===arguments.length&&arguments[0]instanceof ut){let e=arguments[0];return this._lineEdgeMap.get(e)}return super.findEdge.apply(this,arguments)}getClass(){return hi}get interfaces_(){return[]}}hi.constructor_=function(){if(this._parentGeom=null,this._lineEdgeMap=new Q,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Zn,2===arguments.length){let e=arguments[0],t=arguments[1];hi.constructor_.call(this,e,t,ke.OGC_SFS_BOUNDARY_RULE)}else if(3===arguments.length){let e=arguments[0],t=arguments[1],n=arguments[2];this._argIndex=e,this._parentGeom=t,this._boundaryNodeRule=n,null!==t&&this.add(t)}};var Ei=/*#__PURE__*/Object.freeze({GeometryGraph:hi});class Ii{constructor(){Ii.constructor_.apply(this,arguments)}visit(){}getClass(){return Ii}get interfaces_(){return[]}}Ii.constructor_=function(){};class Ni{constructor(){Ni.constructor_.apply(this,arguments)}isRepeated(){return 1<this._count}getRight(){return this._right}getCoordinate(){return this._p}setLeft(e){this._left=e}getX(){return this._p.x}getData(){return this._data}getCount(){return this._count}getLeft(){return this._left}getY(){return this._p.y}increment(){++this._count}setRight(e){this._right=e}getClass(){return Ni}get interfaces_(){return[]}}Ni.constructor_=function(){if(this._p=null,this._data=null,this._left=null,this._right=null,this._count=null,2===arguments.length){let e=arguments[0],t=arguments[1];this._p=new Re(e),this._left=null,this._right=null,this._count=1,this._data=t}else if(3===arguments.length){let e=arguments[0],t=arguments[1],n=arguments[2];this._p=new Re(e,t),this._left=null,this._right=null,this._count=1,this._data=n}};class Li{constructor(){Li.constructor_.apply(this,arguments)}static toCoordinates(){if(1===arguments.length){let e=arguments[0];return Li.toCoordinates(e,!1)}if(2===arguments.length){let i=arguments[0],d=arguments[1];for(var e=new ve,t=i.iterator();t.hasNext();)for(var n=t.next(),o=d?n.getCount():1,r=0;r<o;r++)e.add(n.getCoordinate(),!0);return e.toCoordinateArray()}}insert(){if(1===arguments.length){let e=arguments[0];return this.insert(e,null)}if(2===arguments.length){let t=arguments[0],n=arguments[1];if(null===this._root)return this._root=new Ni(t,n),this._root;if(0<this._tolerance){var e=this.findBestMatchNode(t);if(null!==e)return e.increment(),e}return this.insertExact(t,n)}}query(){if(1===arguments.length){let t=arguments[0];var e=new f;return this.query(t,e),e}if(2===arguments.length)if(arguments[0]instanceof be&&l(arguments[1],p)){let e=arguments[0],t=arguments[1];this.queryNode(this._root,e,!0,new class{get interfaces_(){return[Ii]}visit(e){t.add(e)}})}else if(arguments[0]instanceof be&&l(arguments[1],Ii)){let e=arguments[0],t=arguments[1];this.queryNode(this._root,e,!0,t)}}queryNode(e,t,n,i){if(null===e)return null;var o=null,r=null,d=null;n?(o=t.getMinX(),r=t.getMaxX(),d=e.getX()):(o=t.getMinY(),r=t.getMaxY(),d=e.getY());var s=o<d,a=d<=r;s&&this.queryNode(e.getLeft(),t,!n,i),t.contains(e.getCoordinate())&&i.visit(e),a&&this.queryNode(e.getRight(),t,!n,i)}findBestMatchNode(e){var t=new Ci(e,this._tolerance);return this.query(t.queryEnvelope(),t),t.getNode()}isEmpty(){return null===this._root}insertExact(e,t){for(var n=this._root,i=this._root,o=!0,r=!0;null!==n;){if(null!==n){var d=e.distance(n.getCoordinate())<=this._tolerance;if(d)return n.increment(),n}r=o?e.x<n.getX():e.y<n.getY(),i=n,n=r?n.getLeft():n.getRight(),o=!o}++this._numberOfNodes;var s=new Ni(e,t);return r?i.setLeft(s):i.setRight(s),s}getClass(){return Li}get interfaces_(){return[]}}class Ci{constructor(){Ci.constructor_.apply(this,arguments)}visit(e){var t=this._p.distance(e.getCoordinate()),n=t<=this._tolerance;if(!n)return null;var i=!1;(null===this._matchNode||t<this._matchDist||null!==this._matchNode&&t===this._matchDist&&1>e.getCoordinate().compareTo(this._matchNode.getCoordinate()))&&(i=!0),i&&(this._matchNode=e,this._matchDist=t)}queryEnvelope(){var e=new be(this._p);return e.expandBy(this._tolerance),e}getNode(){return this._matchNode}getClass(){return Ci}get interfaces_(){return[Ii]}}Ci.constructor_=function(){this._tolerance=null,this._matchNode=null,this._matchDist=0,this._p=null;let e=arguments[0],t=arguments[1];this._p=e,this._tolerance=t},Li.BestMatchVisitor=Ci,Li.constructor_=function(){if(this._root=null,this._numberOfNodes=null,this._tolerance=null,0===arguments.length)Li.constructor_.call(this,0);else if(1===arguments.length){let e=arguments[0];this._tolerance=e}};var Si=/*#__PURE__*/Object.freeze({KdTree:Li});class Ti{constructor(){Ti.constructor_.apply(this,arguments)}static getSubnodeIndex(e,t,n){var i=-1;return e.getMinX()>=t&&(e.getMinY()>=n&&(i=3),e.getMaxY()<=n&&(i=1)),e.getMaxX()<=t&&(e.getMinY()>=n&&(i=2),e.getMaxY()<=n&&(i=0)),i}hasChildren(){for(var e=0;4>e;e++)if(null!==this._subnode[e])return!0;return!1}isPrunable(){return!(this.hasChildren()||this.hasItems())}addAllItems(e){e.addAll(this._items);for(var t=0;4>t;t++)null!==this._subnode[t]&&this._subnode[t].addAllItems(e);return e}getNodeCount(){for(var e=0,t=0;4>t;t++)null!==this._subnode[t]&&(e+=this._subnode[t].size());return e+1}size(){for(var e=0,t=0;4>t;t++)null!==this._subnode[t]&&(e+=this._subnode[t].size());return e+this._items.size()}addAllItemsFromOverlapping(e,t){if(!this.isSearchMatch(e))return null;t.addAll(this._items);for(var n=0;4>n;n++)null!==this._subnode[n]&&this._subnode[n].addAllItemsFromOverlapping(e,t)}visitItems(e,t){for(var n=this._items.iterator();n.hasNext();)t.visitItem(n.next())}hasItems(){return!this._items.isEmpty()}remove(e,t){if(!this.isSearchMatch(e))return!1;for(var n=!1,o=0;4>o;o++)if(null!==this._subnode[o]&&(n=this._subnode[o].remove(e,t),n)){this._subnode[o].isPrunable()&&(this._subnode[o]=null);break}return n?n:(n=this._items.remove(t),n)}visit(e,t){if(!this.isSearchMatch(e))return null;this.visitItems(e,t);for(var n=0;4>n;n++)null!==this._subnode[n]&&this._subnode[n].visit(e,t)}getItems(){return this._items}depth(){for(var e=0,t=0;4>t;t++)if(null!==this._subnode[t]){var n=this._subnode[t].depth();n>e&&(e=n)}return e+1}isEmpty(){var e=!0;if(!this._items.isEmpty())e=!1;else for(var t=0;4>t;t++)if(null!==this._subnode[t]&&!this._subnode[t].isEmpty()){e=!1;break}return e}add(e){this._items.add(e)}getClass(){return Ti}get interfaces_(){return[a]}}Ti.constructor_=function(){this._items=new f,this._subnode=[,,,,].fill(null)},ee.exponent=function(e){return te(64,e)-1023},ee.powerOf2=function(e){return Le(2,e)};class Ri{constructor(){Ri.constructor_.apply(this,arguments)}static computeQuadLevel(e){var t=e.getWidth(),n=e.getHeight(),i=t>n?t:n,o=ee.exponent(i)+1;return o}getLevel(){return this._level}computeKey(){if(1===arguments.length){let e=arguments[0];for(this._level=Ri.computeQuadLevel(e),this._env=new be,this.computeKey(this._level,e);!this._env.contains(e);)this._level+=1,this.computeKey(this._level,e)}else if(2===arguments.length){let t=arguments[0],n=arguments[1];var e=ee.powerOf2(t);this._pt.x=fe(n.getMinX()/e)*e,this._pt.y=fe(n.getMinY()/e)*e,this._env.init(this._pt.x,this._pt.x+e,this._pt.y,this._pt.y+e)}}getEnvelope(){return this._env}getCentre(){return new Re((this._env.getMinX()+this._env.getMaxX())/2,(this._env.getMinY()+this._env.getMaxY())/2)}getPoint(){return this._pt}getClass(){return Ri}get interfaces_(){return[]}}Ri.constructor_=function(){this._pt=new Re,this._level=0,this._env=null;let e=arguments[0];this.computeKey(e)};class Oi extends Ti{constructor(){super(),Oi.constructor_.apply(this,arguments)}static createNode(e){var t=new Ri(e),n=new Oi(t.getEnvelope(),t.getLevel());return n}static createExpanded(e,t){var n=new be(t);null!==e&&n.expandToInclude(e._env);var i=Oi.createNode(n);return null!==e&&i.insertNode(e),i}find(e){var t=Ti.getSubnodeIndex(e,this._centrex,this._centrey);if(-1===t)return this;if(null!==this._subnode[t]){var n=this._subnode[t];return n.find(e)}return this}isSearchMatch(e){return null!==e&&this._env.intersects(e)}getSubnode(e){return null===this._subnode[e]&&(this._subnode[e]=this.createSubnode(e)),this._subnode[e]}getEnvelope(){return this._env}getNode(e){var t=Ti.getSubnodeIndex(e,this._centrex,this._centrey);if(-1!==t){var n=this.getSubnode(t);return n.getNode(e)}return this}createSubnode(e){var t=0,n=0,i=0,o=0;0===e?(t=this._env.getMinX(),n=this._centrex,i=this._env.getMinY(),o=this._centrey):1===e?(t=this._centrex,n=this._env.getMaxX(),i=this._env.getMinY(),o=this._centrey):2===e?(t=this._env.getMinX(),n=this._centrex,i=this._centrey,o=this._env.getMaxY()):3===e?(t=this._centrex,n=this._env.getMaxX(),i=this._centrey,o=this._env.getMaxY()):void 0;var r=new be(t,n,i,o),d=new Oi(r,this._level-1);return d}insertNode(e){Te.isTrue(null===this._env||this._env.contains(e._env));var t=Ti.getSubnodeIndex(e._env,this._centrex,this._centrey);if(e._level===this._level-1)this._subnode[t]=e;else{var n=this.createSubnode(t);n.insertNode(e),this._subnode[t]=n}}getClass(){return Oi}get interfaces_(){return[]}}Oi.constructor_=function(){this._env=null,this._centrex=null,this._centrey=null,this._level=null;let e=arguments[0],t=arguments[1];this._env=e,this._level=t,this._centrex=(e.getMinX()+e.getMaxX())/2,this._centrey=(e.getMinY()+e.getMaxY())/2};class Pi{constructor(){Pi.constructor_.apply(this,arguments)}static isZeroWidth(e,t){var n=t-e;if(0==n)return!0;var i=Ee(Ne(e),Ne(t)),o=ee.exponent(n/i);return o<=Pi.MIN_BINARY_EXPONENT}getClass(){return Pi}get interfaces_(){return[]}}Pi.constructor_=function(){},Pi.MIN_BINARY_EXPONENT=-50;class vi extends Ti{constructor(){super(),vi.constructor_.apply(this,arguments)}insert(e,t){var n=Ti.getSubnodeIndex(e,vi.origin.x,vi.origin.y);if(-1===n)return this.add(t),null;var i=this._subnode[n];if(null===i||!i.getEnvelope().contains(e)){var o=Oi.createExpanded(i,e);this._subnode[n]=o}this.insertContained(this._subnode[n],e,t)}isSearchMatch(){return!0}insertContained(e,t,n){Te.isTrue(e.getEnvelope().contains(t));var i=Pi.isZeroWidth(t.getMinX(),t.getMaxX()),o=Pi.isZeroWidth(t.getMinY(),t.getMaxY()),r=null;r=i||o?e.find(t):e.getNode(t),r.add(n)}getClass(){return vi}get interfaces_(){return[]}}vi.constructor_=function(){},vi.origin=new Re(0,0);class bi{constructor(){bi.constructor_.apply(this,arguments)}insert(){}remove(){}query(){}getClass(){return bi}get interfaces_(){return[]}}bi.constructor_=function(){};class Di{constructor(){Di.constructor_.apply(this,arguments)}static ensureExtent(e,t){var n=e.getMinX(),i=e.getMaxX(),o=e.getMinY(),r=e.getMaxY();return n!==i&&o!==r?e:(n===i&&(n-=t/2,i=n+t/2),o===r&&(o-=t/2,r=o+t/2),new be(n,i,o,r))}size(){return null===this._root?0:this._root.size()}insert(e,t){this.collectStats(e);var n=Di.ensureExtent(e,this._minExtent);this._root.insert(n,t)}query(){if(1===arguments.length){let t=arguments[0];var e=new un;return this.query(t,e),e.getItems()}if(2===arguments.length){let e=arguments[0],t=arguments[1];this._root.visit(e,t)}}queryAll(){var e=new f;return this._root.addAllItems(e),e}remove(e,t){var n=Di.ensureExtent(e,this._minExtent);return this._root.remove(n,t)}collectStats(e){var t=e.getWidth();t<this._minExtent&&0<t&&(this._minExtent=t);var n=e.getHeight();n<this._minExtent&&0<n&&(this._minExtent=n)}depth(){return null===this._root?0:this._root.depth()}isEmpty(){return null===this._root||this._root.isEmpty()}getClass(){return Di}get interfaces_(){return[bi,a]}}Di.constructor_=function(){this._root=null,this._minExtent=1,this._root=new vi},Di.serialVersionUID=-7461163625812743e3;var Ai=/*#__PURE__*/Object.freeze({Quadtree:Di});class Fi{constructor(){Fi.constructor_.apply(this,arguments)}getBounds(){}getClass(){return Fi}get interfaces_(){return[]}}Fi.constructor_=function(){};class Mi{constructor(){Mi.constructor_.apply(this,arguments)}getItem(){return this._item}getBounds(){return this._bounds}getClass(){return Mi}get interfaces_(){return[Fi,a]}}Mi.constructor_=function(){this._bounds=null,this._item=null;let e=arguments[0],t=arguments[1];this._bounds=e,this._item=t};class Gi{constructor(){Gi.constructor_.apply(this,arguments)}poll(){if(this.isEmpty())return null;var e=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),e}size(){return this._size}reorder(e){for(var t=null,n=this._items.get(e);2*e<=this._size&&(t=2*e,t!==this._size&&0>this._items.get(t+1).compareTo(this._items.get(t))&&t++,0>this._items.get(t).compareTo(n));e=t)this._items.set(e,this._items.get(t));this._items.set(e,n)}clear(){this._size=0,this._items.clear()}peek(){if(this.isEmpty())return null;var e=this._items.get(1);return e}isEmpty(){return 0===this._size}add(e){this._items.add(null),this._size+=1;var t=this._size;for(this._items.set(0,e);0>e.compareTo(this._items.get(pe(t/2)));t/=2)this._items.set(t,this._items.get(pe(t/2)));this._items.set(t,e)}getClass(){return Gi}get interfaces_(){return[]}}Gi.constructor_=function(){this._size=null,this._items=null,this._size=0,this._items=new f,this._items.add(null)};class Yi{constructor(){Yi.constructor_.apply(this,arguments)}getLevel(){return this._level}size(){return this._childBoundables.size()}getChildBoundables(){return this._childBoundables}addChildBoundable(e){Te.isTrue(null===this._bounds),this._childBoundables.add(e)}isEmpty(){return this._childBoundables.isEmpty()}getBounds(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds}getClass(){return Yi}get interfaces_(){return[Fi,a]}}Yi.constructor_=function(){if(this._childBoundables=new f,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){let e=arguments[0];this._level=e}},Yi.serialVersionUID=6493722185909574e3;class zi{constructor(){zi.constructor_.apply(this,arguments)}static area(e){return e.getBounds().getArea()}static isComposite(e){return e instanceof Yi}expandToQueue(e,n){var i=zi.isComposite(this._boundable1),o=zi.isComposite(this._boundable2);if(i&&o)return zi.area(this._boundable1)>zi.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,e,n),null):(this.expand(this._boundable2,this._boundable1,e,n),null);if(i)return this.expand(this._boundable1,this._boundable2,e,n),null;if(o)return this.expand(this._boundable2,this._boundable1,e,n),null;throw new t("neither boundable is composite")}isLeaves(){return!(zi.isComposite(this._boundable1)||zi.isComposite(this._boundable2))}compareTo(e){var t=e;return this._distance<t._distance?-1:this._distance>t._distance?1:0}expand(e,t,n,o){for(var r=e.getChildBoundables(),d=r.iterator();d.hasNext();){var i=d.next(),s=new zi(i,t,this._itemDistance);s.getDistance()<o&&n.add(s)}}getBoundable(e){return 0===e?this._boundable1:this._boundable2}getDistance(){return this._distance}distance(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())}getClass(){return zi}get interfaces_(){return[r]}}zi.constructor_=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;let e=arguments[0],t=arguments[1],n=arguments[2];this._boundable1=e,this._boundable2=t,this._itemDistance=n,this._distance=this.distance()};class qi{constructor(){qi.constructor_.apply(this,arguments)}static compareDoubles(e,t){return e>t?1:e<t?-1:0}queryInternal(){if(l(arguments[2],on)&&arguments[0]instanceof Object&&arguments[1]instanceof Yi){let i=arguments[0],o=arguments[1],r=arguments[2];for(var e=o.getChildBoundables(),t=0,n;t<e.size();t++)(n=e.get(t),!!this.getIntersectsOp().intersects(n.getBounds(),i))&&(n instanceof Yi?this.queryInternal(i,n,r):n instanceof Mi?r.visitItem(n.getItem()):Te.shouldNeverReachHere())}else if(l(arguments[2],p)&&arguments[0]instanceof Object&&arguments[1]instanceof Yi){let i=arguments[0],o=arguments[1],r=arguments[2];for(var e=o.getChildBoundables(),t=0,n;t<e.size();t++)(n=e.get(t),!!this.getIntersectsOp().intersects(n.getBounds(),i))&&(n instanceof Yi?this.queryInternal(i,n,r):n instanceof Mi?r.add(n.getItem()):Te.shouldNeverReachHere())}}getNodeCapacity(){return this._nodeCapacity}lastNode(e){return e.get(e.size()-1)}size(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){let i=arguments[0];for(var e=0,t=i.getChildBoundables().iterator(),n;t.hasNext();)n=t.next(),n instanceof Yi?e+=this.size(n):n instanceof Mi&&(e+=1);return e}}removeItem(e,t){for(var n=null,o=e.getChildBoundables().iterator(),i;o.hasNext();)i=o.next(),i instanceof Mi&&i.getItem()===t&&(n=i);return null!==n&&(e.getChildBoundables().remove(n),!0)}itemsTree(){if(0===arguments.length){this.build();var e=this.itemsTree(this._root);return null===e?new f:e}if(1===arguments.length){let e=arguments[0];for(var t=new f,n=e.getChildBoundables().iterator(),i;n.hasNext();)if(i=n.next(),i instanceof Yi){var o=this.itemsTree(i);null!==o&&t.add(o)}else i instanceof Mi?t.add(i.getItem()):Te.shouldNeverReachHere();return 0>=t.size()?null:t}}insert(e,t){Te.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Mi(e,t))}boundablesAtLevel(){if(1===arguments.length){let t=arguments[0];var e=new f;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){let e=arguments[0],i=arguments[1],o=arguments[2];if(Te.isTrue(-2<e),i.getLevel()===e)return o.add(i),null;for(var t=i.getChildBoundables().iterator(),n;t.hasNext();)n=t.next(),n instanceof Yi?this.boundablesAtLevel(e,n,o):(Te.isTrue(n instanceof Mi),-1===e&&o.add(n));return null}}query(){if(1===arguments.length){let t=arguments[0];this.build();var e=new f;return this.isEmpty()?e:(this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.queryInternal(t,this._root,e),e)}if(2===arguments.length){let e=arguments[0],t=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),e)&&this.queryInternal(e,this._root,t)}}build(){return this._built?null:void(this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0)}getRoot(){return this.build(),this._root}remove(){if(2===arguments.length){let e=arguments[0],t=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),e)&&this.remove(e,this._root,t)}if(3===arguments.length){let o=arguments[0],r=arguments[1],d=arguments[2];var e=this.removeItem(r,d);if(e)return!0;for(var t=null,n=r.getChildBoundables().iterator(),i;n.hasNext();)if((i=n.next(),!!this.getIntersectsOp().intersects(i.getBounds(),o))&&i instanceof Yi&&(e=this.remove(o,i,d),e)){t=i;break}return null!==t&&t.getChildBoundables().isEmpty()&&r.getChildBoundables().remove(t),e}}createHigherLevels(e,t){Te.isTrue(!e.isEmpty());var n=this.createParentBoundables(e,t+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,t+1)}depth(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){let o=arguments[0];for(var e=0,t=o.getChildBoundables().iterator(),n;t.hasNext();)if(n=t.next(),n instanceof Yi){var i=this.depth(n);i>e&&(e=i)}return e+1}}createParentBoundables(e,t){Te.isTrue(!e.isEmpty());var n=new f;n.add(this.createNode(t));var o=new f(e);_n.sort(o,this.getComparator());for(var r=o.iterator(),i;r.hasNext();)i=r.next(),this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(t)),this.lastNode(n).addChildBoundable(i);return n}isEmpty(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()}getClass(){return qi}get interfaces_(){return[a]}}qi.IntersectsOp=function(){},qi.constructor_=function(){if(this._root=null,this._built=!1,this._itemBoundables=new f,this._nodeCapacity=null,0===arguments.length)qi.constructor_.call(this,qi.DEFAULT_NODE_CAPACITY);else if(1===arguments.length){let e=arguments[0];Te.isTrue(1<e,"Node capacity must be greater than 1"),this._nodeCapacity=e}},qi.serialVersionUID=-3886435814360241e3,qi.DEFAULT_NODE_CAPACITY=10;class Bi{constructor(){Bi.constructor_.apply(this,arguments)}distance(){}getClass(){return Bi}get interfaces_(){return[]}}Bi.constructor_=function(){};class Vi extends qi{constructor(){super(),Vi.constructor_.apply(this,arguments)}static centreX(t){return Vi.avg(t.getMinX(),t.getMaxX())}static avg(e,t){return(e+t)/2}static getItems(e){for(var t=Array(e.size()).fill(null),n=0,i;!e.isEmpty();)i=e.poll(),t[n]=i.getBoundable(0).getItem(),n++;return t}static centreY(t){return Vi.avg(t.getMinY(),t.getMaxY())}createParentBoundablesFromVerticalSlices(e,t){Te.isTrue(0<e.length);for(var n=new f,o=0;o<e.length;o++)n.addAll(this.createParentBoundablesFromVerticalSlice(e[o],t));return n}createNode(e){return new Ui(e)}size(){return 0===arguments.length?super.size.call(this):super.size.apply(this,arguments)}insert(){if(2===arguments.length&&arguments[1]instanceof Object&&arguments[0]instanceof be){let e=arguments[0],t=arguments[1];if(e.isNull())return null;super.insert.call(this,e,t)}else return super.insert.apply(this,arguments)}getIntersectsOp(){return Vi.intersectsOp}verticalSlices(e,t){for(var n=pe(ue(e.size()/t)),o=Array(t).fill(null),r=e.iterator(),i=0;i<t;i++){o[i]=new f;for(var d=0,s;r.hasNext()&&d<n;)s=r.next(),o[i].add(s),d++}return o}query(){if(1===arguments.length){let e=arguments[0];return super.query.call(this,e)}if(2===arguments.length){let e=arguments[0],t=arguments[1];super.query.call(this,e,t)}}getComparator(){return Vi.yComparator}createParentBoundablesFromVerticalSlice(e,t){return super.createParentBoundables.call(this,e,t)}remove(){if(2===arguments.length&&arguments[1]instanceof Object&&arguments[0]instanceof be){let e=arguments[0],t=arguments[1];return super.remove.call(this,e,t)}return super.remove.apply(this,arguments)}depth(){return 0===arguments.length?super.depth.call(this):super.depth.apply(this,arguments)}createParentBoundables(e,t){Te.isTrue(!e.isEmpty());var n=pe(ue(e.size()/this.getNodeCapacity())),i=new f(e);_n.sort(i,Vi.xComparator);var o=this.verticalSlices(i,pe(ue(_e(n))));return this.createParentBoundablesFromVerticalSlices(o,t)}nearestNeighbour(){if(1===arguments.length){if(l(arguments[0],Bi)){let t=arguments[0];var e=new zi(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(e)}if(arguments[0]instanceof zi){let e=arguments[0];return this.nearestNeighbour(e,o.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof Vi&&l(arguments[1],Bi)){let t=arguments[0],n=arguments[1];var e=new zi(this.getRoot(),t.getRoot(),n);return this.nearestNeighbour(e)}if(arguments[0]instanceof zi&&"number"==typeof arguments[1]){let e=arguments[0],o=arguments[1];var t=o,n=null,i=new Gi;for(i.add(e);!i.isEmpty()&&0<t;){var r=i.poll(),d=r.getDistance();if(d>=t)break;r.isLeaves()?(t=d,n=r):r.expandToQueue(i,t)}return[n.getBoundable(0).getItem(),n.getBoundable(1).getItem()]}if(arguments[0]instanceof zi&&xe(arguments[1])){let e=arguments[0],t=arguments[1];return this.nearestNeighbour(e,o.POSITIVE_INFINITY,t)}}else if(3===arguments.length){if(l(arguments[2],Bi)&&arguments[0]instanceof be&&arguments[1]instanceof Object){let t=arguments[0],n=arguments[1],i=arguments[2];var s=new Mi(t,n),e=new zi(this.getRoot(),s,i);return this.nearestNeighbour(e)[0]}if(xe(arguments[2])&&arguments[0]instanceof zi&&"number"==typeof arguments[1]){let e=arguments[0],n=arguments[1],o=arguments[2];var t=n,i=new Gi;i.add(e);for(var a=new Gi;!i.isEmpty()&&0<=t;){var r=i.poll(),d=r.getDistance();if(d>=t)break;if(!r.isLeaves())r.expandToQueue(i,t);else if(a.size()<o)a.add(r);else{var _=a.peek();_.getDistance()>d&&(a.poll(),a.add(r));var g=a.peek();t=g.getDistance()}}return Vi.getItems(a)}}else if(4===arguments.length){let t=arguments[0],n=arguments[1],i=arguments[2],o=arguments[3];var s=new Mi(t,n),e=new zi(this.getRoot(),s,i);return this.nearestNeighbour(e,o)}}getClass(){return Vi}get interfaces_(){return[bi,a]}}class Ui extends Yi{constructor(){super(),Ui.constructor_.apply(this,arguments)}computeBounds(){for(var e=null,t=this.getChildBoundables().iterator(),n;t.hasNext();)n=t.next(),null===e?e=new be(n.getBounds()):e.expandToInclude(n.getBounds());return e}getClass(){return Ui}get interfaces_(){return[]}}Ui.constructor_=function(){let e=arguments[0];Yi.constructor_.call(this,e)},Vi.STRtreeNode=Ui,Vi.constructor_=function(){if(0===arguments.length)Vi.constructor_.call(this,Vi.DEFAULT_NODE_CAPACITY);else if(1===arguments.length){let e=arguments[0];qi.constructor_.call(this,e)}},Vi.serialVersionUID=259274702368956900,Vi.xComparator=new class{get interfaces_(){return[s]}compare(e,t){return qi.compareDoubles(Vi.centreX(e.getBounds()),Vi.centreX(t.getBounds()))}},Vi.yComparator=new class{get interfaces_(){return[s]}compare(e,t){return qi.compareDoubles(Vi.centreY(e.getBounds()),Vi.centreY(t.getBounds()))}},Vi.intersectsOp=new class{get interfaces_(){return[IntersectsOp]}intersects(e,t){return e.intersects(t)}},Vi.DEFAULT_NODE_CAPACITY=10;var Xi=/*#__PURE__*/Object.freeze({STRtree:Vi}),ki=/*#__PURE__*/Object.freeze({kdtree:Si,quadtree:Ai,strtree:Xi});const Hi=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"];/**
   * Class for reading and writing Well-Known Text.Create a new parser for GeoJSON
   * NOTE: Adapted from OpenLayers 2.11 implementation.
   */ /**
   * Create a new parser for GeoJSON
   *
   * @param {GeometryFactory} geometryFactory
   * @return An instance of GeoJsonParser.
   * @constructor
   * @private
   */class wi{constructor(e){this.geometryFactory=e||new Ft}/**
     * Deserialize a GeoJSON object and return the Geometry or Feature(Collection) with JSTS Geometries
     *
     * @param {}
     *          A GeoJSON object.
     * @return {} A Geometry instance or object representing a Feature(Collection) with Geometry instances.
     * @private
     */read(e){let t="string"==typeof e?JSON.parse(e):e;const n=t.type;if(!Wi[n])throw new Error("Unknown GeoJSON type: "+t.type);return-1===Hi.indexOf(n)?"GeometryCollection"===n?Wi[n].call(this,t.geometries):Wi[n].call(this,t):Wi[n].call(this,t.coordinates);// feature or feature collection
}/**
     * Serialize a Geometry object into GeoJSON
     *
     * @param {Geometry}
     *          geometry A Geometry or array of Geometries.
     * @return {Object} A GeoJSON object represting the input Geometry/Geometries.
     * @private
     */write(e){const t=e.getGeometryType();if(!ji[t])throw new Error("Geometry is not supported");return ji[t].call(this,e)}}const Wi={/**
     * Parse a GeoJSON Feature object
     *
     * @param {Object}
     *          obj Object to parse.
     *
     * @return {Object} Feature with geometry/bbox converted to JSTS Geometries.
     */Feature:function(e){const t={};for(let n in e)t[n]=e[n];if(e.geometry){const n=e.geometry.type;if(!Wi[n])throw new Error("Unknown GeoJSON type: "+e.type);t.geometry=this.read(e.geometry)}return e.bbox&&(t.bbox=Wi.bbox.call(this,e.bbox)),t},/**
     * Parse a GeoJSON FeatureCollection object
     *
     * @param {Object}
     *          obj Object to parse.
     *
     * @return {Object} FeatureCollection with geometry/bbox converted to JSTS Geometries.
     */FeatureCollection:function(e){const t={};if(e.features){t.features=[];for(let n=0;n<e.features.length;++n)t.features.push(this.read(e.features[n]))}return e.bbox&&(t.bbox=this.parse.bbox.call(this,e.bbox)),t},/**
     * Convert the ordinates in an array to an array of Coordinates
     *
     * @param {Array}
     *          array Array with {Number}s.
     *
     * @return {Array} Array with Coordinates.
     */coordinates:function(e){const t=[];for(let n=0;n<e.length;++n){const i=e[n];t.push(new Re(i[0],i[1]))}return t},/**
     * Convert the bbox to a LinearRing
     *
     * @param {Array}
     *          array Array with [xMin, yMin, xMax, yMax].
     *
     * @return {Array} Array with Coordinates.
     */bbox:function(e){return this.geometryFactory.createLinearRing([new Re(e[0],e[1]),new Re(e[2],e[1]),new Re(e[2],e[3]),new Re(e[0],e[3]),new Re(e[0],e[1])])},/**
     * Convert an Array with ordinates to a Point
     *
     * @param {Array}
     *          array Array with ordinates.
     *
     * @return {Point} Point.
     */Point:function(e){const t=new Re(e[0],e[1]);return this.geometryFactory.createPoint(t)},/**
     * Convert an Array with coordinates to a MultiPoint
     *
     * @param {Array}
     *          array Array with coordinates.
     *
     * @return {MultiPoint} MultiPoint.
     */MultiPoint:function(e){const t=[];for(let n=0;n<e.length;++n)t.push(Wi.Point.call(this,e[n]));return this.geometryFactory.createMultiPoint(t)},/**
     * Convert an Array with coordinates to a LineString
     *
     * @param {Array}
     *          array Array with coordinates.
     *
     * @return {LineString} LineString.
     */LineString:function(e){const t=Wi.coordinates.call(this,e);return this.geometryFactory.createLineString(t)},/**
     * Convert an Array with coordinates to a MultiLineString
     *
     * @param {Array}
     *          array Array with coordinates.
     *
     * @return {MultiLineString} MultiLineString.
     */MultiLineString:function(e){const t=[];for(let n=0;n<e.length;++n)t.push(Wi.LineString.call(this,e[n]));return this.geometryFactory.createMultiLineString(t)},/**
     * Convert an Array to a Polygon
     *
     * @param {Array}
     *          array Array with shell and holes.
     *
     * @return {Polygon} Polygon.
     */Polygon:function(e){const t=Wi.coordinates.call(this,e[0]),n=this.geometryFactory.createLinearRing(t),o=[];for(let t=1;t<e.length;++t){var r=e[t],d=Wi.coordinates.call(this,r),s=this.geometryFactory.createLinearRing(d);o.push(s)}return this.geometryFactory.createPolygon(n,o)},/**
     * Convert an Array to a MultiPolygon
     *
     * @param {Array}
     *          array Array of arrays with shell and rings.
     *
     * @return {MultiPolygon} MultiPolygon.
     */MultiPolygon:function(e){const t=[];for(let n=0;n<e.length;++n){const i=e[n];t.push(Wi.Polygon.call(this,i))}return this.geometryFactory.createMultiPolygon(t)},/**
     * Convert an Array to a GeometryCollection
     *
     * @param {Array}
     *          array Array of GeoJSON geometries.
     *
     * @return {GeometryCollection} GeometryCollection.
     */GeometryCollection:function(e){const t=[];for(let n=0;n<e.length;++n){const i=e[n];t.push(this.read(i))}return this.geometryFactory.createGeometryCollection(t)}},ji={/**
     * Convert a Coordinate to an Array
     *
     * @param {Coordinate}
     *          coordinate Coordinate to convert.
     *
     * @return {Array} Array of ordinates.
     */coordinate:function(e){return[e.x,e.y]},/**
     * Convert a Point to a GeoJSON object
     *
     * @param {Point}
     *          point Point to convert.
     *
     * @return {Array} Array of 2 ordinates (paired to a coordinate).
     */Point:function(e){const t=ji.coordinate.call(this,e.getCoordinate());return{type:"Point",coordinates:t}},/**
     * Convert a MultiPoint to a GeoJSON object
     *
     * @param {MultiPoint}
     *          multipoint MultiPoint to convert.
     *
     * @return {Array} Array of coordinates.
     */MultiPoint:function(e){const t=[];for(let n=0;n<e._geometries.length;++n){const i=e._geometries[n],o=ji.Point.call(this,i);t.push(o.coordinates)}return{type:"MultiPoint",coordinates:t}},/**
     * Convert a LineString to a GeoJSON object
     *
     * @param {LineString}
     *          linestring LineString to convert.
     *
     * @return {Array} Array of coordinates.
     */LineString:function(e){const t=[],n=e.getCoordinates();for(let o=0;o<n.length;++o){const e=n[o];t.push(ji.coordinate.call(this,e))}return{type:"LineString",coordinates:t}},/**
     * Convert a MultiLineString to a GeoJSON object
     *
     * @param {MultiLineString}
     *          multilinestring MultiLineString to convert.
     *
     * @return {Array} Array of Array of coordinates.
     */MultiLineString:function(e){const t=[];for(let n=0;n<e._geometries.length;++n){const i=e._geometries[n],o=ji.LineString.call(this,i);t.push(o.coordinates)}return{type:"MultiLineString",coordinates:t}},/**
     * Convert a Polygon to a GeoJSON object
     *
     * @param {Polygon}
     *          polygon Polygon to convert.
     *
     * @return {Array} Array with shell, holes.
     */Polygon:function(e){const t=[],n=ji.LineString.call(this,e._shell);t.push(n.coordinates);for(let n=0;n<e._holes.length;++n){const i=e._holes[n],o=ji.LineString.call(this,i);t.push(o.coordinates)}return{type:"Polygon",coordinates:t}},/**
     * Convert a MultiPolygon to a GeoJSON object
     *
     * @param {MultiPolygon}
     *          multipolygon MultiPolygon to convert.
     *
     * @return {Array} Array of polygons.
     */MultiPolygon:function(e){const t=[];for(let n=0;n<e._geometries.length;++n){const i=e._geometries[n],o=ji.Polygon.call(this,i);t.push(o.coordinates)}return{type:"MultiPolygon",coordinates:t}},/**
     * Convert a GeometryCollection to a GeoJSON object
     *
     * @param {GeometryCollection}
     *          collection GeometryCollection to convert.
     *
     * @return {Array} Array of geometries.
     */GeometryCollection:function(e){const t=[];for(let n=0;n<e._geometries.length;++n){const i=e._geometries[n],o=i.getGeometryType();t.push(ji[o].call(this,i))}return{type:"GeometryCollection",geometries:t}}};var Ki=/*#__PURE__*/Object.freeze({GeoJSONReader:/**
   * @module org/locationtech/jts/io/GeoJSONReader
   */ /**
   * Converts a geometry in GeoJSON to a {@link Geometry}.
   */class{/**
     * A <code>GeoJSONReader</code> is parameterized by a <code>GeometryFactory</code>,
     * to allow it to create <code>Geometry</code> objects of the appropriate
     * implementation. In particular, the <code>GeometryFactory</code> determines
     * the <code>PrecisionModel</code> and <code>SRID</code> that is used.
     *
     * @param {GeometryFactory} geometryFactory
     */constructor(e){this.parser=new wi(e||new Ft)}/**
     * Reads a GeoJSON representation of a {@link Geometry}
     *
     * Will also parse GeoJSON Features/FeatureCollections as custom objects.
     *
     * @param {Object|String} geoJson a GeoJSON Object or String.
     * @return {Geometry|Object} a <code>Geometry or Feature/FeatureCollection representation.</code>
     * @memberof module:org/locationtech/jts/io/GeoJSONReader#
     */read(e){var t=this.parser.read(e);return t}}/**
   * @module org/locationtech/jts/io/GeoJSONWriter
   */ /**
   * Writes the GeoJSON representation of a {@link Geometry}. The
   * The GeoJSON format is defined <A
   * HREF="http://geojson.org/geojson-spec.html">here</A>.
   */,GeoJSONWriter:class{/**
     * The <code>GeoJSONWriter</code> outputs coordinates rounded to the precision
     * model. Only the maximum number of decimal places necessary to represent the
     * ordinates to the required precision will be output.
     *
     * @param {GeometryFactory} geometryFactory
     * @constructor
     */constructor(){this.parser=new wi(this.geometryFactory)}/**
     * Converts a <code>Geometry</code> to its GeoJSON representation.
     *
     * @param {Geometry}
     *          geometry a <code>Geometry</code> to process.
     * @return {Object} The GeoJSON representation of the Geometry.
     * @memberof module:org/locationtech/jts/io/GeoJSONWriter#
     */write(e){return this.parser.write(e)}}/**
   * @module org/locationtech/jts/io/WKTReader
   */ /**
   * Converts a geometry in Well-Known Text format to a {@link Geometry}.
   * <p>
   * <code>WKTReader</code> supports extracting <code>Geometry</code> objects
   * from either {@link Reader}s or {@link String}s. This allows it to function
   * as a parser to read <code>Geometry</code> objects from text blocks embedded
   * in other data formats (e.g. XML).
   */,OL3Parser:class{/**
     * OpenLayers Geometry parser and writer
     * @param {GeometryFactory} geometryFactory
     * @param {ol} olReference 
     */constructor(e,t){this.geometryFactory=e||new Ft,this.ol=t||"undefined"!=typeof ol&&ol}/**
     * Inject OpenLayers geom classes
     */inject(e,t,n,i,o,r,d,s){this.ol={geom:{Point:e,LineString:t,LinearRing:n,Polygon:i,MultiPoint:o,MultiLineString:r,MultiPolygon:d,GeometryCollection:s}}}/**
     * @param geometry {ol.geom.Geometry}
     * @return {Geometry}
     * @memberof module:org/locationtech/jts/io/OL3Parser#
     */read(e){const t=this.ol;return e instanceof t.geom.Point?this.convertFromPoint(e):e instanceof t.geom.LineString?this.convertFromLineString(e):e instanceof t.geom.LinearRing?this.convertFromLinearRing(e):e instanceof t.geom.Polygon?this.convertFromPolygon(e):e instanceof t.geom.MultiPoint?this.convertFromMultiPoint(e):e instanceof t.geom.MultiLineString?this.convertFromMultiLineString(e):e instanceof t.geom.MultiPolygon?this.convertFromMultiPolygon(e):e instanceof t.geom.GeometryCollection?this.convertFromCollection(e):void 0}convertFromPoint(e){const t=e.getCoordinates();return this.geometryFactory.createPoint(new Re(t[0],t[1]))}convertFromLineString(e){return this.geometryFactory.createLineString(e.getCoordinates().map(function(e){return new Re(e[0],e[1])}))}convertFromLinearRing(e){return this.geometryFactory.createLinearRing(e.getCoordinates().map(function(e){return new Re(e[0],e[1])}))}convertFromPolygon(e){const t=e.getLinearRings();var n=null,o=[];for(let r=0;r<t.length;r++){const e=this.convertFromLinearRing(t[r]);0==r?n=e:o.push(e)}return this.geometryFactory.createPolygon(n,o)}convertFromMultiPoint(e){const t=e.getPoints().map(function(e){return this.convertFromPoint(e)},this);return this.geometryFactory.createMultiPoint(t)}convertFromMultiLineString(e){const t=e.getLineStrings().map(function(e){return this.convertFromLineString(e)},this);return this.geometryFactory.createMultiLineString(t)}convertFromMultiPolygon(e){const t=e.getPolygons().map(function(e){return this.convertFromPolygon(e)},this);return this.geometryFactory.createMultiPolygon(t)}convertFromCollection(e){const t=e.getGeometries().map(function(e){return this.read(e)},this);return this.geometryFactory.createGeometryCollection(t)}/**
     * @param geometry
     *          {Geometry}
     * @return {ol.geom.Geometry}
     * @memberof module:org/locationtech/jts/io/OL3Parser#
     */write(e){return"Point"===e.getGeometryType()?this.convertToPoint(e.getCoordinate()):"LineString"===e.getGeometryType()?this.convertToLineString(e):"LinearRing"===e.getGeometryType()?this.convertToLinearRing(e):"Polygon"===e.getGeometryType()?this.convertToPolygon(e):"MultiPoint"===e.getGeometryType()?this.convertToMultiPoint(e):"MultiLineString"===e.getGeometryType()?this.convertToMultiLineString(e):"MultiPolygon"===e.getGeometryType()?this.convertToMultiPolygon(e):"GeometryCollection"===e.getGeometryType()?this.convertToCollection(e):void 0}convertToPoint(e){return new this.ol.geom.Point([e.x,e.y])}convertToLineString(e){var t=e._points._coordinates.map(ne);return new this.ol.geom.LineString(t)}convertToLinearRing(e){var t=e._points._coordinates.map(ne);return new this.ol.geom.LinearRing(t)}convertToPolygon(e){var t=[e._shell._points._coordinates.map(ne)];for(let n=0;n<e._holes.length;n++)t.push(e._holes[n]._points._coordinates.map(ne));return new this.ol.geom.Polygon(t)}convertToMultiPoint(e){return new this.ol.geom.MultiPoint(e.getCoordinates().map(ne))}convertToMultiLineString(e){var t=[];for(let n=0;n<e._geometries.length;n++)t.push(this.convertToLineString(e._geometries[n]).getCoordinates());return new this.ol.geom.MultiLineString(t)}convertToMultiPolygon(e){var t=[];for(let n=0;n<e._geometries.length;n++)t.push(this.convertToPolygon(e._geometries[n]).getCoordinates());return new this.ol.geom.MultiPolygon(t)}convertToCollection(e){var t=[];for(let o=0;o<e._geometries.length;o++){var n=e._geometries[o];t.push(this.write(n))}return new this.ol.geom.GeometryCollection(t)}},WKTReader:class{/**
     * A <code>WKTReader</code> is parameterized by a <code>GeometryFactory</code>,
     * to allow it to create <code>Geometry</code> objects of the appropriate
     * implementation. In particular, the <code>GeometryFactory</code> determines
     * the <code>PrecisionModel</code> and <code>SRID</code> that is used.
     * @param {GeometryFactory} geometryFactory
     */constructor(e){this.parser=new Gt(e||new Ft)}/**
     * Reads a Well-Known Text representation of a {@link Geometry}
     *
     * @param {string}
     *          wkt a <Geometry Tagged Text> string (see the OpenGIS Simple Features
     *          Specification).
     * @return {Geometry} a <code>Geometry</code> read from
     *         <code>string.</code>
     * @memberof module:org/locationtech/jts/io/WKTReader#
     */read(e){var t=this.parser.read(e);return t}},WKTWriter:qt});class Zi{constructor(){Zi.constructor_.apply(this,arguments)}static relativeSign(e,t){return e<t?-1:e>t?1:0}static compare(e,t,n){if(t.equals2D(n))return 0;var i=Zi.relativeSign(t.x,n.x),o=Zi.relativeSign(t.y,n.y);return 0===e?Zi.compareValue(i,o):1===e?Zi.compareValue(o,i):2===e?Zi.compareValue(o,-i):3===e?Zi.compareValue(-i,o):4===e?Zi.compareValue(-i,-o):5===e?Zi.compareValue(-o,-i):6===e?Zi.compareValue(-o,i):7===e?Zi.compareValue(i,-o):(Te.shouldNeverReachHere("invalid octant value"),0)}static compareValue(e,t){return 0>e?-1:0<e?1:0>t?-1:0<t?1:0}getClass(){return Zi}get interfaces_(){return[]}}Zi.constructor_=function(){};class Qi{constructor(){Qi.constructor_.apply(this,arguments)}getCoordinate(){return this.coord}print(e){e.print(this.coord),e.print(" seg # = "+this.segmentIndex)}compareTo(e){var t=e;return this.segmentIndex<t.segmentIndex?-1:this.segmentIndex>t.segmentIndex?1:this.coord.equals2D(t.coord)?0:Zi.compare(this._segmentOctant,this.coord,t.coord)}isEndPoint(e){return!(0!==this.segmentIndex||this._isInterior)||this.segmentIndex===e}isInterior(){return this._isInterior}getClass(){return Qi}get interfaces_(){return[r]}}Qi.constructor_=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;let e=arguments[0],t=arguments[1],n=arguments[2],i=arguments[3];this._segString=e,this.coord=new Re(t),this.segmentIndex=n,this._segmentOctant=i,this._isInterior=!t.equals2D(e.getCoordinate(n))};class Ji{constructor(){Ji.constructor_.apply(this,arguments)}getSplitCoordinates(){var e=new ve;this.addEndpoints();for(var t=this.iterator(),n=t.next(),i;t.hasNext();)i=t.next(),this.addEdgeCoordinates(n,i,e),n=i;return e.toCoordinateArray()}addCollapsedNodes(){var e=new f;this.findCollapsesFromInsertedNodes(e),this.findCollapsesFromExistingVertices(e);for(var t=e.iterator(),n;t.hasNext();)n=t.next().intValue(),this.add(this._edge.getCoordinate(n),n)}print(e){e.println("Intersections:");for(var t=this.iterator(),n;t.hasNext();)n=t.next(),n.print(e)}findCollapsesFromExistingVertices(e){for(var t=0;t<this._edge.size()-2;t++){var n=this._edge.getCoordinate(t),o=this._edge.getCoordinate(t+1),r=this._edge.getCoordinate(t+2);n.equals2D(r)&&e.add(new E(t+1))}}addEdgeCoordinates(e,t,n){var o=t.segmentIndex-e.segmentIndex+2,r=this._edge.getCoordinate(t.segmentIndex),d=t.isInterior()||!t.coord.equals2D(r);d||o--,n.add(new Re(e.coord),!1);for(var s=e.segmentIndex+1;s<=t.segmentIndex;s++)n.add(this._edge.getCoordinate(s));d&&n.add(new Re(t.coord))}iterator(){return this._nodeMap.values().iterator()}addSplitEdges(e){this.addEndpoints(),this.addCollapsedNodes();for(var t=this.iterator(),n=t.next();t.hasNext();){var i=t.next(),o=this.createSplitEdge(n,i);e.add(o),n=i}}findCollapseIndex(e,t,n){if(!e.coord.equals2D(t.coord))return!1;var i=t.segmentIndex-e.segmentIndex;return t.isInterior()||i--,1==i&&(n[0]=e.segmentIndex+1,!0)}findCollapsesFromInsertedNodes(e){for(var t=[,].fill(null),n=this.iterator(),i=n.next();n.hasNext();){var o=n.next(),r=this.findCollapseIndex(i,o,t);r&&e.add(new E(t[0])),i=o}}getEdge(){return this._edge}addEndpoints(){var e=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(e),e)}createSplitEdge(e,t){var n=t.segmentIndex-e.segmentIndex+2,o=this._edge.getCoordinate(t.segmentIndex),r=t.isInterior()||!t.coord.equals2D(o);r||n--;var d=Array(n).fill(null),s=0;d[s++]=new Re(e.coord);for(var a=e.segmentIndex+1;a<=t.segmentIndex;a++)d[s++]=this._edge.getCoordinate(a);return r&&(d[s]=new Re(t.coord)),new no(d,this._edge.getData())}add(e,t){var n=new Qi(this._edge,e,t,this._edge.getSegmentOctant(t)),i=this._nodeMap.get(n);return null===i?(this._nodeMap.put(n,n),n):(Te.isTrue(i.coord.equals2D(e),"Found equal nodes with different coordinates"),i)}checkSplitEdgesCorrectness(e){var t=this._edge.getCoordinates(),n=e.get(0),i=n.getCoordinate(0);if(!i.equals2D(t[0]))throw new _("bad split edge start point at "+i);var o=e.get(e.size()-1),r=o.getCoordinates(),d=r[r.length-1];if(!d.equals2D(t[t.length-1]))throw new _("bad split edge end point at "+d)}getClass(){return Ji}get interfaces_(){return[]}}Ji.constructor_=function(){this._nodeMap=new D,this._edge=null;let e=arguments[0];this._edge=e};class $i{constructor(){$i.constructor_.apply(this,arguments)}static octant(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){let i=arguments[0],o=arguments[1];if(0===i&&0===o)throw new t("Cannot compute the octant for point ( "+i+", "+o+" )");var e=Ne(i),n=Ne(o);return 0<=i?0<=o?e>=n?0:1:e>=n?7:6:0<=o?e>=n?3:2:e>=n?4:5}if(arguments[0]instanceof Re&&arguments[1]instanceof Re){let e=arguments[0],n=arguments[1];var i=n.x-e.x,o=n.y-e.y;if(0==i&&0===o)throw new t("Cannot compute the octant for two identical points "+e);return $i.octant(i,o)}}getClass(){return $i}get interfaces_(){return[]}}$i.constructor_=function(){};class eo{constructor(){eo.constructor_.apply(this,arguments)}getCoordinates(){}size(){}getCoordinate(){}isClosed(){}setData(){}getData(){}getClass(){return eo}get interfaces_(){return[]}}eo.constructor_=function(){};class to{constructor(){to.constructor_.apply(this,arguments)}addIntersection(){}getClass(){return to}get interfaces_(){return[eo]}}to.constructor_=function(){};class no{constructor(){no.constructor_.apply(this,arguments)}static getNodedSubstrings(){if(1===arguments.length){let t=arguments[0];var e=new f;return no.getNodedSubstrings(t,e),e}if(2===arguments.length){let e=arguments[0],i=arguments[1];for(var t=e.iterator(),n;t.hasNext();)n=t.next(),n.getNodeList().addSplitEdges(i)}}getCoordinates(){return this._pts}size(){return this._pts.length}getCoordinate(e){return this._pts[e]}isClosed(){return this._pts[0].equals(this._pts[this._pts.length-1])}getSegmentOctant(e){return e===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(e),this.getCoordinate(e+1))}setData(e){this._data=e}safeOctant(e,t){return e.equals2D(t)?0:$i.octant(e,t)}getData(){return this._data}addIntersection(){if(2===arguments.length){let e=arguments[0],t=arguments[1];this.addIntersectionNode(e,t)}else if(4===arguments.length){let t=arguments[0],n=arguments[1],i=arguments[3];var e=new Re(t.getIntersection(i));this.addIntersection(e,n)}}toString(){return qt.toLineString(new Tt(this._pts))}getNodeList(){return this._nodeList}addIntersectionNode(e,t){var n=t,i=n+1;if(i<this._pts.length){var o=this._pts[i];e.equals2D(o)&&(n=i)}var r=this._nodeList.add(e,n);return r}addIntersections(e,t,n){for(var o=0;o<e.getIntersectionNum();o++)this.addIntersection(e,t,n,o)}getClass(){return no}get interfaces_(){return[to]}}no.constructor_=function(){this._nodeList=new Ji(this),this._pts=null,this._data=null;let e=arguments[0],t=arguments[1];this._pts=e,this._data=t};class io{constructor(){io.constructor_.apply(this,arguments)}overlap(){if(2===arguments.length);else if(4===arguments.length){let e=arguments[0],t=arguments[1],n=arguments[2],i=arguments[3];e.getLineSegment(t,this._overlapSeg1),n.getLineSegment(i,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}}getClass(){return io}get interfaces_(){return[]}}io.constructor_=function(){this._overlapSeg1=new Ut,this._overlapSeg2=new Ut};class oo{constructor(){oo.constructor_.apply(this,arguments)}getLineSegment(e,t){t.p0=this._pts[e],t.p1=this._pts[e+1]}computeSelect(e,t,n,i){var o=this._pts[t],r=this._pts[n];if(1==n-t)return i.select(this,t),null;if(!e.intersects(o,r))return null;var d=pe((t+n)/2);t<d&&this.computeSelect(e,t,d,i),d<n&&this.computeSelect(e,d,n,i)}getCoordinates(){for(var e=Array(this._end-this._start+1).fill(null),t=0,n=this._start;n<=this._end;n++)e[t++]=this._pts[n];return e}computeOverlaps(){if(2===arguments.length){let e=arguments[0],t=arguments[1];this.computeOverlaps(this._start,this._end,e,e._start,e._end,t)}else if(6===arguments.length){let n=arguments[0],i=arguments[1],o=arguments[2],r=arguments[3],d=arguments[4],s=arguments[5];if(1==i-n&&1==d-r)return s.overlap(this,n,o,r),null;if(!this.overlaps(n,i,o,r,d))return null;var e=pe((n+i)/2),t=pe((r+d)/2);n<e&&(r<t&&this.computeOverlaps(n,e,o,r,t,s),t<d&&this.computeOverlaps(n,e,o,t,d,s)),e<i&&(r<t&&this.computeOverlaps(e,i,o,r,t,s),t<d&&this.computeOverlaps(e,i,o,t,d,s))}}setId(e){this._id=e}select(e,t){this.computeSelect(e,this._start,this._end,t)}getEnvelope(){if(null===this._env){var e=this._pts[this._start],t=this._pts[this._end];this._env=new be(e,t)}return this._env}overlaps(e,t,n,i,o){return be.intersects(this._pts[e],this._pts[t],n._pts[i],n._pts[o])}getEndIndex(){return this._end}getStartIndex(){return this._start}getContext(){return this._context}getId(){return this._id}getClass(){return oo}get interfaces_(){return[]}}oo.constructor_=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;let e=arguments[0],t=arguments[1],n=arguments[2],i=arguments[3];this._pts=e,this._start=t,this._end=n,this._context=i};class ro{constructor(){ro.constructor_.apply(this,arguments)}static getChainStartIndices(e){var t=0,n=new f;n.add(new E(t));do{var i=ro.findChainEnd(e,t);n.add(new E(i)),t=i}while(t<e.length-1);var o=ro.toIntArray(n);return o}static findChainEnd(e,t){for(var n=t;n<e.length-1&&e[n].equals2D(e[n+1]);)n++;if(n>=e.length-1)return e.length-1;for(var i=Un.quadrant(e[n],e[n+1]),o=t+1;o<e.length;){if(!e[o-1].equals2D(e[o])){var r=Un.quadrant(e[o-1],e[o]);if(r!==i)break}o++}return o-1}static getChains(){if(1===arguments.length){let e=arguments[0];return ro.getChains(e,null)}if(2===arguments.length){let i=arguments[0],r=arguments[1];for(var e=new f,t=ro.getChainStartIndices(i),n=0,o;n<t.length-1;n++)o=new oo(i,t[n],t[n+1],r),e.add(o);return e}}static toIntArray(e){for(var t=Array(e.size()).fill(null),n=0;n<t.length;n++)t[n]=e.get(n).intValue();return t}getClass(){return ro}get interfaces_(){return[]}}ro.constructor_=function(){};class so{constructor(){so.constructor_.apply(this,arguments)}computeNodes(){}getNodedSubstrings(){}getClass(){return so}get interfaces_(){return[]}}so.constructor_=function(){};class ao{constructor(){ao.constructor_.apply(this,arguments)}setSegmentIntersector(e){this._segInt=e}getClass(){return ao}get interfaces_(){return[so]}}ao.constructor_=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){let e=arguments[0];this.setSegmentIntersector(e)}};class _o extends ao{constructor(){super(),_o.constructor_.apply(this,arguments)}getMonotoneChains(){return this._monoChains}getNodedSubstrings(){return no.getNodedSubstrings(this._nodedSegStrings)}getIndex(){return this._index}add(e){for(var t=ro.getChains(e.getCoordinates(),e),n=t.iterator(),i;n.hasNext();)i=n.next(),i.setId(this._idCounter++),this._index.insert(i.getEnvelope(),i),this._monoChains.add(i)}computeNodes(e){this._nodedSegStrings=e;for(var t=e.iterator();t.hasNext();)this.add(t.next());this.intersectChains()}intersectChains(){for(var e=new lo(this._segInt),t=this._monoChains.iterator();t.hasNext();)for(var n=t.next(),i=this._index.query(n.getEnvelope()),o=i.iterator(),r;o.hasNext();)if(r=o.next(),r.getId()>n.getId()&&(n.computeOverlaps(r,e),this._nOverlaps++),this._segInt.isDone())return null}getClass(){return _o}get interfaces_(){return[]}}class lo extends io{constructor(){super(),lo.constructor_.apply(this,arguments)}overlap(){if(4===arguments.length){let n=arguments[0],i=arguments[1],o=arguments[2],r=arguments[3];var e=n.getContext(),t=o.getContext();this._si.processIntersections(e,i,t,r)}else return super.overlap.apply(this,arguments)}getClass(){return lo}get interfaces_(){return[]}}lo.constructor_=function(){this._si=null;let e=arguments[0];this._si=e},_o.SegmentOverlapAction=lo,_o.constructor_=function(){if(this._monoChains=new f,this._index=new Vi,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0,0===arguments.length);else if(1===arguments.length){let e=arguments[0];ao.constructor_.call(this,e)}};class go{constructor(){go.constructor_.apply(this,arguments)}rescale(){if(l(arguments[0],c)){let n=arguments[0];for(var e=n.iterator(),t;e.hasNext();)t=e.next(),this.rescale(t.getCoordinates())}else if(arguments[0]instanceof Array){let t=arguments[0];var n=null,o=null;2===t.length&&(n=new Re(t[0]),o=new Re(t[1]));for(var e=0;e<t.length;e++)t[e].x=t[e].x/this._scaleFactor+this._offsetX,t[e].y=t[e].y/this._scaleFactor+this._offsetY;2===t.length&&t[0].equals2D(t[1])&&N.out.println(t)}}scale(){if(l(arguments[0],c)){let i=arguments[0];for(var e=new f(i.size()),t=i.iterator(),n;t.hasNext();)n=t.next(),e.add(new no(this.scale(n.getCoordinates()),n.getData()));return e}if(arguments[0]instanceof Array){let e=arguments[0];for(var o=Array(e.length).fill(null),t=0;t<e.length;t++)o[t]=new Re(ae((e[t].x-this._offsetX)*this._scaleFactor),ae((e[t].y-this._offsetY)*this._scaleFactor),e[t].z);var r=Ke.removeRepeatedPoints(o);return r}}isIntegerPrecision(){return 1===this._scaleFactor}getNodedSubstrings(){var e=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(e),e}computeNodes(e){var t=e;this._isScaled&&(t=this.scale(e)),this._noder.computeNodes(t)}getClass(){return go}get interfaces_(){return[so]}}go.constructor_=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){let e=arguments[0],t=arguments[1];go.constructor_.call(this,e,t,0,0)}else if(4===arguments.length){let e=arguments[0],t=arguments[1];this._noder=e,this._scaleFactor=t,this._isScaled=!this.isIntegerPrecision()}};var co=/*#__PURE__*/Object.freeze({MCIndexNoder:_o,ScaledNoder:go,SegmentString:eo});class uo{constructor(){uo.constructor_.apply(this,arguments)}static isSimple(){if(1===arguments.length){let t=arguments[0];var e=new uo(t);return e.isSimple()}if(2===arguments.length){let t=arguments[0],n=arguments[1];var e=new uo(t,n);return e.isSimple()}}isSimpleMultiPoint(e){if(e.isEmpty())return!0;for(var t=new F,n=0;n<e.getNumGeometries();n++){var o=e.getGeometryN(n),r=o.getCoordinate();if(t.contains(r))return this._nonSimpleLocation=r,!1;t.add(r)}return!0}isSimplePolygonal(e){for(var t=cn.getLines(e),n=t.iterator(),i;n.hasNext();)if(i=n.next(),!this.isSimpleLinearGeometry(i))return!1;return!0}hasClosedEndpointIntersection(t){for(var n=new D,o=t.getEdgeIterator();o.hasNext();){var r=o.next(),e=r.getMaximumSegmentIndex(),d=r.isClosed(),s=r.getCoordinate(0);this.addEndpoint(n,s,d);var a=r.getCoordinate(r.getNumPoints()-1);this.addEndpoint(n,a,d)}for(var o=n.values().iterator(),_;o.hasNext();)if(_=o.next(),_.isClosed&&2!==_.degree)return this._nonSimpleLocation=_.getCoordinate(),!0;return!1}getNonSimpleLocation(){return this._nonSimpleLocation}isSimpleLinearGeometry(e){if(e.isEmpty())return!0;var t=new hi(0,e),n=new Vt,i=t.computeSelfNodes(n,!0);return!i.hasIntersection()||(i.hasProperIntersection()?(this._nonSimpleLocation=i.getProperIntersectionPoint(),!1):!this.hasNonEndpointIntersection(t)&&!(this._isClosedEndpointsInInterior&&this.hasClosedEndpointIntersection(t)))}hasNonEndpointIntersection(t){for(var n=t.getEdgeIterator();n.hasNext();)for(var i=n.next(),e=i.getMaximumSegmentIndex(),o=i.getEdgeIntersectionList().iterator(),r;o.hasNext();)if(r=o.next(),!r.isEndPoint(e))return this._nonSimpleLocation=r.getCoordinate(),!0;return!1}addEndpoint(e,t,n){var i=e.get(t);null===i&&(i=new po(t),e.put(t,i)),i.addEndpoint(n)}computeSimple(e){return this._nonSimpleLocation=null,!!e.isEmpty()||(e instanceof ut?this.isSimpleLinearGeometry(e):e instanceof st?this.isSimpleLinearGeometry(e):e instanceof ht?this.isSimpleMultiPoint(e):l(e,ft)?this.isSimplePolygonal(e):!(e instanceof dt)||this.isSimpleGeometryCollection(e))}isSimple(){return this._nonSimpleLocation=null,this.computeSimple(this._inputGeom)}isSimpleGeometryCollection(e){for(var t=0,n;t<e.getNumGeometries();t++)if(n=e.getGeometryN(t),!this.computeSimple(n))return!1;return!0}getClass(){return uo}get interfaces_(){return[]}}class po{constructor(){po.constructor_.apply(this,arguments)}addEndpoint(e){this.degree++,this.isClosed|=e}getCoordinate(){return this.pt}getClass(){return po}get interfaces_(){return[]}}po.constructor_=function(){this.pt=null,this.isClosed=null,this.degree=null;let e=arguments[0];this.pt=e,this.isClosed=!1,this.degree=0},uo.EndpointInfo=po,uo.constructor_=function(){if(this._inputGeom=null,this._isClosedEndpointsInInterior=!0,this._nonSimpleLocation=null,1===arguments.length){let e=arguments[0];this._inputGeom=e}else if(2===arguments.length){let e=arguments[0],t=arguments[1];this._inputGeom=e,this._isClosedEndpointsInInterior=!t.isInBoundary(2)}};class mo{constructor(){mo.constructor_.apply(this,arguments)}static bufferDistanceError(e){return 1-oe(de/2/e/2)}getEndCapStyle(){return this._endCapStyle}isSingleSided(){return this._isSingleSided}setQuadrantSegments(e){this._quadrantSegments=e,0===this._quadrantSegments&&(this._joinStyle=mo.JOIN_BEVEL),0>this._quadrantSegments&&(this._joinStyle=mo.JOIN_MITRE,this._mitreLimit=Ne(this._quadrantSegments)),0>=e&&(this._quadrantSegments=1),this._joinStyle!==mo.JOIN_ROUND&&(this._quadrantSegments=mo.DEFAULT_QUADRANT_SEGMENTS)}getJoinStyle(){return this._joinStyle}setJoinStyle(e){this._joinStyle=e}setSimplifyFactor(e){this._simplifyFactor=0>e?0:e}getSimplifyFactor(){return this._simplifyFactor}getQuadrantSegments(){return this._quadrantSegments}setEndCapStyle(e){this._endCapStyle=e}getMitreLimit(){return this._mitreLimit}setMitreLimit(e){this._mitreLimit=e}setSingleSided(e){this._isSingleSided=e}getClass(){return mo}get interfaces_(){return[]}}mo.constructor_=function(){if(this._quadrantSegments=mo.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=mo.CAP_ROUND,this._joinStyle=mo.JOIN_ROUND,this._mitreLimit=mo.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=mo.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){let e=arguments[0];this.setQuadrantSegments(e)}else if(2===arguments.length){let e=arguments[0],t=arguments[1];this.setQuadrantSegments(e),this.setEndCapStyle(t)}else if(4===arguments.length){let e=arguments[0],t=arguments[1],n=arguments[2],i=arguments[3];this.setQuadrantSegments(e),this.setEndCapStyle(t),this.setJoinStyle(n),this.setMitreLimit(i)}},mo.CAP_ROUND=1,mo.CAP_FLAT=2,mo.CAP_SQUARE=3,mo.JOIN_ROUND=1,mo.JOIN_MITRE=2,mo.JOIN_BEVEL=3,mo.DEFAULT_QUADRANT_SEGMENTS=8,mo.DEFAULT_MITRE_LIMIT=5,mo.DEFAULT_SIMPLIFY_FACTOR=.01;class yo{constructor(){yo.constructor_.apply(this,arguments)}getCoordinate(){return this._minCoord}getRightmostSide(e,t){var n=this.getRightmostSideOfSegment(e,t);return 0>n&&(n=this.getRightmostSideOfSegment(e,t-1)),0>n&&(this._minCoord=null,this.checkForRightmostCoordinate(e)),n}findRightmostEdgeAtVertex(){var e=this._minDe.getEdge().getCoordinates();Te.isTrue(0<this._minIndex&&this._minIndex<e.length,"rightmost point expected to be interior vertex of edge");var t=e[this._minIndex-1],n=e[this._minIndex+1],i=Me.index(this._minCoord,n,t),o=!1;t.y<this._minCoord.y&&n.y<this._minCoord.y&&i===Me.COUNTERCLOCKWISE?o=!0:t.y>this._minCoord.y&&n.y>this._minCoord.y&&i===Me.CLOCKWISE&&(o=!0),o&&--this._minIndex}getRightmostSideOfSegment(t,n){var i=t.getEdge(),e=i.getCoordinates();if(0>n||n+1>=e.length)return-1;if(e[n].y===e[n+1].y)return-1;var o=Qn.LEFT;return e[n].y<e[n+1].y&&(o=Qn.RIGHT),o}getEdge(){return this._orientedDe}checkForRightmostCoordinate(e){for(var t=e.getEdge().getCoordinates(),n=0;n<t.length-1;n++)(null===this._minCoord||t[n].x>this._minCoord.x)&&(this._minDe=e,this._minIndex=n,this._minCoord=t[n])}findRightmostEdgeAtNode(){var e=this._minDe.getNode(),t=e.getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)}findEdge(e){for(var t=e.iterator(),n;t.hasNext();)n=t.next(),n.isForward()&&this.checkForRightmostCoordinate(n);Te.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe;var i=this.getRightmostSide(this._minDe,this._minIndex);i===Qn.LEFT&&(this._orientedDe=this._minDe.getSym())}getClass(){return yo}get interfaces_(){return[]}}yo.constructor_=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null},ie.prototype.addLast=function(t){this.array_.push(t)},ie.prototype.removeFirst=function(){return this.array_.shift()},ie.prototype.isEmpty=function(){return 0===this.array_.length};class fo{constructor(){fo.constructor_.apply(this,arguments)}clearVisitedEdges(){for(var e=this._dirEdgeList.iterator(),t;e.hasNext();)t=e.next(),t.setVisited(!1)}getRightmostCoordinate(){return this._rightMostCoord}computeNodeDepth(e){for(var t=null,n=e.getEdges().iterator(),o;n.hasNext();)if(o=n.next(),o.isVisited()||o.getSym().isVisited()){t=o;break}if(null===t)throw new mi("unable to find edge to compute depths at "+e.getCoordinate());e.getEdges().computeDepths(t);for(var n=e.getEdges().iterator(),o;n.hasNext();)o=n.next(),o.setVisited(!0),this.copySymDepths(o)}computeDepth(e){this.clearVisitedEdges();var t=this._finder.getEdge(),i=t.getNode(),n=t.getLabel();t.setEdgeDepths(Qn.RIGHT,e),this.copySymDepths(t),this.computeDepths(t)}create(e){this.addReachable(e),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()}findResultEdges(){for(var e=this._dirEdgeList.iterator(),t;e.hasNext();)t=e.next(),1<=t.getDepth(Qn.RIGHT)&&0>=t.getDepth(Qn.LEFT)&&!t.isInteriorAreaEdge()&&t.setInResult(!0)}computeDepths(e){var t=new T,o=new ie,r=e.getNode();for(o.addLast(r),t.add(r),e.setVisited(!0);!o.isEmpty();){var d=o.removeFirst();t.add(d),this.computeNodeDepth(d);for(var n=d.getEdges().iterator();n.hasNext();){var i=n.next(),s=i.getSym();if(!s.isVisited()){var a=s.getNode();t.contains(a)||(o.addLast(a),t.add(a))}}}}compareTo(e){var t=e;return this._rightMostCoord.x<t._rightMostCoord.x?-1:this._rightMostCoord.x>t._rightMostCoord.x?1:0}getEnvelope(){if(null===this._env){for(var e=new be,t=this._dirEdgeList.iterator();t.hasNext();)for(var n=t.next(),o=n.getEdge().getCoordinates(),r=0;r<o.length-1;r++)e.expandToInclude(o[r]);this._env=e}return this._env}addReachable(e){var t=new $;for(t.add(e);!t.empty();){var n=t.pop();this.add(n,t)}}copySymDepths(e){var t=e.getSym();t.setDepth(Qn.LEFT,e.getDepth(Qn.RIGHT)),t.setDepth(Qn.RIGHT,e.getDepth(Qn.LEFT))}add(e,t){e.setVisited(!0),this._nodes.add(e);for(var n=e.getEdges().iterator(),i;n.hasNext();){i=n.next(),this._dirEdgeList.add(i);var o=i.getSym(),r=o.getNode();r.isVisited()||t.push(r)}}getNodes(){return this._nodes}getDirectedEdges(){return this._dirEdgeList}getClass(){return fo}get interfaces_(){return[r]}}fo.constructor_=function(){this._finder=null,this._dirEdgeList=new f,this._nodes=new f,this._rightMostCoord=null,this._env=null,this._finder=new yo};class xo{constructor(){xo.constructor_.apply(this,arguments)}computeRing(){if(null!==this._ring)return null;for(var e=Array(this._pts.size()).fill(null),t=0;t<this._pts.size();t++)e[t]=this._pts.get(t);this._ring=this._geometryFactory.createLinearRing(e),this._isHole=Me.isCCW(this._ring.getCoordinates())}isIsolated(){return 1===this._label.getGeometryCount()}computePoints(e){this._startDe=e;var t=e,n=!0;do{if(null===t)throw new mi("Found null DirectedEdge");if(t.getEdgeRing()===this)throw new mi("Directed Edge visited twice during ring-building at "+t.getCoordinate());this._edges.add(t);var i=t.getLabel();Te.isTrue(i.isArea()),this.mergeLabel(i),this.addPoints(t.getEdge(),t.isForward(),n),n=!1,this.setEdgeRing(t,this),t=this.getNext(t)}while(t!==this._startDe)}getLinearRing(){return this._ring}getCoordinate(e){return this._pts.get(e)}computeMaxNodeDegree(){this._maxNodeDegree=0;var e=this._startDe;do{var t=e.getNode(),n=t.getEdges().getOutgoingDegree(this);n>this._maxNodeDegree&&(this._maxNodeDegree=n),e=this.getNext(e)}while(e!==this._startDe);this._maxNodeDegree*=2}addPoints(e,t,n){var o=e.getCoordinates();if(t){var r=1;n&&(r=0);for(var d=r;d<o.length;d++)this._pts.add(o[d])}else{var r=o.length-2;n&&(r=o.length-1);for(var d=r;0<=d;d--)this._pts.add(o[d])}}isHole(){return this._isHole}setInResult(){var e=this._startDe;do e.getEdge().setInResult(!0),e=e.getNext();while(e!==this._startDe)}containsPoint(e){var t=this.getLinearRing(),n=t.getEnvelopeInternal();if(!n.contains(e))return!1;if(!xn.isInRing(e,t.getCoordinates()))return!1;for(var o=this._holes.iterator(),i;o.hasNext();)if(i=o.next(),i.containsPoint(e))return!1;return!0}addHole(e){this._holes.add(e)}isShell(){return null===this._shell}getLabel(){return this._label}getEdges(){return this._edges}getMaxNodeDegree(){return 0>this._maxNodeDegree&&this.computeMaxNodeDegree(),this._maxNodeDegree}getShell(){return this._shell}mergeLabel(){if(1===arguments.length){let e=arguments[0];this.mergeLabel(e,0),this.mergeLabel(e,1)}else if(2===arguments.length){let t=arguments[0],n=arguments[1];var e=t.getLocation(n,Qn.RIGHT);if(e===Xt.NONE)return null;if(this._label.getLocation(n)===Xt.NONE)return this._label.setLocation(n,e),null}}setShell(e){this._shell=e,null!==e&&e.addHole(this)}toPolygon(e){for(var t=Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)t[n]=this._holes.get(n).getLinearRing();var o=e.createPolygon(this.getLinearRing(),t);return o}getClass(){return xo}get interfaces_(){return[]}}xo.constructor_=function(){if(this._startDe=null,this._maxNodeDegree=-1,this._edges=new f,this._pts=new f,this._label=new oi(Xt.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new f,this._geometryFactory=null,0===arguments.length);else if(2===arguments.length){let e=arguments[0],t=arguments[1];this._geometryFactory=t,this.computePoints(e),this.computeRing()}};class ho extends xo{constructor(){super(),ho.constructor_.apply(this,arguments)}setEdgeRing(e,t){e.setMinEdgeRing(t)}getNext(e){return e.getNextMin()}getClass(){return ho}get interfaces_(){return[]}}ho.constructor_=function(){let e=arguments[0],t=arguments[1];xo.constructor_.call(this,e,t)};class Eo extends xo{constructor(){super(),Eo.constructor_.apply(this,arguments)}buildMinimalRings(){var e=new f,t=this._startDe;do{if(null===t.getMinEdgeRing()){var n=new ho(t,this._geometryFactory);e.add(n)}t=t.getNext()}while(t!==this._startDe);return e}setEdgeRing(e,t){e.setEdgeRing(t)}linkDirectedEdgesForMinimalEdgeRings(){var e=this._startDe;do{var t=e.getNode();t.getEdges().linkMinimalDirectedEdges(this),e=e.getNext()}while(e!==this._startDe)}getNext(e){return e.getNext()}getClass(){return Eo}get interfaces_(){return[]}}Eo.constructor_=function(){let e=arguments[0],t=arguments[1];xo.constructor_.call(this,e,t)};class Io{constructor(){Io.constructor_.apply(this,arguments)}sortShellsAndHoles(e,t,n){for(var i=e.iterator(),o;i.hasNext();)o=i.next(),o.isHole()?n.add(o):t.add(o)}computePolygons(e){for(var t=new f,n=e.iterator();n.hasNext();){var i=n.next(),o=i.toPolygon(this._geometryFactory);t.add(o)}return t}placeFreeHoles(e,t){for(var n=t.iterator(),i;n.hasNext();)if(i=n.next(),null===i.getShell()){var o=this.findEdgeRingContaining(i,e);if(null===o)throw new mi("unable to assign hole to a shell",i.getCoordinate(0));i.setShell(o)}}buildMinimalEdgeRings(e,t,n){for(var i=new f,o=e.iterator(),r;o.hasNext();)if(r=o.next(),2<r.getMaxNodeDegree()){r.linkDirectedEdgesForMinimalEdgeRings();var d=r.buildMinimalRings(),s=this.findShell(d);null===s?n.addAll(d):(this.placePolygonHoles(s,d),t.add(s))}else i.add(r);return i}containsPoint(e){for(var t=this._shellList.iterator(),n;t.hasNext();)if(n=t.next(),n.containsPoint(e))return!0;return!1}buildMaximalEdgeRings(e){for(var t=new f,n=e.iterator(),i;n.hasNext();)if(i=n.next(),i.isInResult()&&i.getLabel().isArea()&&null===i.getEdgeRing()){var o=new Eo(i,this._geometryFactory);t.add(o),o.setInResult()}return t}placePolygonHoles(e,t){for(var n=t.iterator(),i;n.hasNext();)i=n.next(),i.isHole()&&i.setShell(e)}getPolygons(){var e=this.computePolygons(this._shellList);return e}findEdgeRingContaining(e,t){for(var n=e.getLinearRing(),i=n.getEnvelopeInternal(),o=n.getCoordinateN(0),r=null,d=null,s=t.iterator();s.hasNext();){var a=s.next(),_=a.getLinearRing(),l=_.getEnvelopeInternal();null!==r&&(d=r.getLinearRing().getEnvelopeInternal());var g=!1;l.contains(i)&&xn.isInRing(o,_.getCoordinates())&&(g=!0),g&&(null===r||d.contains(l))&&(r=a)}return r}findShell(e){for(var t=0,n=null,i=e.iterator(),o;i.hasNext();)o=i.next(),o.isHole()||(n=o,t++);return Te.isTrue(1>=t,"found two shells in MinimalEdgeRing list"),n}add(){if(1===arguments.length){let e=arguments[0];this.add(e.getEdgeEnds(),e.getNodes())}else if(2===arguments.length){let i=arguments[0],o=arguments[1];xi.linkResultDirectedEdges(o);var e=this.buildMaximalEdgeRings(i),t=new f,n=this.buildMinimalEdgeRings(e,this._shellList,t);this.sortShellsAndHoles(n,this._shellList,t),this.placeFreeHoles(this._shellList,t)}}getClass(){return Io}get interfaces_(){return[]}}Io.constructor_=function(){this._geometryFactory=null,this._shellList=new f;let e=arguments[0];this._geometryFactory=e};class No{constructor(){No.constructor_.apply(this,arguments)}static simplify(e,t){var n=new No(e);return n.simplify(t)}isDeletable(e,t,n,i){var o=this._inputLine[e],r=this._inputLine[t],d=this._inputLine[n];return!!this.isConcave(o,r,d)&&!!this.isShallow(o,r,d,i)&&this.isShallowSampled(o,r,e,n,i)}deleteShallowConcavities(){for(var e=1,t=this._inputLine.length-1,n=this.findNextNonDeletedIndex(e),i=this.findNextNonDeletedIndex(n),o=!1,r;i<this._inputLine.length;)r=!1,this.isDeletable(e,n,i,this._distanceTol)&&(this._isDeleted[n]=No.DELETE,r=!0,o=!0),e=r?i:n,n=this.findNextNonDeletedIndex(e),i=this.findNextNonDeletedIndex(n);return o}isShallowConcavity(e,t,n,i){var o=Me.index(e,t,n),r=o===this._angleOrientation;if(!r)return!1;var d=ze.pointToSegment(t,e,n);return d<i}isShallowSampled(e,t,n,o,r){var d=pe((o-n)/No.NUM_PTS_TO_CHECK);0>=d&&(d=1);for(var s=n;s<o;s+=d)if(!this.isShallow(e,t,this._inputLine[s],r))return!1;return!0}isConcave(e,t,n){var i=Me.index(e,t,n),o=i===this._angleOrientation;return o}simplify(e){this._distanceTol=Ne(e),0>e&&(this._angleOrientation=Me.CLOCKWISE),this._isDeleted=Array(this._inputLine.length).fill(null);var t=!1;do t=this.deleteShallowConcavities();while(t);return this.collapseLine()}findNextNonDeletedIndex(e){for(var t=e+1;t<this._inputLine.length&&this._isDeleted[t]===No.DELETE;)t++;return t}isShallow(e,t,n,i){var o=ze.pointToSegment(t,e,n);return o<i}collapseLine(){for(var e=new ve,t=0;t<this._inputLine.length;t++)this._isDeleted[t]!==No.DELETE&&e.add(this._inputLine[t]);return e.toCoordinateArray()}getClass(){return No}get interfaces_(){return[]}}No.constructor_=function(){this._inputLine=null,this._distanceTol=null,this._isDeleted=null,this._angleOrientation=Me.COUNTERCLOCKWISE;let e=arguments[0];this._inputLine=e},No.INIT=0,No.DELETE=1,No.KEEP=1,No.NUM_PTS_TO_CHECK=10;class Lo{constructor(){Lo.constructor_.apply(this,arguments)}getCoordinates(){var e=this._ptList.toArray(Lo.COORDINATE_ARRAY_TYPE);return e}setPrecisionModel(e){this._precisionModel=e}addPt(e){var t=new Re(e);return this._precisionModel.makePrecise(t),this.isRedundant(t)?null:void this._ptList.add(t)}reverse(){}addPts(e,t){if(t)for(var n=0;n<e.length;n++)this.addPt(e[n]);else for(var n=e.length-1;0<=n;n--)this.addPt(e[n])}isRedundant(e){if(1>this._ptList.size())return!1;var t=this._ptList.get(this._ptList.size()-1),n=e.distance(t);return!!(n<this._minimimVertexDistance)}toString(){var e=new Ft,t=e.createLineString(this.getCoordinates());return t.toString()}closeRing(){if(1>this._ptList.size())return null;var e=new Re(this._ptList.get(0)),t=this._ptList.get(this._ptList.size()-1),n=null;return 2<=this._ptList.size()&&(n=this._ptList.get(this._ptList.size()-2)),e.equals(t)?null:void this._ptList.add(e)}setMinimumVertexDistance(e){this._minimimVertexDistance=e}getClass(){return Lo}get interfaces_(){return[]}}Lo.constructor_=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new f},Lo.COORDINATE_ARRAY_TYPE=[].fill(null);class Co{constructor(){Co.constructor_.apply(this,arguments)}addNextSegment(e,t){if(this._s0=this._s1,this._s1=this._s2,this._s2=e,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=Me.index(this._s0,this._s1,this._s2),i=n===Me.CLOCKWISE&&this._side===Qn.LEFT||n===Me.COUNTERCLOCKWISE&&this._side===Qn.RIGHT;0===n?this.addCollinear(t):i?this.addOutsideTurn(n,t):this.addInsideTurn(n,t)}addLineEndCap(e,t){var n=new Ut(e,t),i=new Ut;this.computeOffsetSegment(n,Qn.LEFT,this._distance,i);var o=new Ut;this.computeOffsetSegment(n,Qn.RIGHT,this._distance,o);var r=t.x-e.x,d=t.y-e.y,s=se(d,r);switch(this._bufParams.getEndCapStyle()){case mo.CAP_ROUND:this._segList.addPt(i.p1),this.addDirectedFillet(t,s+de/2,s-de/2,Me.CLOCKWISE,this._distance),this._segList.addPt(o.p1);break;case mo.CAP_FLAT:this._segList.addPt(i.p1),this._segList.addPt(o.p1);break;case mo.CAP_SQUARE:var a=new Re;a.x=Ne(this._distance)*oe(s),a.y=Ne(this._distance)*re(s);var _=new Re(i.p1.x+a.x,i.p1.y+a.y),l=new Re(o.p1.x+a.x,o.p1.y+a.y);this._segList.addPt(_),this._segList.addPt(l);}}getCoordinates(){var e=this._segList.getCoordinates();return e}addMitreJoin(e,t,n,i){var o=!0,r=null;try{r=Ge.intersection(t.p0,t.p1,n.p0,n.p1);var d=0>=i?1:r.distance(e)/Ne(i);d>this._bufParams.getMitreLimit()&&(o=!1)}catch(e){if(e instanceof De)r=new Re(0,0),o=!1;else throw e}finally{}o?this._segList.addPt(r):this.addLimitedMitreJoin(t,n,i,this._bufParams.getMitreLimit())}addOutsideTurn(e,t){return this._offset0.p1.distance(this._offset1.p0)<this._distance*Co.OFFSET_SEGMENT_SEPARATION_FACTOR?(this._segList.addPt(this._offset0.p1),null):void(this._bufParams.getJoinStyle()===mo.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===mo.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(t&&this._segList.addPt(this._offset0.p1),this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,e,this._distance),this._segList.addPt(this._offset1.p0)))}createSquare(e){this._segList.addPt(new Re(e.x+this._distance,e.y+this._distance)),this._segList.addPt(new Re(e.x+this._distance,e.y-this._distance)),this._segList.addPt(new Re(e.x-this._distance,e.y-this._distance)),this._segList.addPt(new Re(e.x-this._distance,e.y+this._distance)),this._segList.closeRing()}addSegments(e,t){this._segList.addPts(e,t)}addFirstSegment(){this._segList.addPt(this._offset1.p0)}addCornerFillet(e,t,n,i,o){var r=t.x-e.x,d=t.y-e.y,s=se(d,r),a=n.x-e.x,_=n.y-e.y,l=se(_,a);i===Me.CLOCKWISE?s<=l&&(s+=2*de):s>=l&&(s-=2*de),this._segList.addPt(t),this.addDirectedFillet(e,s,l,i,o),this._segList.addPt(n)}addLastSegment(){this._segList.addPt(this._offset1.p1)}initSideSegments(e,t,n){this._s1=e,this._s2=t,this._side=n,this._seg1.setCoordinates(e,t),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)}addLimitedMitreJoin(e,t,n,i){var o=this._seg0.p1,r=Ht.angle(o,this._seg0.p0),d=Ht.angle(o,this._seg1.p1),s=Ht.angleBetweenOriented(this._seg0.p0,o,this._seg1.p1),a=s/2,_=Ht.normalize(r+a),l=Ht.normalize(_+de),g=i*n,c=g*Ne(re(a)),u=n-c,p=o.x+g*oe(l),m=o.y+g*re(l),y=new Re(p,m),f=new Ut(o,y),x=f.pointAlongOffset(1,u),h=f.pointAlongOffset(1,-u);this._side===Qn.LEFT?(this._segList.addPt(x),this._segList.addPt(h)):(this._segList.addPt(h),this._segList.addPt(x))}addDirectedFillet(e,t,n,i,o){var r=i===Me.CLOCKWISE?-1:1,d=Ne(t-n),s=pe(d/this._filletAngleQuantum+.5);if(1>s)return null;var a=null,_=null;a=0,_=d/s;for(var l=a,g=new Re,c;l<d;)c=t+r*l,g.x=e.x+o*oe(c),g.y=e.y+o*re(c),this._segList.addPt(g),l+=_}computeOffsetSegment(e,t,n,i){var o=t===Qn.LEFT?1:-1,r=e.p1.x-e.p0.x,d=e.p1.y-e.p0.y,s=_e(r*r+d*d),a=o*n*r/s,_=o*n*d/s;i.p0.x=e.p0.x-_,i.p0.y=e.p0.y+a,i.p1.x=e.p1.x-_,i.p1.y=e.p1.y+a}addInsideTurn(){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Co.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),0<this._closingSegLengthFactor){var e=new Re((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(e);var t=new Re((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(t)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}}createCircle(e){var t=new Re(e.x+this._distance,e.y);this._segList.addPt(t),this.addDirectedFillet(e,0,2*de,-1,this._distance),this._segList.closeRing()}addBevelJoin(e,t){this._segList.addPt(e.p1),this._segList.addPt(t.p0)}init(e){this._distance=e,this._maxCurveSegmentError=e*(1-oe(this._filletAngleQuantum/2)),this._segList=new Lo,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(e*Co.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)}addCollinear(e){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2);var t=this._li.getIntersectionNum();2<=t&&(this._bufParams.getJoinStyle()===mo.JOIN_BEVEL||this._bufParams.getJoinStyle()===mo.JOIN_MITRE?(e&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,Me.CLOCKWISE,this._distance))}closeRing(){this._segList.closeRing()}hasNarrowConcaveAngle(){return this._hasNarrowConcaveAngle}getClass(){return Co}get interfaces_(){return[]}}Co.constructor_=function(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new Ut,this._seg1=new Ut,this._offset0=new Ut,this._offset1=new Ut,this._side=0,this._hasNarrowConcaveAngle=!1;let e=arguments[0],t=arguments[1],n=arguments[2];this._precisionModel=e,this._bufParams=t,this._li=new Vt,this._filletAngleQuantum=de/2/t.getQuadrantSegments(),8<=t.getQuadrantSegments()&&t.getJoinStyle()===mo.JOIN_ROUND&&(this._closingSegLengthFactor=Co.MAX_CLOSING_SEG_LEN_FACTOR),this.init(n)},Co.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,Co.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,Co.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,Co.MAX_CLOSING_SEG_LEN_FACTOR=80;class So{constructor(){So.constructor_.apply(this,arguments)}static copyCoordinates(e){for(var t=Array(e.length).fill(null),n=0;n<t.length;n++)t[n]=new Re(e[n]);return t}getOffsetCurve(e,t){if(this._distance=t,0===t)return null;var n=0>t,i=Ne(t),o=this.getSegGen(i);1>=e.length?this.computePointCurve(e[0],o):this.computeOffsetCurve(e,n,o);var r=o.getCoordinates();return n&&Ke.reverse(r),r}computeSingleSidedBufferCurve(e,t,n){var o=this.simplifyTolerance(this._distance);if(t){n.addSegments(e,!0);var r=No.simplify(e,-o),d=r.length-1;n.initSideSegments(r[d],r[d-1],Qn.LEFT),n.addFirstSegment();for(var s=d-2;0<=s;s--)n.addNextSegment(r[s],!0)}else{n.addSegments(e,!1);var a=No.simplify(e,o),_=a.length-1;n.initSideSegments(a[0],a[1],Qn.LEFT),n.addFirstSegment();for(var s=2;s<=_;s++)n.addNextSegment(a[s],!0)}n.addLastSegment(),n.closeRing()}computeRingBufferCurve(e,t,o){var r=this.simplifyTolerance(this._distance);t===Qn.RIGHT&&(r=-r);var d=No.simplify(e,r),s=d.length-1;o.initSideSegments(d[s-1],d[0],t);for(var n=1,a;n<=s;n++)a=1!=n,o.addNextSegment(d[n],a);o.closeRing()}computeLineBufferCurve(e,t){var n=this.simplifyTolerance(this._distance),o=No.simplify(e,n),r=o.length-1;t.initSideSegments(o[0],o[1],Qn.LEFT);for(var d=2;d<=r;d++)t.addNextSegment(o[d],!0);t.addLastSegment(),t.addLineEndCap(o[r-1],o[r]);var s=No.simplify(e,-n),a=s.length-1;t.initSideSegments(s[a],s[a-1],Qn.LEFT);for(var d=a-2;0<=d;d--)t.addNextSegment(s[d],!0);t.addLastSegment(),t.addLineEndCap(s[1],s[0]),t.closeRing()}computePointCurve(e,t){switch(this._bufParams.getEndCapStyle()){case mo.CAP_ROUND:t.createCircle(e);break;case mo.CAP_SQUARE:t.createSquare(e);}}getLineCurve(e,t){if(this._distance=t,0>t&&!this._bufParams.isSingleSided())return null;if(0===t)return null;var n=Ne(t),i=this.getSegGen(n);if(1>=e.length)this.computePointCurve(e[0],i);else if(this._bufParams.isSingleSided()){this.computeSingleSidedBufferCurve(e,0>t,i)}else this.computeLineBufferCurve(e,i);var o=i.getCoordinates();return o}getBufferParameters(){return this._bufParams}simplifyTolerance(e){return e*this._bufParams.getSimplifyFactor()}getRingCurve(e,t,n){if(this._distance=n,2>=e.length)return this.getLineCurve(e,n);if(0===n)return So.copyCoordinates(e);var i=this.getSegGen(n);return this.computeRingBufferCurve(e,t,i),i.getCoordinates()}computeOffsetCurve(e,t,n){var o=this.simplifyTolerance(this._distance);if(t){var r=No.simplify(e,-o),d=r.length-1;n.initSideSegments(r[d],r[d-1],Qn.LEFT),n.addFirstSegment();for(var s=d-2;0<=s;s--)n.addNextSegment(r[s],!0)}else{var a=No.simplify(e,o),_=a.length-1;n.initSideSegments(a[0],a[1],Qn.LEFT),n.addFirstSegment();for(var s=2;s<=_;s++)n.addNextSegment(a[s],!0)}n.addLastSegment()}getSegGen(e){return new Co(this._precisionModel,this._bufParams,e)}getClass(){return So}get interfaces_(){return[]}}So.constructor_=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;let e=arguments[0],t=arguments[1];this._precisionModel=e,this._bufParams=t};class To{constructor(){To.constructor_.apply(this,arguments)}findStabbedSegments(){if(1===arguments.length){let i=arguments[0];for(var e=new f,t=this._subgraphs.iterator();t.hasNext();){var n=t.next(),o=n.getEnvelope();i.y<o.getMinY()||i.y>o.getMaxY()||this.findStabbedSegments(i,n.getDirectedEdges(),e)}return e}if(3===arguments.length)if(l(arguments[2],p)&&arguments[0]instanceof Re&&arguments[1]instanceof yi){let e=arguments[0],n=arguments[1],i=arguments[2];for(var r=n.getEdge().getCoordinates(),t=0;t<r.length-1;t++){this._seg.p0=r[t],this._seg.p1=r[t+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse();var d=Ee(this._seg.p0.x,this._seg.p1.x);if(!(d<e.x)&&!this._seg.isHorizontal()&&!(e.y<this._seg.p0.y||e.y>this._seg.p1.y)&&Me.index(this._seg.p0,this._seg.p1,e)!==Me.RIGHT){var s=n.getDepth(Qn.LEFT);this._seg.p0.equals(r[t])||(s=n.getDepth(Qn.RIGHT));var a=new Ro(this._seg,s);i.add(a)}}}else if(l(arguments[2],p)&&arguments[0]instanceof Re&&l(arguments[1],p)){let e=arguments[0],n=arguments[1],i=arguments[2];for(var t=n.iterator(),_;t.hasNext();)_=t.next(),_.isForward()&&this.findStabbedSegments(e,_,i)}}getDepth(e){var t=this.findStabbedSegments(e);if(0===t.size())return 0;var n=_n.min(t);return n._leftDepth}getClass(){return To}get interfaces_(){return[]}}class Ro{constructor(){Ro.constructor_.apply(this,arguments)}compareTo(e){var t=e;if(this._upwardSeg.minX()>=t._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=t._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(t._upwardSeg);return 0===n?(n=-1*t._upwardSeg.orientationIndex(this._upwardSeg),0===n?this._upwardSeg.compareTo(t._upwardSeg):n):n}compareX(e,t){var n=e.p0.compareTo(t.p0);return 0===n?e.p1.compareTo(t.p1):n}toString(){return this._upwardSeg.toString()}getClass(){return Ro}get interfaces_(){return[r]}}Ro.constructor_=function(){this._upwardSeg=null,this._leftDepth=null;let e=arguments[0],t=arguments[1];this._upwardSeg=new Ut(e),this._leftDepth=t},To.DepthSegment=Ro,To.constructor_=function(){this._subgraphs=null,this._seg=new Ut;let e=arguments[0];this._subgraphs=e};class Oo{constructor(){Oo.constructor_.apply(this,arguments)}addPoint(e){if(0>=this._distance)return null;var t=e.getCoordinates(),n=this._curveBuilder.getLineCurve(t,this._distance);this.addCurve(n,Xt.EXTERIOR,Xt.INTERIOR)}addPolygon(e){var t=this._distance,n=Qn.LEFT;0>this._distance&&(t=-this._distance,n=Qn.RIGHT);var o=e.getExteriorRing(),r=Ke.removeRepeatedPoints(o.getCoordinates());if(0>this._distance&&this.isErodedCompletely(o,this._distance))return null;if(0>=this._distance&&3>r.length)return null;this.addPolygonRing(r,t,n,Xt.EXTERIOR,Xt.INTERIOR);for(var d=0;d<e.getNumInteriorRing();d++){var s=e.getInteriorRingN(d),a=Ke.removeRepeatedPoints(s.getCoordinates());0<this._distance&&this.isErodedCompletely(s,-this._distance)||this.addPolygonRing(a,t,Qn.opposite(n),Xt.INTERIOR,Xt.EXTERIOR)}}isTriangleErodedCompletely(e,t){var n=new wt(e[0],e[1],e[2]),i=n.inCentre(),o=ze.pointToSegment(i,n.p0,n.p1);return o<Ne(t)}addLineString(e){if(0>=this._distance&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var t=Ke.removeRepeatedPoints(e.getCoordinates()),n=this._curveBuilder.getLineCurve(t,this._distance);this.addCurve(n,Xt.EXTERIOR,Xt.INTERIOR)}addCurve(t,n,i){if(null===t||2>t.length)return null;var o=new no(t,new oi(0,Xt.BOUNDARY,n,i));this._curveList.add(o)}getCurves(){return this.add(this._inputGeom),this._curveList}addPolygonRing(e,t,n,i,o){if(0===t&&e.length<Et.MINIMUM_VALID_SIZE)return null;var r=i,d=o;e.length>=Et.MINIMUM_VALID_SIZE&&Me.isCCW(e)&&(r=o,d=i,n=Qn.opposite(n));var s=this._curveBuilder.getRingCurve(e,n,t);this.addCurve(s,r,d)}add(e){if(e.isEmpty())return null;if(e instanceof xt)this.addPolygon(e);else if(e instanceof ut)this.addLineString(e);else if(e instanceof mt)this.addPoint(e);else if(e instanceof ht)this.addCollection(e);else if(e instanceof st)this.addCollection(e);else if(e instanceof It)this.addCollection(e);else if(e instanceof dt)this.addCollection(e);else throw new UnsupportedOperationException(e.getClass().getName())}isErodedCompletely(e,t){var n=e.getCoordinates();if(4>n.length)return 0>t;if(4===n.length)return this.isTriangleErodedCompletely(n,t);var i=e.getEnvelopeInternal(),o=Ie(i.getHeight(),i.getWidth());return!!(0>t&&2*Ne(t)>o)}addCollection(e){for(var t=0,n;t<e.getNumGeometries();t++)n=e.getGeometryN(t),this.add(n)}getClass(){return Oo}get interfaces_(){return[]}}Oo.constructor_=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new f;let e=arguments[0],t=arguments[1],n=arguments[2];this._inputGeom=e,this._distance=t,this._curveBuilder=n};class Po{constructor(){Po.constructor_.apply(this,arguments)}getNextCW(e){this.getEdges();var t=this._edgeList.indexOf(e),n=t-1;return 0===t&&(n=this._edgeList.size()-1),this._edgeList.get(n)}propagateSideLabels(t){for(var n=Xt.NONE,i=this.iterator();i.hasNext();){var o=i.next(),r=o.getLabel();r.isArea(t)&&r.getLocation(t,Qn.LEFT)!==Xt.NONE&&(n=r.getLocation(t,Qn.LEFT))}if(n===Xt.NONE)return null;for(var d=n,i=this.iterator();i.hasNext();){var o=i.next(),r=o.getLabel();if(r.getLocation(t,Qn.ON)===Xt.NONE&&r.setLocation(t,Qn.ON,d),r.isArea(t)){var s=r.getLocation(t,Qn.LEFT),a=r.getLocation(t,Qn.RIGHT);if(a!==Xt.NONE){if(a!==d)throw new mi("side location conflict",o.getCoordinate());s===Xt.NONE&&Te.shouldNeverReachHere("found single null side (at "+o.getCoordinate()+")"),d=s}else Te.isTrue(r.getLocation(t,Qn.LEFT)===Xt.NONE,"found single null side"),r.setLocation(t,Qn.RIGHT,d),r.setLocation(t,Qn.LEFT,d)}}}getCoordinate(){var t=this.iterator();if(!t.hasNext())return null;var n=t.next();return n.getCoordinate()}print(t){N.out.println("EdgeEndStar:   "+this.getCoordinate());for(var n=this.iterator(),i;n.hasNext();)i=n.next(),i.print(t)}isAreaLabelsConsistent(e){return this.computeEdgeEndLabels(e.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)}checkAreaLabelsConsistent(t){var n=this.getEdges();if(0>=n.size())return!0;var i=n.size()-1,o=n.get(i).getLabel(),r=o.getLocation(t,Qn.LEFT);Te.isTrue(r!==Xt.NONE,"Found unlabelled area edge");for(var d=r,s=this.iterator();s.hasNext();){var a=s.next(),e=a.getLabel();Te.isTrue(e.isArea(t),"Found non-area edge");var _=e.getLocation(t,Qn.LEFT),l=e.getLocation(t,Qn.RIGHT);if(_===l)return!1;if(l!==d)return!1;d=_}return!0}findIndex(t){this.iterator();for(var n=0,o;n<this._edgeList.size();n++)if(o=this._edgeList.get(n),o===t)return n;return-1}iterator(){return this.getEdges().iterator()}getEdges(){return null===this._edgeList&&(this._edgeList=new f(this._edgeMap.values())),this._edgeList}getLocation(e,t,n){return this._ptInAreaLocation[e]===Xt.NONE&&(this._ptInAreaLocation[e]=En.locate(t,n[e].getGeometry())),this._ptInAreaLocation[e]}toString(){var t=new h;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var n=this.iterator(),i;n.hasNext();)i=n.next(),t.append(i),t.append("\n");return t.toString()}computeEdgeEndLabels(e){for(var t=this.iterator(),n;t.hasNext();)n=t.next(),n.computeLabel(e)}computeLabelling(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var n=[!1,!1],i=this.iterator();i.hasNext();)for(var o=i.next(),r=o.getLabel(),d=0;2>d;d++)r.isLine(d)&&r.getLocation(d)===Xt.BOUNDARY&&(n[d]=!0);for(var i=this.iterator();i.hasNext();)for(var o=i.next(),r=o.getLabel(),d=0;2>d;d++)if(r.isAnyNull(d)){var s=Xt.NONE;if(n[d])s=Xt.EXTERIOR;else{var a=o.getCoordinate();s=this.getLocation(d,a,t)}r.setAllLocationsIfNull(d,s)}}getDegree(){return this._edgeMap.size()}insertEdgeEnd(t,e){this._edgeMap.put(t,e),this._edgeList=null}getClass(){return Po}get interfaces_(){return[]}}Po.constructor_=function(){this._edgeMap=new D,this._edgeList=null,this._ptInAreaLocation=[Xt.NONE,Xt.NONE]};class vo extends Po{constructor(){super(),vo.constructor_.apply(this,arguments)}linkResultDirectedEdges(){this.getResultAreaEdges();for(var e=null,t=null,n=this._SCANNING_FOR_INCOMING,o=0;o<this._resultAreaEdgeList.size();o++){var r=this._resultAreaEdgeList.get(o),d=r.getSym();if(r.getLabel().isArea())switch(null===e&&r.isInResult()&&(e=r),n){case this._SCANNING_FOR_INCOMING:if(!d.isInResult())continue;t=d,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!r.isInResult())continue;t.setNext(r),n=this._SCANNING_FOR_INCOMING;}}if(n===this._LINKING_TO_OUTGOING){if(null===e)throw new mi("no outgoing dirEdge found",this.getCoordinate());Te.isTrue(e.isInResult(),"unable to link last incoming dirEdge"),t.setNext(e)}}insert(e){var t=e;this.insertEdgeEnd(t,t)}getRightmostEdge(){var e=this.getEdges(),t=e.size();if(1>t)return null;var n=e.get(0);if(1===t)return n;var i=e.get(t-1),o=n.getQuadrant(),r=i.getQuadrant();return Un.isNorthern(o)&&Un.isNorthern(r)?n:Un.isNorthern(o)||Un.isNorthern(r)?0===n.getDy()?0===i.getDy()?(Te.shouldNeverReachHere("found two horizontal edges incident on node"),null):i:n:i}print(e){N.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var t=this.iterator(),n;t.hasNext();)n=t.next(),e.print("out "),n.print(e),e.println(),e.print("in "),n.getSym().print(e),e.println()}getResultAreaEdges(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new f;for(var e=this.iterator(),t;e.hasNext();)t=e.next(),(t.isInResult()||t.getSym().isInResult())&&this._resultAreaEdgeList.add(t);return this._resultAreaEdgeList}updateLabelling(e){for(var t=this.iterator();t.hasNext();){var n=t.next(),i=n.getLabel();i.setAllLocationsIfNull(0,e.getLocation(0)),i.setAllLocationsIfNull(1,e.getLocation(1))}}linkAllDirectedEdges(){this.getEdges();for(var e=null,t=null,n=this._edgeList.size()-1;0<=n;n--){var o=this._edgeList.get(n),r=o.getSym();null===t&&(t=r),null!==e&&r.setNext(e),e=o}t.setNext(e)}computeDepths(){if(1===arguments.length){let t=arguments[0];var e=this.findIndex(t),t=t.getLabel(),n=t.getDepth(Qn.LEFT),o=t.getDepth(Qn.RIGHT),r=this.computeDepths(e+1,this._edgeList.size(),n),d=this.computeDepths(0,e,r);if(d!==o)throw new mi("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){let e=arguments[0],n=arguments[1],i=arguments[2];for(var s=i,a=e;a<n;a++){var _=this._edgeList.get(a),t=_.getLabel();_.setEdgeDepths(Qn.RIGHT,s),s=_.getDepth(Qn.LEFT)}return s}}mergeSymLabels(){for(var e=this.iterator();e.hasNext();){var t=e.next(),n=t.getLabel();n.merge(t.getSym().getLabel())}}linkMinimalDirectedEdges(e){for(var t=null,n=null,o=this._SCANNING_FOR_INCOMING,r=this._resultAreaEdgeList.size()-1;0<=r;r--){var d=this._resultAreaEdgeList.get(r),s=d.getSym();switch(null===t&&d.getEdgeRing()===e&&(t=d),o){case this._SCANNING_FOR_INCOMING:if(s.getEdgeRing()!==e)continue;n=s,o=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(d.getEdgeRing()!==e)continue;n.setNextMin(d),o=this._SCANNING_FOR_INCOMING;}}o===this._LINKING_TO_OUTGOING&&(Te.isTrue(null!==t,"found null for first outgoing dirEdge"),Te.isTrue(t.getEdgeRing()===e,"unable to link last incoming dirEdge"),n.setNextMin(t))}getOutgoingDegree(){if(0===arguments.length){for(var e=0,t=this.iterator(),n;t.hasNext();)n=t.next(),n.isInResult()&&e++;return e}if(1===arguments.length){let i=arguments[0];for(var e=0,t=this.iterator(),n;t.hasNext();)n=t.next(),n.getEdgeRing()===i&&e++;return e}}getLabel(){return this._label}findCoveredLineEdges(){for(var e=Xt.NONE,t=this.iterator();t.hasNext();){var n=t.next(),i=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){e=Xt.INTERIOR;break}if(i.isInResult()){e=Xt.EXTERIOR;break}}}if(e===Xt.NONE)return null;for(var o=e,t=this.iterator();t.hasNext();){var n=t.next(),i=n.getSym();n.isLineEdge()?n.getEdge().setCovered(o===Xt.INTERIOR):(n.isInResult()&&(o=Xt.EXTERIOR),i.isInResult()&&(o=Xt.INTERIOR))}}computeLabelling(t){super.computeLabelling.call(this,t),this._label=new oi(Xt.NONE);for(var n=this.iterator();n.hasNext();)for(var o=n.next(),r=o.getEdge(),e=r.getLabel(),d=0,s;2>d;d++)s=e.getLocation(d),(s===Xt.INTERIOR||s===Xt.BOUNDARY)&&this._label.setLocation(d,Xt.INTERIOR)}getClass(){return vo}get interfaces_(){return[]}}vo.constructor_=function(){this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2};class bo extends fi{constructor(){super(),bo.constructor_.apply(this,arguments)}createNode(e){return new ci(e,new vo())}getClass(){return bo}get interfaces_(){return[]}}bo.constructor_=function(){};class Do{constructor(){Do.constructor_.apply(this,arguments)}static orientation(e){return 1===Ke.increasingDirection(e)}static compareOriented(e,t,n,i){for(var o=t?1:-1,r=i?1:-1,d=t?e.length:-1,s=i?n.length:-1,a=t?0:e.length-1,_=i?0:n.length-1,l;;){if(l=e[a].compareTo(n[_]),0!==l)return l;a+=o,_+=r;var g=a===d,c=_===s;if(g&&!c)return-1;if(!g&&c)return 1;if(g&&c)return 0}}compareTo(e){var t=e,n=Do.compareOriented(this._pts,this._orientation,t._pts,t._orientation);return n}getClass(){return Do}get interfaces_(){return[r]}}Do.constructor_=function(){this._pts=null,this._orientation=null;let e=arguments[0];this._pts=e,this._orientation=Do.orientation(e)};class Ao{constructor(){Ao.constructor_.apply(this,arguments)}print(t){t.print("MULTILINESTRING ( ");for(var n=0,o;n<this._edges.size();n++){o=this._edges.get(n),0<n&&t.print(","),t.print("(");for(var r=o.getCoordinates(),d=0;d<r.length;d++)0<d&&t.print(","),t.print(r[d].x+" "+r[d].y);t.println(")")}t.print(")  ")}addAll(e){for(var t=e.iterator();t.hasNext();)this.add(t.next())}findEdgeIndex(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1}iterator(){return this._edges.iterator()}getEdges(){return this._edges}get(e){return this._edges.get(e)}findEqualEdge(t){var e=new Do(t.getCoordinates()),n=this._ocaMap.get(e);return n}add(t){this._edges.add(t);var e=new Do(t.getCoordinates());this._ocaMap.put(e,t)}getClass(){return Ao}get interfaces_(){return[]}}Ao.constructor_=function(){this._edges=new f,this._ocaMap=new D};class Fo{constructor(){Fo.constructor_.apply(this,arguments)}processIntersections(){}isDone(){}getClass(){return Fo}get interfaces_(){return[]}}Fo.constructor_=function(){};class Mo{constructor(){Mo.constructor_.apply(this,arguments)}static isAdjacentSegments(e,t){return 1===Ne(e-t)}isTrivialIntersection(e,t,n,i){if(e===n&&1===this._li.getIntersectionNum()){if(Mo.isAdjacentSegments(t,i))return!0;if(e.isClosed()){var o=e.size()-1;if(0===t&&i===o||0===i&&t===o)return!0}}return!1}getProperIntersectionPoint(){return this._properIntersectionPoint}hasProperInteriorIntersection(){return this._hasProperInterior}getLineIntersector(){return this._li}hasProperIntersection(){return this._hasProper}processIntersections(e,t,n,i){if(e===n&&t===i)return null;this.numTests++;var o=e.getCoordinates()[t],r=e.getCoordinates()[t+1],d=n.getCoordinates()[i],s=n.getCoordinates()[i+1];this._li.computeIntersection(o,r,d,s),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),!this.isTrivialIntersection(e,t,n,i)&&(this._hasIntersection=!0,e.addIntersections(this._li,t,0),n.addIntersections(this._li,i,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))}hasIntersection(){return this._hasIntersection}isDone(){return!1}hasInteriorIntersection(){return this._hasInterior}getClass(){return Mo}get interfaces_(){return[Fo]}}Mo.constructor_=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;let e=arguments[0];this._li=e};class Go{constructor(){Go.constructor_.apply(this,arguments)}static depthDelta(e){var t=e.getLocation(0,Qn.LEFT),n=e.getLocation(0,Qn.RIGHT);return t===Xt.INTERIOR&&n===Xt.EXTERIOR?1:t===Xt.EXTERIOR&&n===Xt.INTERIOR?-1:0}static convertSegStrings(e){for(var t=new Ft,n=new f;e.hasNext();){var i=e.next(),o=t.createLineString(i.getCoordinates());n.add(o)}return t.buildGeometry(n)}setWorkingPrecisionModel(e){this._workingPrecisionModel=e}insertUniqueEdge(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),i=t.getLabel();e.isPointwiseEqual(t)||(i=new oi(t.getLabel()),i.flip()),n.merge(i);var o=Go.depthDelta(i),r=e.getDepthDelta();e.setDepthDelta(r+o)}else this._edgeList.add(t),t.setDepthDelta(Go.depthDelta(t.getLabel()))}buildSubgraphs(e,t){for(var n=new f,o=e.iterator();o.hasNext();){var i=o.next(),r=i.getRightmostCoordinate(),d=new To(n),s=d.getDepth(r);i.computeDepth(s),i.findResultEdges(),n.add(i),t.add(i.getDirectedEdges(),i.getNodes())}}createSubgraphs(e){for(var t=new f,n=e.getNodes().iterator(),i;n.hasNext();)if(i=n.next(),!i.isVisited()){var o=new fo;o.create(i),t.add(o)}return _n.sort(t,_n.reverseOrder()),t}createEmptyResultGeometry(){var e=this._geomFact.createPolygon();return e}getNoder(e){if(null!==this._workingNoder)return this._workingNoder;var t=new _o,n=new Vt;return n.setPrecisionModel(e),t.setSegmentIntersector(new Mo(n)),t}buffer(e,t){var n=this._workingPrecisionModel;null===n&&(n=e.getPrecisionModel()),this._geomFact=e.getFactory();var i=new So(n,this._bufParams),o=new Oo(e,t,i),r=o.getCurves();if(0>=r.size())return this.createEmptyResultGeometry();this.computeNodedEdges(r,n),this._graph=new xi(new bo()),this._graph.addEdges(this._edgeList.getEdges());var d=this.createSubgraphs(this._graph),s=new Io(this._geomFact);this.buildSubgraphs(d,s);var a=s.getPolygons();if(0>=a.size())return this.createEmptyResultGeometry();var _=this._geomFact.buildGeometry(a);return _}computeNodedEdges(e,t){var n=this.getNoder(t);n.computeNodes(e);for(var o=n.getNodedSubstrings(),r=o.iterator();r.hasNext();){var i=r.next(),d=i.getCoordinates();if(!(2===d.length&&d[0].equals2D(d[1]))){var s=i.getData(),a=new gi(i.getCoordinates(),new oi(s));this.insertUniqueEdge(a)}}}setNoder(e){this._workingNoder=e}getClass(){return Go}get interfaces_(){return[]}}Go.constructor_=function(){this._bufParams=null,this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Ao;let e=arguments[0];this._bufParams=e};class Yo{constructor(){Yo.constructor_.apply(this,arguments)}checkEndPtVertexIntersections(){if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();){var t=e.next(),n=t.getCoordinates();this.checkEndPtVertexIntersections(n[0],this._segStrings),this.checkEndPtVertexIntersections(n[n.length-1],this._segStrings)}else if(2===arguments.length){let i=arguments[0],r=arguments[1];for(var e=r.iterator();e.hasNext();)for(var t=e.next(),n=t.getCoordinates(),o=1;o<n.length-1;o++)if(n[o].equals(i))throw new _("found endpt/interior pt intersection at index "+o+" :pt "+i)}}checkInteriorIntersections(){if(0===arguments.length)for(var e=this._segStrings.iterator(),t;e.hasNext();){t=e.next();for(var n=this._segStrings.iterator(),i;n.hasNext();)i=n.next(),this.checkInteriorIntersections(t,i)}else if(2===arguments.length){let e=arguments[0],t=arguments[1];for(var o=e.getCoordinates(),r=t.getCoordinates(),d=0;d<o.length-1;d++)for(var s=0;s<r.length-1;s++)this.checkInteriorIntersections(e,d,t,s)}else if(4===arguments.length){let e=arguments[0],t=arguments[1],n=arguments[2],i=arguments[3];if(e===n&&t===i)return null;var a=e.getCoordinates()[t],l=e.getCoordinates()[t+1],g=n.getCoordinates()[i],c=n.getCoordinates()[i+1];if(this._li.computeIntersection(a,l,g,c),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,a,l)||this.hasInteriorIntersection(this._li,g,c)))throw new _("found non-noded intersection at "+a+"-"+l+" and "+g+"-"+c)}}checkValid(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()}checkCollapses(){if(0===arguments.length)for(var e=this._segStrings.iterator(),t;e.hasNext();)t=e.next(),this.checkCollapses(t);else if(1===arguments.length){let t=arguments[0];for(var n=t.getCoordinates(),e=0;e<n.length-2;e++)this.checkCollapse(n[e],n[e+1],n[e+2])}}hasInteriorIntersection(e,t,n){for(var o=0,r;o<e.getIntersectionNum();o++)if(r=e.getIntersection(o),!(r.equals(t)||r.equals(n)))return!0;return!1}checkCollapse(e,t,n){if(e.equals(n))throw new _("found non-noded collapse at "+Yo.fact.createLineString([e,t,n]))}getClass(){return Yo}get interfaces_(){return[]}}Yo.constructor_=function(){this._li=new Vt,this._segStrings=null;let e=arguments[0];this._segStrings=e},Yo.fact=new Ft;class zo{constructor(){zo.constructor_.apply(this,arguments)}intersectsScaled(e,t){var n=Ie(e.x,t.x),i=Ee(e.x,t.x),o=Ie(e.y,t.y),r=Ee(e.y,t.y),d=this._maxx<n||this._minx>i||this._maxy<o||this._miny>r;if(d)return!1;var s=this.intersectsToleranceSquare(e,t);return Te.isTrue(!(d&&s),"Found bad envelope test"),s}initCorners(e){var t=.5;this._minx=e.x-t,this._maxx=e.x+t,this._miny=e.y-t,this._maxy=e.y+t,this._corner[0]=new Re(this._maxx,this._maxy),this._corner[1]=new Re(this._minx,this._maxy),this._corner[2]=new Re(this._minx,this._miny),this._corner[3]=new Re(this._maxx,this._miny)}intersects(e,t){return 1===this._scaleFactor?this.intersectsScaled(e,t):(this.copyScaled(e,this._p0Scaled),this.copyScaled(t,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))}scale(e){return ae(e*this._scaleFactor)}getCoordinate(){return this._originalPt}copyScaled(e,t){t.x=this.scale(e.x),t.y=this.scale(e.y)}getSafeEnvelope(){if(null===this._safeEnv){var e=zo.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new be(this._originalPt.x-e,this._originalPt.x+e,this._originalPt.y-e,this._originalPt.y+e)}return this._safeEnv}intersectsPixelClosure(e,t){return(this._li.computeIntersection(e,t,this._corner[0],this._corner[1]),!!this._li.hasIntersection())||(this._li.computeIntersection(e,t,this._corner[1],this._corner[2]),!!this._li.hasIntersection())||(this._li.computeIntersection(e,t,this._corner[2],this._corner[3]),!!this._li.hasIntersection())||(this._li.computeIntersection(e,t,this._corner[3],this._corner[0]),!!this._li.hasIntersection())}intersectsToleranceSquare(e,t){var n=!1,i=!1;return(this._li.computeIntersection(e,t,this._corner[0],this._corner[1]),!!this._li.isProper())||(this._li.computeIntersection(e,t,this._corner[1],this._corner[2]),!!this._li.isProper())||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(e,t,this._corner[2],this._corner[3]),!!this._li.isProper())||(this._li.hasIntersection()&&(i=!0),this._li.computeIntersection(e,t,this._corner[3],this._corner[0]),!!this._li.isProper()||!!(n&&i)||!!e.equals(this._pt)||!!t.equals(this._pt))}addSnappedNode(e,t){var n=e.getCoordinate(t),i=e.getCoordinate(t+1);return!!this.intersects(n,i)&&(e.addIntersection(this.getCoordinate(),t),!0)}getClass(){return zo}get interfaces_(){return[]}}zo.constructor_=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=[,,,,].fill(null),this._safeEnv=null;let e=arguments[0],n=arguments[1],i=arguments[2];if(this._originalPt=e,this._pt=e,this._scaleFactor=n,this._li=i,0>=n)throw new t("Scale factor must be non-zero");1!==n&&(this._pt=new Re(this.scale(e.x),this.scale(e.y)),this._p0Scaled=new Re,this._p1Scaled=new Re),this.initCorners(this._pt)},zo.SAFE_ENV_EXPANSION_FACTOR=.75;class qo{constructor(){qo.constructor_.apply(this,arguments)}select(){if(1===arguments.length);else if(2===arguments.length){let e=arguments[0],t=arguments[1];e.getLineSegment(t,this.selectedSegment),this.select(this.selectedSegment)}}getClass(){return qo}get interfaces_(){return[]}}qo.constructor_=function(){this.selectedSegment=new Ut};class Bo{constructor(){Bo.constructor_.apply(this,arguments)}snap(){if(1===arguments.length){let e=arguments[0];return this.snap(e,null,-1)}if(3===arguments.length){let n=arguments[0],i=arguments[1],o=arguments[2];var e=n.getSafeEnvelope(),t=new Vo(n,i,o);return this._index.query(e,new class{get interfaces_(){return[on]}visitItem(n){n.select(e,t)}}),t.isNodeAdded()}}getClass(){return Bo}get interfaces_(){return[]}}class Vo extends qo{constructor(){super(),Vo.constructor_.apply(this,arguments)}isNodeAdded(){return this._isNodeAdded}select(){if(2===arguments.length&&xe(arguments[1])&&arguments[0]instanceof oo){let t=arguments[0],n=arguments[1];var e=t.getContext();if(null!==this._parentEdge&&e===this._parentEdge&&n===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(e,n)}else return super.select.apply(this,arguments)}getClass(){return Vo}get interfaces_(){return[]}}Vo.constructor_=function(){this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;let e=arguments[0],t=arguments[1],n=arguments[2];this._hotPixel=e,this._parentEdge=t,this._hotPixelVertexIndex=n},Bo.HotPixelSnapAction=Vo,Bo.constructor_=function(){this._index=null;let e=arguments[0];this._index=e};class Uo{constructor(){Uo.constructor_.apply(this,arguments)}processIntersections(e,t,n,i){if(e===n&&t===i)return null;var o=e.getCoordinates()[t],r=e.getCoordinates()[t+1],d=n.getCoordinates()[i],s=n.getCoordinates()[i+1];if(this._li.computeIntersection(o,r,d,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var a=0;a<this._li.getIntersectionNum();a++)this._interiorIntersections.add(this._li.getIntersection(a));e.addIntersections(this._li,t,0),n.addIntersections(this._li,i,1)}}isDone(){return!1}getInteriorIntersections(){return this._interiorIntersections}getClass(){return Uo}get interfaces_(){return[Fo]}}Uo.constructor_=function(){this._li=null,this._interiorIntersections=null;let e=arguments[0];this._li=e,this._interiorIntersections=new f};class Xo{constructor(){Xo.constructor_.apply(this,arguments)}checkCorrectness(e){var t=no.getNodedSubstrings(e),n=new Yo(t);try{n.checkValid()}catch(e){if(e instanceof x)e.printStackTrace();else throw e}finally{}}getNodedSubstrings(){return no.getNodedSubstrings(this._nodedSegStrings)}snapRound(e,t){var n=this.findInteriorIntersections(e,t);this.computeIntersectionSnaps(n),this.computeVertexSnaps(e)}findInteriorIntersections(e,t){var n=new Uo(t);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(e),n.getInteriorIntersections()}computeVertexSnaps(){if(l(arguments[0],c)){let n=arguments[0];for(var e=n.iterator(),t;e.hasNext();)t=e.next(),this.computeVertexSnaps(t)}else if(arguments[0]instanceof no){let t=arguments[0];for(var n=t.getCoordinates(),o=0;o<n.length;o++){var r=new zo(n[o],this._scaleFactor,this._li),d=this._pointSnapper.snap(r,t,o);d&&t.addIntersection(n[o],o)}}}computeNodes(e){this._nodedSegStrings=e,this._noder=new _o,this._pointSnapper=new Bo(this._noder.getIndex()),this.snapRound(e,this._li)}computeIntersectionSnaps(e){for(var t=e.iterator();t.hasNext();){var n=t.next(),i=new zo(n,this._scaleFactor,this._li);this._pointSnapper.snap(i)}}getClass(){return Xo}get interfaces_(){return[so]}}Xo.constructor_=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;let e=arguments[0];this._pm=e,this._li=new Vt,this._li.setPrecisionModel(e),this._scaleFactor=e.getScale()};class ko{constructor(){ko.constructor_.apply(this,arguments)}static bufferOp(){if(2===arguments.length){let n=arguments[0],i=arguments[1];var e=new ko(n),t=e.getResultGeometry(i);return t}if(3===arguments.length){if(xe(arguments[2])&&arguments[0]instanceof Ue&&"number"==typeof arguments[1]){let e=arguments[0],i=arguments[1],o=arguments[2];var n=new ko(e);n.setQuadrantSegments(o);var t=n.getResultGeometry(i);return t}if(arguments[2]instanceof mo&&arguments[0]instanceof Ue&&"number"==typeof arguments[1]){let e=arguments[0],i=arguments[1],o=arguments[2];var n=new ko(e,o),t=n.getResultGeometry(i);return t}}else if(4===arguments.length){let e=arguments[0],i=arguments[1],o=arguments[2],r=arguments[3];var n=new ko(e);n.setQuadrantSegments(o),n.setEndCapStyle(r);var t=n.getResultGeometry(i);return t}}static precisionScaleFactor(e,t,n){var i=e.getEnvelopeInternal(),o=Ye.max(Ne(i.getMaxX()),Ne(i.getMaxY()),Ne(i.getMinX()),Ne(i.getMinY())),r=0<t?t:0,d=pe(ge(o+2*r)/ge(10)+1),s=Le(10,n-d);return s}bufferFixedPrecision(e){var t=new go(new Xo(new Dt(1)),e.getScale()),n=new Go(this._bufParams);n.setWorkingPrecisionModel(e),n.setNoder(t),this._resultGeometry=n.buffer(this._argGeom,this._distance)}bufferReducedPrecision(){if(0===arguments.length){for(var e=ko.MAX_PRECISION_DIGITS;0<=e;e--){try{this.bufferReducedPrecision(e)}catch(e){if(e instanceof mi)this._saveException=e;else throw e}finally{}if(null!==this._resultGeometry)return null}throw this._saveException}else if(1===arguments.length){let e=arguments[0];var t=ko.precisionScaleFactor(this._argGeom,this._distance,e),n=new Dt(t);this.bufferFixedPrecision(n)}}computeGeometry(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var e=this._argGeom.getFactory().getPrecisionModel();e.getType()===Dt.FIXED?this.bufferFixedPrecision(e):this.bufferReducedPrecision()}setQuadrantSegments(e){this._bufParams.setQuadrantSegments(e)}bufferOriginalPrecision(){try{var e=new Go(this._bufParams);this._resultGeometry=e.buffer(this._argGeom,this._distance)}catch(e){if(e instanceof _)this._saveException=e;else throw e}finally{}}getResultGeometry(e){return this._distance=e,this.computeGeometry(),this._resultGeometry}setEndCapStyle(e){this._bufParams.setEndCapStyle(e)}getClass(){return ko}get interfaces_(){return[]}}ko.constructor_=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new mo,this._resultGeometry=null,this._saveException=null,1===arguments.length){let e=arguments[0];this._argGeom=e}else if(2===arguments.length){let e=arguments[0],t=arguments[1];this._argGeom=e,this._bufParams=t}},ko.CAP_ROUND=mo.CAP_ROUND,ko.CAP_BUTT=mo.CAP_FLAT,ko.CAP_FLAT=mo.CAP_FLAT,ko.CAP_SQUARE=mo.CAP_SQUARE,ko.MAX_PRECISION_DIGITS=12;var Ho=/*#__PURE__*/Object.freeze({BufferOp:ko,BufferParameters:mo});class wo{constructor(){wo.constructor_.apply(this,arguments)}static getPolygons(){if(1===arguments.length){let e=arguments[0];return wo.getPolygons(e,new f)}if(2===arguments.length){let e=arguments[0],t=arguments[1];return e instanceof xt?t.add(e):e instanceof dt&&e.apply(new wo(t)),t}}filter(e){e instanceof xt&&this._comps.add(e)}getClass(){return wo}get interfaces_(){return[ot]}}wo.constructor_=function(){this._comps=null;let e=arguments[0];this._comps=e};class Wo{constructor(){Wo.constructor_.apply(this,arguments)}isInsideArea(){return this._segIndex===Wo.INSIDE_AREA}getCoordinate(){return this._pt}getGeometryComponent(){return this._component}getSegmentIndex(){return this._segIndex}getClass(){return Wo}get interfaces_(){return[]}}Wo.constructor_=function(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length){let e=arguments[0],t=arguments[1];Wo.constructor_.call(this,e,Wo.INSIDE_AREA,t)}else if(3===arguments.length){let e=arguments[0],t=arguments[1],n=arguments[2];this._component=e,this._segIndex=t,this._pt=n}},Wo.INSIDE_AREA=-1;class jo{constructor(){jo.constructor_.apply(this,arguments)}static getPoints(){if(1===arguments.length){let e=arguments[0];return e instanceof mt?_n.singletonList(e):jo.getPoints(e,new f)}if(2===arguments.length){let e=arguments[0],t=arguments[1];return e instanceof mt?t.add(e):e instanceof dt&&e.apply(new jo(t)),t}}filter(e){e instanceof mt&&this._pts.add(e)}getClass(){return jo}get interfaces_(){return[ot]}}jo.constructor_=function(){this._pts=null;let e=arguments[0];this._pts=e};class Ko{constructor(){Ko.constructor_.apply(this,arguments)}static getLocations(e){var t=new f;return e.apply(new Ko(t)),t}filter(e){(e instanceof mt||e instanceof ut||e instanceof xt)&&this._locations.add(new Wo(e,0,e.getCoordinate()))}getClass(){return Ko}get interfaces_(){return[ot]}}Ko.constructor_=function(){this._locations=null;let e=arguments[0];this._locations=e};class Zo{constructor(){Zo.constructor_.apply(this,arguments)}static distance(e,t){var n=new Zo(e,t);return n.distance()}static isWithinDistance(e,t,n){var i=e.getEnvelopeInternal().distance(t.getEnvelopeInternal());if(i>n)return!1;var o=new Zo(e,t,n);return o.distance()<=n}static nearestPoints(e,t){var n=new Zo(e,t);return n.nearestPoints()}computeContainmentDistance(){if(0===arguments.length){var e=[,,].fill(null);if(this.computeContainmentDistance(0,e),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,e)}else if(2===arguments.length){let e=arguments[0],i=arguments[1];var t=this._geom[e];if(2>t.getDimension())return null;var n=1-e,o=wo.getPolygons(t);if(0<o.size()){var r=Ko.getLocations(this._geom[n]);if(this.computeContainmentDistance(r,o,i),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[n]=i[0],this._minDistanceLocation[e]=i[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&l(arguments[0],p)&&l(arguments[1],p)){let e=arguments[0],t=arguments[1],n=arguments[2];for(var d=0,s;d<e.size();d++){s=e.get(d);for(var a=0;a<t.size();a++)if(this.computeContainmentDistance(s,t.get(a),n),this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Wo&&arguments[1]instanceof xt){let e=arguments[0],t=arguments[1],n=arguments[2];var _=e.getCoordinate();if(Xt.EXTERIOR!==this._ptLocator.locate(_,t))return this._minDistance=0,n[0]=e,n[1]=new Wo(t,_),null}}computeMinDistanceLinesPoints(e,t,n){for(var o=0,r;o<e.size();o++){r=e.get(o);for(var d=0,s;d<t.size();d++)if(s=t.get(d),this.computeMinDistance(r,s,n),this._minDistance<=this._terminateDistance)return null}}computeFacetDistance(){var e=[,,].fill(null),t=cn.getLines(this._geom[0]),n=cn.getLines(this._geom[1]),i=jo.getPoints(this._geom[0]),o=jo.getPoints(this._geom[1]);return(this.computeMinDistanceLines(t,n,e),this.updateMinDistance(e,!1),this._minDistance<=this._terminateDistance)?null:(e[0]=null,e[1]=null,this.computeMinDistanceLinesPoints(t,o,e),this.updateMinDistance(e,!1),this._minDistance<=this._terminateDistance)?null:(e[0]=null,e[1]=null,this.computeMinDistanceLinesPoints(n,i,e),this.updateMinDistance(e,!0),this._minDistance<=this._terminateDistance?null:void(e[0]=null,e[1]=null,this.computeMinDistancePoints(i,o,e),this.updateMinDistance(e,!1)))}nearestLocations(){return this.computeMinDistance(),this._minDistanceLocation}updateMinDistance(e,t){return null===e[0]?null:void(t?(this._minDistanceLocation[0]=e[1],this._minDistanceLocation[1]=e[0]):(this._minDistanceLocation[0]=e[0],this._minDistanceLocation[1]=e[1]))}nearestPoints(){this.computeMinDistance();var e=[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()];return e}computeMinDistance(){if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=[,,].fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof ut&&arguments[1]instanceof mt){let i=arguments[0],s=arguments[1],a=arguments[2];if(i.getEnvelopeInternal().distance(s.getEnvelopeInternal())>this._minDistance)return null;for(var e=i.getCoordinates(),t=s.getCoordinate(),n=0,o;n<e.length-1;n++){if(o=ze.pointToSegment(t,e[n],e[n+1]),o<this._minDistance){this._minDistance=o;var r=new Ut(e[n],e[n+1]),d=r.closestPoint(t);a[0]=new Wo(i,n,d),a[1]=new Wo(s,0,t)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof ut&&arguments[1]instanceof ut){let t=arguments[0],i=arguments[1],r=arguments[2];if(t.getEnvelopeInternal().distance(i.getEnvelopeInternal())>this._minDistance)return null;for(var e=t.getCoordinates(),s=i.getCoordinates(),n=0;n<e.length-1;n++)for(var a=0,o;a<s.length-1;a++){if(o=ze.segmentToSegment(e[n],e[n+1],s[a],s[a+1]),o<this._minDistance){this._minDistance=o;var _=new Ut(e[n],e[n+1]),l=new Ut(s[a],s[a+1]),g=_.closestPoints(l);r[0]=new Wo(t,n,g[0]),r[1]=new Wo(i,a,g[1])}if(this._minDistance<=this._terminateDistance)return null}}}computeMinDistancePoints(e,t,n){for(var o=0,r;o<e.size();o++){r=e.get(o);for(var d=0;d<t.size();d++){var s=t.get(d),a=r.getCoordinate().distance(s.getCoordinate());if(a<this._minDistance&&(this._minDistance=a,n[0]=new Wo(r,0,r.getCoordinate()),n[1]=new Wo(s,0,s.getCoordinate())),this._minDistance<=this._terminateDistance)return null}}}distance(){if(null===this._geom[0]||null===this._geom[1])throw new t("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)}computeMinDistanceLines(e,t,n){for(var o=0,r;o<e.size();o++){r=e.get(o);for(var d=0,s;d<t.size();d++)if(s=t.get(d),this.computeMinDistance(r,s,n),this._minDistance<=this._terminateDistance)return null}}getClass(){return Zo}get interfaces_(){return[]}}Zo.constructor_=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Zn,this._minDistanceLocation=null,this._minDistance=o.MAX_VALUE,2===arguments.length){let e=arguments[0],t=arguments[1];Zo.constructor_.call(this,e,t,0)}else if(3===arguments.length){let e=arguments[0],t=arguments[1],n=arguments[2];this._geom=[,,].fill(null),this._geom[0]=e,this._geom[1]=t,this._terminateDistance=n}};var Qo=/*#__PURE__*/Object.freeze({DistanceOp:Zo});class Jo{constructor(){Jo.constructor_.apply(this,arguments)}getCoordinates(){if(null===this._coordinates){for(var e=0,t=0,n=new ve,o=this._directedEdges.iterator(),i;o.hasNext();)i=o.next(),i.getEdgeDirection()?e++:t++,n.add(i.getEdge().getLine().getCoordinates(),!1,i.getEdgeDirection());this._coordinates=n.toCoordinateArray(),t>e&&Ke.reverse(this._coordinates)}return this._coordinates}toLineString(){return this._factory.createLineString(this.getCoordinates())}add(e){this._directedEdges.add(e)}getClass(){return Jo}get interfaces_(){return[]}}Jo.constructor_=function(){this._factory=null,this._directedEdges=new f,this._coordinates=null;let e=arguments[0];this._factory=e};class $o{constructor(){$o.constructor_.apply(this,arguments)}static getComponentWithVisitedState(e,t){for(;e.hasNext();){var n=e.next();if(n.isVisited()===t)return n}return null}static setVisited(e,t){for(;e.hasNext();){var n=e.next();n.setVisited(t)}}static setMarked(e,t){for(;e.hasNext();){var n=e.next();n.setMarked(t)}}setVisited(e){this._isVisited=e}isMarked(){return this._isMarked}setData(e){this._data=e}getData(){return this._data}setMarked(e){this._isMarked=e}getContext(){return this._data}isVisited(){return this._isVisited}setContext(e){this._data=e}getClass(){return $o}get interfaces_(){return[]}}$o.constructor_=function(){this._isMarked=!1,this._isVisited=!1,this._data=null};class er extends $o{constructor(){super(),er.constructor_.apply(this,arguments)}static toEdges(e){for(var t=new f,n=e.iterator();n.hasNext();)t.add(n.next()._parentEdge);return t}isRemoved(){return null===this._parentEdge}compareDirection(t){return this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:Me.index(t._p0,t._p1,this._p1)}getCoordinate(){return this._from.getCoordinate()}print(e){var t=this.getClass().getName(),n=t.lastIndexOf("."),i=t.substring(n+1);e.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+this._angle)}getDirectionPt(){return this._p1}getAngle(){return this._angle}compareTo(e){return this.compareDirection(e)}getFromNode(){return this._from}getSym(){return this._sym}setEdge(e){this._parentEdge=e}remove(){this._sym=null,this._parentEdge=null}getEdge(){return this._parentEdge}getQuadrant(){return this._quadrant}setSym(e){this._sym=e}getToNode(){return this._to}getEdgeDirection(){return this._edgeDirection}getClass(){return er}get interfaces_(){return[r]}}er.constructor_=function(){if(this._parentEdge=null,this._from=null,this._to=null,this._p0=null,this._p1=null,this._sym=null,this._edgeDirection=null,this._quadrant=null,this._angle=null,0===arguments.length);else if(4===arguments.length){let n=arguments[0],i=arguments[1],o=arguments[2],r=arguments[3];this._from=n,this._to=i,this._edgeDirection=r,this._p0=n.getCoordinate(),this._p1=o;var e=this._p1.x-this._p0.x,t=this._p1.y-this._p0.y;this._quadrant=Un.quadrant(e,t),this._angle=se(t,e)}};class tr extends er{constructor(){super(),tr.constructor_.apply(this,arguments)}getNext(){return 2===this.getToNode().getDegree()?this.getToNode().getOutEdges().getEdges().get(0)===this.getSym()?this.getToNode().getOutEdges().getEdges().get(1):(Te.isTrue(this.getToNode().getOutEdges().getEdges().get(1)===this.getSym()),this.getToNode().getOutEdges().getEdges().get(0)):null}getClass(){return tr}get interfaces_(){return[]}}tr.constructor_=function(){let e=arguments[0],t=arguments[1],n=arguments[2],i=arguments[3];er.constructor_.call(this,e,t,n,i)};class nr extends $o{constructor(){super(),nr.constructor_.apply(this,arguments)}isRemoved(){return null===this._dirEdge}setDirectedEdges(e,t){this._dirEdge=[e,t],e.setEdge(this),t.setEdge(this),e.setSym(t),t.setSym(e),e.getFromNode().addOutEdge(e),t.getFromNode().addOutEdge(t)}getDirEdge(){if(xe(arguments[0])){let e=arguments[0];return this._dirEdge[e]}if(arguments[0]instanceof or){let e=arguments[0];return this._dirEdge[0].getFromNode()===e?this._dirEdge[0]:this._dirEdge[1].getFromNode()===e?this._dirEdge[1]:null}}remove(){this._dirEdge=null}getOppositeNode(e){return this._dirEdge[0].getFromNode()===e?this._dirEdge[0].getToNode():this._dirEdge[1].getFromNode()===e?this._dirEdge[1].getToNode():null}getClass(){return nr}get interfaces_(){return[]}}nr.constructor_=function(){if(this._dirEdge=null,0===arguments.length);else if(2===arguments.length){let e=arguments[0],t=arguments[1];this.setDirectedEdges(e,t)}};class ir{constructor(){ir.constructor_.apply(this,arguments)}getNextEdge(e){var t=this.getIndex(e);return this._outEdges.get(this.getIndex(t+1))}getCoordinate(){var t=this.iterator();if(!t.hasNext())return null;var n=t.next();return n.getCoordinate()}iterator(){return this.sortEdges(),this._outEdges.iterator()}sortEdges(){this._sorted||(_n.sort(this._outEdges),this._sorted=!0)}remove(e){this._outEdges.remove(e)}getEdges(){return this.sortEdges(),this._outEdges}getNextCWEdge(e){var t=this.getIndex(e);return this._outEdges.get(this.getIndex(t-1))}getIndex(){if(arguments[0]instanceof nr){let n=arguments[0];this.sortEdges();for(var e=0,t;e<this._outEdges.size();e++)if(t=this._outEdges.get(e),t.getEdge()===n)return e;return-1}if(arguments[0]instanceof er){let n=arguments[0];this.sortEdges();for(var e=0,t;e<this._outEdges.size();e++)if(t=this._outEdges.get(e),t===n)return e;return-1}if(xe(arguments[0])){let e=arguments[0];var n=e%this._outEdges.size();return 0>n&&(n+=this._outEdges.size()),n}}add(e){this._outEdges.add(e),this._sorted=!1}getDegree(){return this._outEdges.size()}getClass(){return ir}get interfaces_(){return[]}}ir.constructor_=function(){this._outEdges=new f,this._sorted=!1};class or extends $o{constructor(){super(),or.constructor_.apply(this,arguments)}static getEdgesBetween(e,t){var n=er.toEdges(e.getOutEdges().getEdges()),i=new T(n),o=er.toEdges(t.getOutEdges().getEdges());return i.retainAll(o),i}isRemoved(){return null===this._pt}addOutEdge(e){this._deStar.add(e)}getCoordinate(){return this._pt}getOutEdges(){return this._deStar}remove(){if(0===arguments.length)this._pt=null;else if(1===arguments.length){let e=arguments[0];this._deStar.remove(e)}}getIndex(e){return this._deStar.getIndex(e)}getDegree(){return this._deStar.getDegree()}getClass(){return or}get interfaces_(){return[]}}or.constructor_=function(){if(this._pt=null,this._deStar=null,1===arguments.length){let e=arguments[0];or.constructor_.call(this,e,new ir)}else if(2===arguments.length){let e=arguments[0],t=arguments[1];this._pt=e,this._deStar=t}};class rr extends nr{constructor(){super(),rr.constructor_.apply(this,arguments)}getLine(){return this._line}getClass(){return rr}get interfaces_(){return[]}}rr.constructor_=function(){this._line=null;let e=arguments[0];this._line=e};class dr{constructor(){dr.constructor_.apply(this,arguments)}find(e){return this._nodeMap.get(e)}iterator(){return this._nodeMap.values().iterator()}remove(e){return this._nodeMap.remove(e)}values(){return this._nodeMap.values()}add(e){return this._nodeMap.put(e.getCoordinate(),e),e}getClass(){return dr}get interfaces_(){return[]}}dr.constructor_=function(){this._nodeMap=new D};class sr{constructor(){sr.constructor_.apply(this,arguments)}findNodesOfDegree(e){for(var t=new f,n=this.nodeIterator(),i;n.hasNext();)i=n.next(),i.getDegree()===e&&t.add(i);return t}dirEdgeIterator(){return this._dirEdges.iterator()}edgeIterator(){return this._edges.iterator()}remove(){if(arguments[0]instanceof nr){let e=arguments[0];this.remove(e.getDirEdge(0)),this.remove(e.getDirEdge(1)),this._edges.remove(e),e.remove()}else if(arguments[0]instanceof er){let t=arguments[0];var e=t.getSym();null!==e&&e.setSym(null),t.getFromNode().remove(t),t.remove(),this._dirEdges.remove(t)}else if(arguments[0]instanceof or){let r=arguments[0];for(var t=r.getOutEdges().getEdges(),n=t.iterator();n.hasNext();){var i=n.next(),e=i.getSym();null!==e&&this.remove(e),this._dirEdges.remove(i);var o=i.getEdge();null!==o&&this._edges.remove(o)}this._nodeMap.remove(r.getCoordinate()),r.remove()}}findNode(e){return this._nodeMap.find(e)}getEdges(){return this._edges}nodeIterator(){return this._nodeMap.iterator()}contains(){if(arguments[0]instanceof nr){let t=arguments[0];return this._edges.contains(t)}if(arguments[0]instanceof er){let e=arguments[0];return this._dirEdges.contains(e)}}add(){if(arguments[0]instanceof or){let e=arguments[0];this._nodeMap.add(e)}else if(arguments[0]instanceof nr){let e=arguments[0];this._edges.add(e),this.add(e.getDirEdge(0)),this.add(e.getDirEdge(1))}else if(arguments[0]instanceof er){let e=arguments[0];this._dirEdges.add(e)}}getNodes(){return this._nodeMap.values()}getClass(){return sr}get interfaces_(){return[]}}sr.constructor_=function(){this._edges=new T,this._dirEdges=new T,this._nodeMap=new dr};class ar extends sr{constructor(){super(),ar.constructor_.apply(this,arguments)}addEdge(e){if(e.isEmpty())return null;var t=Ke.removeRepeatedPoints(e.getCoordinates());if(1>=t.length)return null;var n=t[0],i=t[t.length-1],o=this.getNode(n),r=this.getNode(i),d=new tr(o,r,t[1],!0),s=new tr(r,o,t[t.length-2],!1),a=new rr(e);a.setDirectedEdges(d,s),this.add(a)}getNode(e){var t=this.findNode(e);return null===t&&(t=new or(e),this.add(t)),t}getClass(){return ar}get interfaces_(){return[]}}ar.constructor_=function(){};class _r{constructor(){_r.constructor_.apply(this,arguments)}buildEdgeStringsForUnprocessedNodes(){for(var e=this._graph.getNodes().iterator(),t;e.hasNext();)t=e.next(),t.isMarked()||(Te.isTrue(2===t.getDegree()),this.buildEdgeStringsStartingAt(t),t.setMarked(!0))}buildEdgeStringsForNonDegree2Nodes(){for(var e=this._graph.getNodes().iterator(),t;e.hasNext();)t=e.next(),2!==t.getDegree()&&(this.buildEdgeStringsStartingAt(t),t.setMarked(!0))}buildEdgeStringsForObviousStartNodes(){this.buildEdgeStringsForNonDegree2Nodes()}getMergedLineStrings(){return this.merge(),this._mergedLineStrings}buildEdgeStringsStartingAt(e){for(var t=e.getOutEdges().iterator(),n;t.hasNext();)(n=t.next(),!n.getEdge().isMarked())&&this._edgeStrings.add(this.buildEdgeStringStartingWith(n))}merge(){if(null!==this._mergedLineStrings)return null;$o.setMarked(this._graph.nodeIterator(),!1),$o.setMarked(this._graph.edgeIterator(),!1),this._edgeStrings=new f,this.buildEdgeStringsForObviousStartNodes(),this.buildEdgeStringsForIsolatedLoops(),this._mergedLineStrings=new f;for(var e=this._edgeStrings.iterator(),t;e.hasNext();)t=e.next(),this._mergedLineStrings.add(t.toLineString())}buildEdgeStringStartingWith(e){var t=new Jo(this._factory),n=e;do t.add(n),n.getEdge().setMarked(!0),n=n.getNext();while(null!==n&&n!==e);return t}add(){if(arguments[0]instanceof Ue){let e=arguments[0];e.apply(new class{get interfaces_(){return[Ve]}filter(e){e instanceof ut&&this.add(e)}})}else if(l(arguments[0],c)){let n=arguments[0];this._mergedLineStrings=null;for(var e=n.iterator(),t;e.hasNext();)t=e.next(),this.add(t)}else if(arguments[0]instanceof ut){let e=arguments[0];null===this._factory&&(this._factory=e.getFactory()),this._graph.addEdge(e)}}buildEdgeStringsForIsolatedLoops(){this.buildEdgeStringsForUnprocessedNodes()}getClass(){return _r}get interfaces_(){return[]}}_r.constructor_=function(){this._graph=new ar,this._mergedLineStrings=null,this._factory=null,this._edgeStrings=null};var lr=/*#__PURE__*/Object.freeze({LineMerger:_r});class gr{constructor(){gr.constructor_.apply(this,arguments)}getCoordinates(){return this._pts}size(){return this._pts.length}getCoordinate(e){return this._pts[e]}isClosed(){return this._pts[0].equals(this._pts[this._pts.length-1])}getSegmentOctant(e){return e===this._pts.length-1?-1:$i.octant(this.getCoordinate(e),this.getCoordinate(e+1))}setData(e){this._data=e}getData(){return this._data}toString(){return qt.toLineString(new Tt(this._pts))}getClass(){return gr}get interfaces_(){return[eo]}}gr.constructor_=function(){this._pts=null,this._data=null;let e=arguments[0],t=arguments[1];this._pts=e,this._data=t};class cr{constructor(){cr.constructor_.apply(this,arguments)}static createAllIntersectionsFinder(e){var t=new cr(e);return t.setFindAllIntersections(!0),t}static createAnyIntersectionFinder(e){return new cr(e)}static createIntersectionCounter(e){var t=new cr(e);return t.setFindAllIntersections(!0),t.setKeepIntersections(!1),t}getInteriorIntersection(){return this._interiorIntersection}setCheckEndSegmentsOnly(e){this._isCheckEndSegmentsOnly=e}getIntersectionSegments(){return this._intSegments}count(){return this._intersectionCount}getIntersections(){return this._intersections}setFindAllIntersections(e){this._findAllIntersections=e}setKeepIntersections(e){this._keepIntersections=e}processIntersections(e,t,n,i){if(!this._findAllIntersections&&this.hasIntersection())return null;if(e===n&&t===i)return null;if(this._isCheckEndSegmentsOnly){var o=this.isEndSegment(e,t)||this.isEndSegment(n,i);if(!o)return null}var r=e.getCoordinates()[t],d=e.getCoordinates()[t+1],s=n.getCoordinates()[i],a=n.getCoordinates()[i+1];this._li.computeIntersection(r,d,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=[,,,,].fill(null),this._intSegments[0]=r,this._intSegments[1]=d,this._intSegments[2]=s,this._intSegments[3]=a,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)}isEndSegment(e,t){return 0===t||!!(t>=e.size()-2)}hasIntersection(){return null!==this._interiorIntersection}isDone(){return!this._findAllIntersections&&null!==this._interiorIntersection}getClass(){return cr}get interfaces_(){return[Fo]}}cr.constructor_=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new f,this._intersectionCount=0,this._keepIntersections=!0;let e=arguments[0];this._li=e,this._interiorIntersection=null};class ur{constructor(){ur.constructor_.apply(this,arguments)}static computeIntersections(e){var t=new ur(e);return t.setFindAllIntersections(!0),t.isValid(),t.getIntersections()}execute(){return null===this._segInt?void this.checkInteriorIntersections():null}getIntersections(){return this._segInt.getIntersections()}isValid(){return this.execute(),this._isValid}setFindAllIntersections(e){this._findAllIntersections=e}checkInteriorIntersections(){this._isValid=!0,this._segInt=new cr(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var e=new _o;if(e.setSegmentIntersector(this._segInt),e.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null}checkValid(){if(this.execute(),!this._isValid)throw new mi(this.getErrorMessage(),this._segInt.getInteriorIntersection())}getErrorMessage(){if(this._isValid)return"no intersections found";var e=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+qt.toLineString(e[0],e[1])+" and "+qt.toLineString(e[2],e[3])}getClass(){return ur}get interfaces_(){return[]}}ur.constructor_=function(){this._li=new Vt,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;let e=arguments[0];this._segStrings=e};class pr{constructor(){pr.constructor_.apply(this,arguments)}static toSegmentStrings(t){for(var n=new f,o=t.iterator(),i;o.hasNext();)i=o.next(),n.add(new gr(i.getCoordinates(),i));return n}static checkValid(e){var t=new pr(e);t.checkValid()}checkValid(){this._nv.checkValid()}getClass(){return pr}get interfaces_(){return[]}}pr.constructor_=function(){this._nv=null;let e=arguments[0];this._nv=new ur(pr.toSegmentStrings(e))};class mr{constructor(){mr.constructor_.apply(this,arguments)}static map(e,t){var n=new mr(t);return n.map(e)}map(e){for(var t=new f,n=0,o;n<e.getNumGeometries();n++)o=this._mapOp.map(e.getGeometryN(n)),o.isEmpty()||t.add(o);return e.getFactory().createGeometryCollection(Ft.toGeometryArray(t))}getClass(){return mr}get interfaces_(){return[]}}mr.constructor_=function(){this._mapOp=null;let e=arguments[0];this._mapOp=e};class yr{constructor(){yr.constructor_.apply(this,arguments)}map(){}getClass(){return yr}get interfaces_(){return[]}}yr.constructor_=function(){};class fr{constructor(){fr.constructor_.apply(this,arguments)}collectLines(e){for(var t=this._op.getGraph().getEdgeEnds().iterator(),n;t.hasNext();)n=t.next(),this.collectLineEdge(n,e,this._lineEdgesList),this.collectBoundaryTouchEdge(n,e,this._lineEdgesList)}labelIsolatedLine(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)}build(e){return this.findCoveredLineEdges(),this.collectLines(e),this.buildLines(e),this._resultLineList}collectLineEdge(t,n,i){var o=t.getLabel(),r=t.getEdge();t.isLineEdge()&&!t.isVisited()&&Pr.isResultOfOp(o,n)&&!r.isCovered()&&(i.add(r),t.setVisitedEdge(!0))}findCoveredLineEdges(){for(var t=this._op.getGraph().getNodes().iterator(),n;t.hasNext();)n=t.next(),n.getEdges().findCoveredLineEdges();for(var i=this._op.getGraph().getEdgeEnds().iterator();i.hasNext();){var o=i.next(),r=o.getEdge();if(o.isLineEdge()&&!r.isCoveredSet()){var e=this._op.isCoveredByA(o.getCoordinate());r.setCovered(e)}}}labelIsolatedLines(t){for(var n=t.iterator();n.hasNext();){var i=n.next(),e=i.getLabel();i.isIsolated()&&(e.isNull(0)?this.labelIsolatedLine(i,0):this.labelIsolatedLine(i,1))}}buildLines(){for(var t=this._lineEdgesList.iterator();t.hasNext();){var n=t.next(),e=n.getLabel(),i=this._geometryFactory.createLineString(n.getCoordinates());this._resultLineList.add(i),n.setInResult(!0)}}collectBoundaryTouchEdge(e,t,n){var i=e.getLabel();return e.isLineEdge()?null:e.isVisited()?null:e.isInteriorAreaEdge()?null:e.getEdge().isInResult()?null:void(Te.isTrue(!(e.isInResult()||e.getSym().isInResult())||!e.getEdge().isInResult()),Pr.isResultOfOp(i,t)&&t===Pr.INTERSECTION&&(n.add(e.getEdge()),e.setVisitedEdge(!0)))}getClass(){return fr}get interfaces_(){return[]}}fr.constructor_=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new f,this._resultLineList=new f;let e=arguments[0],t=arguments[1],n=arguments[2];this._op=e,this._geometryFactory=t,this._ptLocator=n};class xr{constructor(){xr.constructor_.apply(this,arguments)}filterCoveredNodeToPoint(e){var t=e.getCoordinate();if(!this._op.isCoveredByLA(t)){var n=this._geometryFactory.createPoint(t);this._resultPointList.add(n)}}extractNonCoveredResultNodes(e){for(var t=this._op.getGraph().getNodes().iterator(),i;t.hasNext();)if(i=t.next(),!i.isInResult()&&!i.isIncidentEdgeInResult()&&(0===i.getEdges().getDegree()||e===Pr.INTERSECTION)){var o=i.getLabel();Pr.isResultOfOp(o,e)&&this.filterCoveredNodeToPoint(i)}}build(e){return this.extractNonCoveredResultNodes(e),this._resultPointList}getClass(){return xr}get interfaces_(){return[]}}xr.constructor_=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new f;let e=arguments[0],t=arguments[1];this._op=e,this._geometryFactory=t};class hr{constructor(){hr.constructor_.apply(this,arguments)}static isClosed(e){return!(1>=e.length)&&e[0].equals2D(e[e.length-1])}snapVertices(e,t){for(var n=this._isClosed?e.size()-1:e.size(),o=0;o<n;o++){var r=e.get(o),d=this.findSnapForVertex(r,t);null!==d&&(e.set(o,new Re(d)),0==o&&this._isClosed&&e.set(e.size()-1,new Re(d)))}}findSnapForVertex(e,t){for(var n=0;n<t.length;n++){if(e.equals2D(t[n]))return null;if(e.distance(t[n])<this._snapTolerance)return t[n]}return null}snapTo(e){var t=new ve(this._srcPts);this.snapVertices(t,e),this.snapSegments(t,e);var n=t.toCoordinateArray();return n}snapSegments(e,t){if(0===t.length)return null;var n=t.length;t[0].equals2D(t[t.length-1])&&(n=t.length-1);for(var o=0;o<n;o++){var r=t[o],d=this.findSegmentIndexToSnap(r,e);0<=d&&e.add(d+1,new Re(r),!1)}}findSegmentIndexToSnap(e,t){for(var n=o.MAX_VALUE,r=-1,d=0;d<t.size()-1;d++){if(this._seg.p0=t.get(d),this._seg.p1=t.get(d+1),this._seg.p0.equals2D(e)||this._seg.p1.equals2D(e))if(this._allowSnappingToSourceVertices)continue;else return-1;var s=this._seg.distance(e);s<this._snapTolerance&&s<n&&(n=s,r=d)}return r}setAllowSnappingToSourceVertices(e){this._allowSnappingToSourceVertices=e}getClass(){return hr}get interfaces_(){return[]}}hr.constructor_=function(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new Ut,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof ut&&"number"==typeof arguments[1]){let e=arguments[0],t=arguments[1];hr.constructor_.call(this,e.getCoordinates(),t)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){let e=arguments[0],t=arguments[1];this._srcPts=e,this._isClosed=hr.isClosed(e),this._snapTolerance=t}};class Er{constructor(){Er.constructor_.apply(this,arguments)}static snap(e,t,n){var i=[,,].fill(null),o=new Er(e);i[0]=o.snapTo(t,n);var r=new Er(t);return i[1]=r.snapTo(i[0],n),i}static computeOverlaySnapTolerance(){if(1===arguments.length){let i=arguments[0];var e=Er.computeSizeBasedSnapTolerance(i),t=i.getPrecisionModel();if(t.getType()===Dt.FIXED){var n=2*(1/t.getScale())/1.415;n>e&&(e=n)}return e}if(2===arguments.length){let e=arguments[0],t=arguments[1];return Ie(Er.computeOverlaySnapTolerance(e),Er.computeOverlaySnapTolerance(t))}}static computeSizeBasedSnapTolerance(e){var t=e.getEnvelopeInternal(),n=Ie(t.getHeight(),t.getWidth()),i=n*Er.SNAP_PRECISION_FACTOR;return i}static snapToSelf(e,t,n){var i=new Er(e);return i.snapToSelf(t,n)}snapTo(e,t){var n=this.extractTargetCoordinates(e),i=new Ir(t,n);return i.transform(this._srcGeom)}snapToSelf(e,t){var n=this.extractTargetCoordinates(this._srcGeom),i=new Ir(e,n,!0),o=i.transform(this._srcGeom),r=o;return t&&l(r,ft)&&(r=o.buffer(0)),r}computeSnapTolerance(e){var t=this.computeMinimumSegmentLength(e);return t/10}extractTargetCoordinates(e){for(var t=new F,n=e.getCoordinates(),o=0;o<n.length;o++)t.add(n[o]);return t.toArray([].fill(null))}computeMinimumSegmentLength(e){for(var t=o.MAX_VALUE,n=0,r;n<e.length-1;n++)r=e[n].distance(e[n+1]),r<t&&(t=r);return t}getClass(){return Er}get interfaces_(){return[]}}Er.constructor_=function(){this._srcGeom=null;let e=arguments[0];this._srcGeom=e},Er.SNAP_PRECISION_FACTOR=1e-9;class Ir extends zn{constructor(){super(),Ir.constructor_.apply(this,arguments)}snapLine(e,t){var n=new hr(e,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(t)}transformCoordinates(e){var t=e.toCoordinateArray(),n=this.snapLine(t,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(n)}getClass(){return Ir}get interfaces_(){return[]}}Ir.constructor_=function(){if(this._snapTolerance=null,this._snapPts=null,this._isSelfSnap=!1,2===arguments.length){let e=arguments[0],t=arguments[1];this._snapTolerance=e,this._snapPts=t}else if(3===arguments.length){let e=arguments[0],t=arguments[1],n=arguments[2];this._snapTolerance=e,this._snapPts=t,this._isSelfSnap=n}};class Nr{constructor(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=new n,this._commonSignExp=null}getCommon(){return o.longBitsToDouble(this._commonBits)}add(e){var t=o.doubleToLongBits(e);if(this._isFirst)return this._commonBits=t,this._commonSignExp=Nr.signExpBits(this._commonBits),this._isFirst=!1,null;var n=Nr.signExpBits(t);return n===this._commonSignExp?void(this._commonMantissaBitsCount=Nr.numCommonMostSigMantissaBits(this._commonBits,t),this._commonBits=Nr.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))):(this._commonBits.high=0,this._commonBits.low=0,null)}toString(){if(1===arguments.length){let s=arguments[0];var e=o.longBitsToDouble(s),t=n.toBinaryString(s),i="0000000000000000000000000000000000000000000000000000000000000000"+t,r=i.substring(i.length-64),d=r.substring(0,1)+"  "+r.substring(1,12)+"(exp) "+r.substring(12)+" [ "+e+" ]";return d}}getClass(){return Nr}get interfaces_(){return[]}static getBit(e,t){var n=1<<t%32;return 32>t?0==(e.low&n)?0:1:0==(e.high&n)?0:1}static signExpBits(e){return e.high>>>20}static zeroLowerBits(e,t){var n="low";if(32<t&&(e.low=0,t%=32,n="high"),0<t){var i=32>t?~((1<<t)-1):0;e[n]&=i}return e}static numCommonMostSigMantissaBits(e,t){for(var n=0,o=52;0<=o;o--){if(Nr.getBit(e,o)!==Nr.getBit(t,o))return n;n++}return 52}}class Lr{constructor(){Lr.constructor_.apply(this,arguments)}addCommonBits(e){var t=new Sr(this._commonCoord);e.apply(t),e.geometryChanged()}removeCommonBits(e){if(0===this._commonCoord.x&&0===this._commonCoord.y)return e;var t=new Re(this._commonCoord);t.x=-t.x,t.y=-t.y;var n=new Sr(t);return e.apply(n),e.geometryChanged(),e}getCommonCoordinate(){return this._commonCoord}add(e){e.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()}getClass(){return Lr}get interfaces_(){return[]}}class Cr{constructor(){Cr.constructor_.apply(this,arguments)}filter(e){this._commonBitsX.add(e.x),this._commonBitsY.add(e.y)}getCommonCoordinate(){return new Re(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())}getClass(){return Cr}get interfaces_(){return[Xe]}}Cr.constructor_=function(){this._commonBitsX=new Nr,this._commonBitsY=new Nr};class Sr{constructor(){Sr.constructor_.apply(this,arguments)}filter(e,t){var n=e.getOrdinate(t,0)+this.trans.x,i=e.getOrdinate(t,1)+this.trans.y;e.setOrdinate(t,0,n),e.setOrdinate(t,1,i)}isDone(){return!1}isGeometryChanged(){return!0}getClass(){return Sr}get interfaces_(){return[rt]}}Sr.constructor_=function(){this.trans=null;let e=arguments[0];this.trans=e},Lr.CommonCoordinateFilter=Cr,Lr.Translater=Sr,Lr.constructor_=function(){this._commonCoord=null,this._ccFilter=new Cr};class Tr{constructor(){Tr.constructor_.apply(this,arguments)}static overlayOp(e,t,n){var i=new Tr(e,t);return i.getResultGeometry(n)}static union(e,t){return Tr.overlayOp(e,t,Pr.UNION)}static intersection(e,t){return Tr.overlayOp(e,t,Pr.INTERSECTION)}static symDifference(e,t){return Tr.overlayOp(e,t,Pr.SYMDIFFERENCE)}static difference(e,t){return Tr.overlayOp(e,t,Pr.DIFFERENCE)}selfSnap(e){var t=new Er(e),n=t.snapTo(e,this._snapTolerance);return n}removeCommonBits(e){this._cbr=new Lr,this._cbr.add(e[0]),this._cbr.add(e[1]);var t=[,,].fill(null);return t[0]=this._cbr.removeCommonBits(e[0].copy()),t[1]=this._cbr.removeCommonBits(e[1].copy()),t}prepareResult(e){return this._cbr.addCommonBits(e),e}getResultGeometry(e){var t=this.snap(this._geom),n=Pr.overlayOp(t[0],t[1],e);return this.prepareResult(n)}checkValid(e){e.isValid()||N.out.println("Snapped geometry is invalid")}computeSnapTolerance(){this._snapTolerance=Er.computeOverlaySnapTolerance(this._geom[0],this._geom[1])}snap(e){var t=this.removeCommonBits(e),n=Er.snap(t[0],t[1],this._snapTolerance);return n}getClass(){return Tr}get interfaces_(){return[]}}Tr.constructor_=function(){this._geom=[,,].fill(null),this._snapTolerance=null,this._cbr=null;let e=arguments[0],t=arguments[1];this._geom[0]=e,this._geom[1]=t,this.computeSnapTolerance()};class Rr{constructor(){Rr.constructor_.apply(this,arguments)}static overlayOp(e,t,n){var i=new Rr(e,t);return i.getResultGeometry(n)}static union(e,t){return Rr.overlayOp(e,t,Pr.UNION)}static intersection(e,t){return Rr.overlayOp(e,t,Pr.INTERSECTION)}static symDifference(e,t){return Rr.overlayOp(e,t,Pr.SYMDIFFERENCE)}static difference(e,t){return Rr.overlayOp(e,t,Pr.DIFFERENCE)}getResultGeometry(e){var t=null,n=!1,i=null;try{t=Pr.overlayOp(this._geom[0],this._geom[1],e),n=!0}catch(e){if(e instanceof _)i=e;else throw e}finally{}if(!n)try{t=Tr.overlayOp(this._geom[0],this._geom[1],e)}catch(e){if(e instanceof _)throw i;else throw e}finally{}return t}getClass(){return Rr}get interfaces_(){return[]}}Rr.constructor_=function(){this._geom=[,,].fill(null);let e=arguments[0],t=arguments[1];this._geom[0]=e,this._geom[1]=t};class Or{constructor(){Or.constructor_.apply(this,arguments)}getArgGeometry(e){return this._arg[e].getGeometry()}setComputationPrecision(e){this._resultPrecisionModel=e,this._li.setPrecisionModel(this._resultPrecisionModel)}getClass(){return Or}get interfaces_(){return[]}}Or.constructor_=function(){if(this._li=new Vt,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){let e=arguments[0];this.setComputationPrecision(e.getPrecisionModel()),this._arg=[,].fill(null),this._arg[0]=new hi(0,e)}else if(2===arguments.length){let e=arguments[0],t=arguments[1];Or.constructor_.call(this,e,t,ke.OGC_SFS_BOUNDARY_RULE)}else if(3===arguments.length){let e=arguments[0],t=arguments[1],n=arguments[2];0<=e.getPrecisionModel().compareTo(t.getPrecisionModel())?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(t.getPrecisionModel()),this._arg=[,,].fill(null),this._arg[0]=new hi(0,e,n),this._arg[1]=new hi(1,t,n)}};class Pr extends Or{constructor(){super(),Pr.constructor_.apply(this,arguments)}static overlayOp(e,t,n){var i=new Pr(e,t),o=i.getResultGeometry(n);return o}static union(e,n){if(e.isEmpty()||n.isEmpty()){if(e.isEmpty()&&n.isEmpty())return Pr.createEmptyResult(Pr.UNION,e,n,e.getFactory());if(e.isEmpty())return n.copy();if(n.isEmpty())return e.copy()}if(e.isGeometryCollection()||n.isGeometryCollection())throw new t("This method does not support GeometryCollection arguments");return Rr.overlayOp(e,n,Pr.UNION)}static intersection(e,t){if(e.isEmpty()||t.isEmpty())return Pr.createEmptyResult(Pr.INTERSECTION,e,t,e.getFactory());if(e.isGeometryCollection()){return mr.map(e,new class{get interfaces_(){return[yr]}map(e){return Pr.intersection(e,t)}})}return Rr.overlayOp(e,t,Pr.INTERSECTION)}static symDifference(e,n){if(e.isEmpty()||n.isEmpty()){if(e.isEmpty()&&n.isEmpty())return Pr.createEmptyResult(Pr.SYMDIFFERENCE,e,n,e.getFactory());if(e.isEmpty())return n.copy();if(n.isEmpty())return e.copy()}if(e.isGeometryCollection()||n.isGeometryCollection())throw new t("This method does not support GeometryCollection arguments");return Rr.overlayOp(e,n,Pr.SYMDIFFERENCE)}static resultDimension(e,t,n){var i=t.getDimension(),o=n.getDimension(),r=-1;return e===Pr.INTERSECTION?r=Ie(i,o):e===Pr.UNION?r=Ee(i,o):e===Pr.DIFFERENCE?r=i:e===Pr.SYMDIFFERENCE?r=Ee(i,o):void 0,r}static createEmptyResult(e,t,n,i){var o=null;switch(Pr.resultDimension(e,t,n)){case-1:o=i.createGeometryCollection();break;case 0:o=i.createPoint();break;case 1:o=i.createLineString();break;case 2:o=i.createPolygon();}return o}static difference(e,n){if(e.isEmpty())return Pr.createEmptyResult(Pr.DIFFERENCE,e,n,e.getFactory());if(n.isEmpty())return e.copy();if(e.isGeometryCollection()||n.isGeometryCollection())throw new t("This method does not support GeometryCollection arguments");return Rr.overlayOp(e,n,Pr.DIFFERENCE)}static isResultOfOp(){if(2===arguments.length){let n=arguments[0],i=arguments[1];var e=n.getLocation(0),t=n.getLocation(1);return Pr.isResultOfOp(e,t,i)}if(3===arguments.length){let e=arguments[0],t=arguments[1],n=arguments[2];return e===Xt.BOUNDARY&&(e=Xt.INTERIOR),t===Xt.BOUNDARY&&(t=Xt.INTERIOR),n===Pr.INTERSECTION?e===Xt.INTERIOR&&t===Xt.INTERIOR:n===Pr.UNION?e===Xt.INTERIOR||t===Xt.INTERIOR:n===Pr.DIFFERENCE?e===Xt.INTERIOR&&t!==Xt.INTERIOR:n===Pr.SYMDIFFERENCE&&(e===Xt.INTERIOR&&t!==Xt.INTERIOR||e!==Xt.INTERIOR&&t===Xt.INTERIOR)}}insertUniqueEdge(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),i=t.getLabel();e.isPointwiseEqual(t)||(i=new oi(t.getLabel()),i.flip());var o=e.getDepth();o.isNull()&&o.add(n),o.add(i),n.merge(i)}else this._edgeList.add(t)}getGraph(){return this._graph}cancelDuplicateResultEdges(){for(var e=this._graph.getEdgeEnds().iterator();e.hasNext();){var t=e.next(),n=t.getSym();t.isInResult()&&n.isInResult()&&(t.setInResult(!1),n.setInResult(!1))}}isCoveredByLA(e){return!!this.isCovered(e,this._resultLineList)||!!this.isCovered(e,this._resultPolyList)}computeGeometry(e,t,n,i){var o=new f;return o.addAll(e),o.addAll(t),o.addAll(n),o.isEmpty()?Pr.createEmptyResult(i,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)}mergeSymLabels(){for(var e=this._graph.getNodes().iterator(),t;e.hasNext();)t=e.next(),t.getEdges().mergeSymLabels()}isCovered(e,t){for(var n=t.iterator();n.hasNext();){var i=n.next(),o=this._ptLocator.locate(e,i);if(o!==Xt.EXTERIOR)return!0}return!1}replaceCollapsedEdges(){for(var t=new f,n=this._edgeList.iterator(),i;n.hasNext();)i=n.next(),i.isCollapsed()&&(n.remove(),t.add(i.getCollapsedEdge()));this._edgeList.addAll(t)}updateNodeLabelling(){for(var e=this._graph.getNodes().iterator();e.hasNext();){var t=e.next(),n=t.getEdges().getLabel();t.getLabel().merge(n)}}getResultGeometry(e){return this.computeOverlay(e),this._resultGeom}insertUniqueEdges(t){for(var n=t.iterator(),i;n.hasNext();)i=n.next(),this.insertUniqueEdge(i)}computeOverlay(e){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var t=new f;this._arg[0].computeSplitEdges(t),this._arg[1].computeSplitEdges(t),this.insertUniqueEdges(t),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),pr.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(e),this.cancelDuplicateResultEdges();var n=new Io(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();var i=new fr(this,this._geomFact,this._ptLocator);this._resultLineList=i.build(e);var o=new xr(this,this._geomFact,this._ptLocator);this._resultPointList=o.build(e),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,e)}labelIncompleteNode(e,t){var n=this._ptLocator.locate(e.getCoordinate(),this._arg[t].getGeometry());e.getLabel().setLocation(t,n)}copyPoints(e){for(var t=this._arg[e].getNodeIterator();t.hasNext();){var n=t.next(),i=this._graph.addNode(n.getCoordinate());i.setLabel(e,n.getLabel().getLocation(e))}}findResultAreaEdges(e){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var n=t.next(),i=n.getLabel();i.isArea()&&!n.isInteriorAreaEdge()&&Pr.isResultOfOp(i.getLocation(0,Qn.RIGHT),i.getLocation(1,Qn.RIGHT),e)&&n.setInResult(!0)}}computeLabelsFromDepths(){for(var t=this._edgeList.iterator();t.hasNext();){var n=t.next(),e=n.getLabel(),o=n.getDepth();if(!o.isNull()){o.normalize();for(var r=0;2>r;r++)e.isNull(r)||!e.isArea()||o.isNull(r)||(0===o.getDelta(r)?e.toLine(r):(Te.isTrue(!o.isNull(r,Qn.LEFT),"depth of LEFT side has not been initialized"),e.setLocation(r,Qn.LEFT,o.getLocation(r,Qn.LEFT)),Te.isTrue(!o.isNull(r,Qn.RIGHT),"depth of RIGHT side has not been initialized"),e.setLocation(r,Qn.RIGHT,o.getLocation(r,Qn.RIGHT))))}}}computeLabelling(){for(var e=this._graph.getNodes().iterator(),t;e.hasNext();)t=e.next(),t.getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()}labelIncompleteNodes(){for(var e=this._graph.getNodes().iterator();e.hasNext();){var t=e.next(),n=t.getLabel();t.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(t,0):this.labelIncompleteNode(t,1)),t.getEdges().updateLabelling(n)}}isCoveredByA(e){return!!this.isCovered(e,this._resultPolyList)}getClass(){return Pr}get interfaces_(){return[]}}Pr.constructor_=function(){this._ptLocator=new Zn,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Ao,this._resultPolyList=new f,this._resultLineList=new f,this._resultPointList=new f;let e=arguments[0],t=arguments[1];Or.constructor_.call(this,e,t),this._graph=new xi(new bo()),this._geomFact=e.getFactory()},Pr.INTERSECTION=1,Pr.UNION=2,Pr.DIFFERENCE=3,Pr.SYMDIFFERENCE=4;var vr=/*#__PURE__*/Object.freeze({OverlayOp:Pr});class br extends er{constructor(){super(),br.constructor_.apply(this,arguments)}getNext(){return this._next}isInRing(){return null!==this._edgeRing}setRing(e){this._edgeRing=e}setLabel(e){this._label=e}getLabel(){return this._label}setNext(e){this._next=e}getRing(){return this._edgeRing}getClass(){return br}get interfaces_(){return[]}}br.constructor_=function(){this._edgeRing=null,this._next=null,this._label=-1;let e=arguments[0],t=arguments[1],n=arguments[2],i=arguments[3];er.constructor_.call(this,e,t,n,i)};class Dr extends nr{constructor(){super(),Dr.constructor_.apply(this,arguments)}getLine(){return this._line}getClass(){return Dr}get interfaces_(){return[]}}Dr.constructor_=function(){this._line=null;let e=arguments[0];this._line=e};class Ar{constructor(){Ar.constructor_.apply(this,arguments)}static findDirEdgesInRing(e){var t=e,n=new f;do n.add(t),t=t.getNext(),Te.isTrue(null!==t,"found null DE in ring"),Te.isTrue(t===e||!t.isInRing(),"found DE already in ring");while(t!==e);return n}static addEdge(e,t,n){if(t)for(var o=0;o<e.length;o++)n.add(e[o],!1);else for(var o=e.length-1;0<=o;o--)n.add(e[o],!1)}static findEdgeRingContaining(e,t){for(var n=e.getRing(),i=n.getEnvelopeInternal(),o=n.getCoordinateN(0),r=null,d=null,s=t.iterator();s.hasNext();){var a=s.next(),_=a.getRing(),l=_.getEnvelopeInternal();if(!l.equals(i)&&l.contains(i)){o=Ke.ptNotInList(n.getCoordinates(),_.getCoordinates());var g=!1;xn.isInRing(o,_.getCoordinates())&&(g=!0),g&&(null===r||d.contains(l))&&(r=a,d=r.getRing().getEnvelopeInternal())}}return r}isIncluded(){return this._isIncluded}getCoordinates(){if(null===this._ringPts){for(var e=new ve,t=this._deList.iterator();t.hasNext();){var n=t.next(),i=n.getEdge();Ar.addEdge(i.getLine().getCoordinates(),n.getEdgeDirection(),e)}this._ringPts=e.toCoordinateArray()}return this._ringPts}isIncludedSet(){return this._isIncludedSet}isValid(){return(this.getCoordinates(),!(3>=this._ringPts.length))&&(this.getRing(),this._ring.isValid())}build(e){var t=e;do this.add(t),t.setRing(this),t=t.getNext(),Te.isTrue(null!==t,"found null DE in ring"),Te.isTrue(t===e||!t.isInRing(),"found DE already in ring");while(t!==e)}isOuterHole(){return!!this._isHole&&!this.hasShell()}getPolygon(){var e=null;if(null!==this._holes){e=Array(this._holes.size()).fill(null);for(var t=0;t<this._holes.size();t++)e[t]=this._holes.get(t)}var n=this._factory.createPolygon(this._ring,e);return n}isHole(){return this._isHole}isProcessed(){return this._isProcessed}addHole(){if(arguments[0]instanceof Et){let e=arguments[0];null===this._holes&&(this._holes=new f),this._holes.add(e)}else if(arguments[0]instanceof Ar){let t=arguments[0];t.setShell(this);var e=t.getRing();null===this._holes&&(this._holes=new f),this._holes.add(e)}}setIncluded(e){this._isIncluded=e,this._isIncludedSet=!0}getOuterHole(){if(this.isHole())return null;for(var e=0;e<this._deList.size();e++){var t=this._deList.get(e),n=t.getSym().getRing();if(n.isOuterHole())return n}return null}computeHole(){var e=this.getRing();this._isHole=Me.isCCW(e.getCoordinates())}hasShell(){return null!==this._shell}isOuterShell(){return null!==this.getOuterHole()}getLineString(){return this.getCoordinates(),this._factory.createLineString(this._ringPts)}toString(){return qt.toLineString(new Tt(this.getCoordinates()))}getShell(){return this.isHole()?this._shell:this}add(e){this._deList.add(e)}getRing(){if(null!==this._ring)return this._ring;this.getCoordinates(),3>this._ringPts.length&&N.out.println(this._ringPts);try{this._ring=this._factory.createLinearRing(this._ringPts)}catch(e){if(e instanceof x)N.out.println(this._ringPts);else throw e}finally{}return this._ring}updateIncluded(){if(this.isHole())return null;for(var e=0;e<this._deList.size();e++){var t=this._deList.get(e),n=t.getSym().getRing().getShell();if(null!==n&&n.isIncludedSet())return this.setIncluded(!n.isIncluded()),null}}setShell(e){this._shell=e}setProcessed(e){this._isProcessed=e}getClass(){return Ar}get interfaces_(){return[]}}class Fr{constructor(){Fr.constructor_.apply(this,arguments)}compare(e,t){return e.getRing().getEnvelope().compareTo(t.getRing().getEnvelope())}getClass(){return Fr}get interfaces_(){return[s]}}Fr.constructor_=function(){},Ar.EnvelopeComparator=Fr,Ar.constructor_=function(){this._factory=null,this._deList=new f,this._lowestEdge=null,this._ring=null,this._ringPts=null,this._holes=null,this._shell=null,this._isHole=null,this._isProcessed=!1,this._isIncludedSet=!1,this._isIncluded=!1;let e=arguments[0];this._factory=e};class Mr extends sr{constructor(){super(),Mr.constructor_.apply(this,arguments)}static findLabeledEdgeRings(e){for(var t=new f,n=1,o=e.iterator(),i;o.hasNext();)if(i=o.next(),!i.isMarked()&&!(0<=i.getLabel())){t.add(i);var r=Ar.findDirEdgesInRing(i);Mr.label(r,n),n++}return t}static getDegreeNonDeleted(e){for(var t=e.getOutEdges().getEdges(),n=0,o=t.iterator(),i;o.hasNext();)i=o.next(),i.isMarked()||n++;return n}static deleteAllEdges(e){for(var t=e.getOutEdges().getEdges(),n=t.iterator(),i;n.hasNext();){i=n.next(),i.setMarked(!0);var o=i.getSym();null!==o&&o.setMarked(!0)}}static label(e,t){for(var n=e.iterator(),i;n.hasNext();)i=n.next(),i.setLabel(t)}static computeNextCWEdges(e){for(var t=e.getOutEdges(),n=null,o=null,r=t.getEdges().iterator(),i;r.hasNext();)if(i=r.next(),!i.isMarked()){if(null===n&&(n=i),null!==o){var d=o.getSym();d.setNext(i)}o=i}if(null!==o){var d=o.getSym();d.setNext(n)}}static computeNextCCWEdges(e,t){for(var n=e.getOutEdges(),o=null,r=null,d=n.getEdges(),s=d.size()-1;0<=s;s--){var a=d.get(s),_=a.getSym(),l=null;a.getLabel()===t&&(l=a);var g=null;_.getLabel()===t&&(g=_),null===l&&null===g||(null!==g&&(r=g),null!==l&&(null!==r&&(r.setNext(l),r=null),null===o&&(o=l)))}null!==r&&(Te.isTrue(null!==o),r.setNext(o))}static getDegree(e,t){for(var n=e.getOutEdges().getEdges(),o=0,r=n.iterator(),i;r.hasNext();)i=r.next(),i.getLabel()===t&&o++;return o}static findIntersectionNodes(e,t){var n=e,i=null;do{var o=n.getFromNode();1<Mr.getDegree(o,t)&&(null===i&&(i=new f),i.add(o)),n=n.getNext(),Te.isTrue(null!==n,"found null DE in ring"),Te.isTrue(n===e||!n.isInRing(),"found DE already in ring")}while(n!==e);return i}findEdgeRing(e){var t=new Ar(this._factory);return t.build(e),t}computeDepthParity(){if(0===arguments.length)for(;;){return null}}computeNextCWEdges(){for(var e=this.nodeIterator(),t;e.hasNext();)t=e.next(),Mr.computeNextCWEdges(t)}addEdge(e){if(e.isEmpty())return null;var t=Ke.removeRepeatedPoints(e.getCoordinates());if(2>t.length)return null;var n=t[0],i=t[t.length-1],o=this.getNode(n),r=this.getNode(i),d=new br(o,r,t[1],!0),s=new br(r,o,t[t.length-2],!1),a=new Dr(e);a.setDirectedEdges(d,s),this.add(a)}deleteCutEdges(){this.computeNextCWEdges(),Mr.findLabeledEdgeRings(this._dirEdges);for(var t=new f,n=this._dirEdges.iterator(),i;n.hasNext();)if(i=n.next(),!i.isMarked()){var o=i.getSym();if(i.getLabel()===o.getLabel()){i.setMarked(!0),o.setMarked(!0);var r=i.getEdge();t.add(r.getLine())}}return t}getEdgeRings(){this.computeNextCWEdges(),Mr.label(this._dirEdges,-1);var e=Mr.findLabeledEdgeRings(this._dirEdges);this.convertMaximalToMinimalEdgeRings(e);for(var t=new f,n=this._dirEdges.iterator(),i;n.hasNext();)if(i=n.next(),!i.isMarked()&&!i.isInRing()){var o=this.findEdgeRing(i);t.add(o)}return t}getNode(e){var t=this.findNode(e);return null===t&&(t=new or(e),this.add(t)),t}convertMaximalToMinimalEdgeRings(e){for(var t=e.iterator();t.hasNext();){var n=t.next(),i=n.getLabel(),o=Mr.findIntersectionNodes(n,i);if(null!==o)for(var r=o.iterator(),d;r.hasNext();)d=r.next(),Mr.computeNextCCWEdges(d,i)}}deleteDangles(){for(var t=this.findNodesOfDegree(1),n=new T,o=new $,r=t.iterator();r.hasNext();)o.push(r.next());for(;!o.isEmpty();){var d=o.pop();Mr.deleteAllEdges(d);for(var s=d.getOutEdges().getEdges(),r=s.iterator(),a;r.hasNext();){a=r.next(),a.setMarked(!0);var _=a.getSym();null!==_&&_.setMarked(!0);var l=a.getEdge();n.add(l.getLine());var e=a.getToNode();1===Mr.getDegreeNonDeleted(e)&&o.push(e)}}return n}getClass(){return Mr}get interfaces_(){return[]}}Mr.constructor_=function(){this._factory=null;let e=arguments[0];this._factory=e};class Gr{constructor(){Gr.constructor_.apply(this,arguments)}static findOuterShells(e){for(var t=e.iterator();t.hasNext();){var n=t.next(),i=n.getOuterHole();null===i||i.isProcessed()||(n.setIncluded(!0),i.setProcessed(!0))}}static extractPolygons(e,t){for(var n=new f,o=e.iterator(),i;o.hasNext();)i=o.next(),(t||i.isIncluded())&&n.add(i.getPolygon());return n}static assignHolesToShells(e,t){for(var n=e.iterator(),i;n.hasNext();)i=n.next(),Gr.assignHoleToShell(i,t)}static assignHoleToShell(e,t){var n=Ar.findEdgeRingContaining(e,t);null!==n&&n.addHole(e)}static findDisjointShells(e){Gr.findOuterShells(e);var t=null;do{t=!1;for(var n=e.iterator(),i;n.hasNext();)i=n.next(),i.isIncludedSet()||(i.updateIncluded(),!i.isIncludedSet()&&(t=!0))}while(t)}getGeometry(){return null===this._geomFactory&&(this._geomFactory=new Ft),this.polygonize(),this._extractOnlyPolygonal?this._geomFactory.buildGeometry(this._polyList):this._geomFactory.createGeometryCollection(Ft.toGeometryArray(this._polyList))}getInvalidRingLines(){return this.polygonize(),this._invalidRingLines}findValidRings(e,t,n){for(var o=e.iterator(),i;o.hasNext();)i=o.next(),i.isValid()?t.add(i):n.add(i.getLineString())}polygonize(){if(null!==this._polyList)return null;if(this._polyList=new f,null===this._graph)return null;this._dangles=this._graph.deleteDangles(),this._cutEdges=this._graph.deleteCutEdges();var e=this._graph.getEdgeRings(),t=new f;this._invalidRingLines=new f,this._isCheckingRingsValid?this.findValidRings(e,t,this._invalidRingLines):t=e,this.findShellsAndHoles(t),Gr.assignHolesToShells(this._holeList,this._shellList),_n.sort(this._shellList,new Ar.EnvelopeComparator);var n=!0;this._extractOnlyPolygonal&&(Gr.findDisjointShells(this._shellList),n=!1),this._polyList=Gr.extractPolygons(this._shellList,n)}getDangles(){return this.polygonize(),this._dangles}getCutEdges(){return this.polygonize(),this._cutEdges}getPolygons(){return this.polygonize(),this._polyList}add(){if(l(arguments[0],c)){let n=arguments[0];for(var e=n.iterator(),t;e.hasNext();)t=e.next(),this.add(t)}else if(arguments[0]instanceof ut){let e=arguments[0];this._geomFactory=e.getFactory(),null===this._graph&&(this._graph=new Mr(this._geomFactory)),this._graph.addEdge(e)}else if(arguments[0]instanceof Ue){let e=arguments[0];e.apply(this._lineStringAdder)}}setCheckRingsValid(e){this._isCheckingRingsValid=e}findShellsAndHoles(e){this._holeList=new f,this._shellList=new f;for(var t=e.iterator(),n;t.hasNext();)n=t.next(),n.computeHole(),n.isHole()?this._holeList.add(n):this._shellList.add(n)}getClass(){return Gr}get interfaces_(){return[]}}class Yr{constructor(){Yr.constructor_.apply(this,arguments)}filter(e){e instanceof ut&&this.p.add(e)}getClass(){return Yr}get interfaces_(){return[Ve]}}Yr.constructor_=function(){this.p=null;let e=arguments[0];this.p=e},Gr.LineStringAdder=Yr,Gr.constructor_=function(){if(this._lineStringAdder=new Yr(this),this._graph=null,this._dangles=new f,this._cutEdges=new f,this._invalidRingLines=new f,this._holeList=null,this._shellList=null,this._polyList=null,this._isCheckingRingsValid=!0,this._extractOnlyPolygonal=null,this._geomFactory=null,0===arguments.length)Gr.constructor_.call(this,!1);else if(1===arguments.length){let e=arguments[0];this._extractOnlyPolygonal=e}};var zr=/*#__PURE__*/Object.freeze({Polygonizer:Gr});class qr{constructor(){qr.constructor_.apply(this,arguments)}createEdgeEndForNext(t,n,i,o){var r=i.segmentIndex+1;if(r>=t.getNumPoints()&&null===o)return null;var d=t.getCoordinate(r);null!==o&&o.segmentIndex===i.segmentIndex&&(d=o.coord);var s=new pi(t,i.coord,d,new oi(t.getLabel()));n.add(s)}createEdgeEndForPrev(t,n,i,o){var r=i.segmentIndex;if(0===i.dist){if(0===r)return null;r--}var d=t.getCoordinate(r);null!==o&&o.segmentIndex>=r&&(d=o.coord);var s=new oi(t.getLabel());s.flip();var a=new pi(t,i.coord,d,s);n.add(a)}computeEdgeEnds(){if(1===arguments.length){let e=arguments[0];for(var t=new f,n=e,i;n.hasNext();)i=n.next(),this.computeEdgeEnds(i,t);return t}if(2===arguments.length){let e=arguments[0],t=arguments[1];var o=e.getEdgeIntersectionList();o.addEndpoints();var r=o.iterator(),d=null,s=null;if(!r.hasNext())return null;var a=r.next();do d=s,s=a,a=null,r.hasNext()&&(a=r.next()),null!==s&&(this.createEdgeEndForPrev(e,t,s,d),this.createEdgeEndForNext(e,t,s,a));while(null!==s)}}getClass(){return qr}get interfaces_(){return[]}}qr.constructor_=function(){};class Br extends pi{constructor(){super(),Br.constructor_.apply(this,arguments)}insert(t){this._edgeEnds.add(t)}print(e){e.println("EdgeEndBundle--> Label: "+this._label);for(var t=this.iterator(),n;t.hasNext();)n=t.next(),n.print(e),e.println()}iterator(){return this._edgeEnds.iterator()}getEdgeEnds(){return this._edgeEnds}computeLabelOn(t,n){for(var i=0,o=!1,r=this.iterator();r.hasNext();){var d=r.next(),e=d.getLabel().getLocation(t);e===Xt.BOUNDARY&&i++,e===Xt.INTERIOR&&(o=!0)}var e=Xt.NONE;o&&(e=Xt.INTERIOR),0<i&&(e=hi.determineBoundary(n,i)),this._label.setLocation(t,e)}computeLabelSide(t,n){for(var i=this.iterator(),o;i.hasNext();)if(o=i.next(),o.getLabel().isArea()){var r=o.getLabel().getLocation(t,n);if(r===Xt.INTERIOR)return this._label.setLocation(t,n,Xt.INTERIOR),null;r===Xt.EXTERIOR&&this._label.setLocation(t,n,Xt.EXTERIOR)}}getLabel(){return this._label}computeLabelSides(e){this.computeLabelSide(e,Qn.LEFT),this.computeLabelSide(e,Qn.RIGHT)}updateIM(e){gi.updateIM(this._label,e)}computeLabel(t){for(var n=!1,o=this.iterator(),r;o.hasNext();)r=o.next(),r.getLabel().isArea()&&(n=!0);this._label=n?new oi(Xt.NONE,Xt.NONE,Xt.NONE):new oi(Xt.NONE);for(var d=0;2>d;d++)this.computeLabelOn(d,t),n&&this.computeLabelSides(d)}getClass(){return Br}get interfaces_(){return[]}}Br.constructor_=function(){if(this._edgeEnds=new f,1===arguments.length){let t=arguments[0];Br.constructor_.call(this,null,t)}else if(2===arguments.length){let t=arguments[1];pi.constructor_.call(this,t.getEdge(),t.getCoordinate(),t.getDirectedCoordinate(),new oi(t.getLabel())),this.insert(t)}};class Vr extends Po{constructor(){super(),Vr.constructor_.apply(this,arguments)}updateIM(e){for(var t=this.iterator(),n;t.hasNext();)n=t.next(),n.updateIM(e)}insert(t){var e=this._edgeMap.get(t);null===e?(e=new Br(t),this.insertEdgeEnd(t,e)):e.insert(t)}getClass(){return Vr}get interfaces_(){return[]}}Vr.constructor_=function(){};class Ur extends ci{constructor(){super(),Ur.constructor_.apply(this,arguments)}updateIMFromEdges(e){this._edges.updateIM(e)}computeIM(e){e.setAtLeastIfValid(this._label.getLocation(0),this._label.getLocation(1),0)}getClass(){return Ur}get interfaces_(){return[]}}Ur.constructor_=function(){let e=arguments[0],t=arguments[1];ci.constructor_.call(this,e,t)};class Xr extends fi{constructor(){super(),Xr.constructor_.apply(this,arguments)}createNode(e){return new Ur(e,new Vr())}getClass(){return Xr}get interfaces_(){return[]}}Xr.constructor_=function(){};class kr{constructor(){kr.constructor_.apply(this,arguments)}insertEdgeEnds(t){for(var n=t.iterator(),i;n.hasNext();)i=n.next(),this._nodes.add(i)}computeProperIntersectionIM(e,t){var n=this._arg[0].getGeometry().getDimension(),i=this._arg[1].getGeometry().getDimension(),o=e.hasProperIntersection(),r=e.hasProperInteriorIntersection();2===n&&2===i?o&&t.setAtLeast("212101212"):2===n&&1===i?(o&&t.setAtLeast("FFF0FFFF2"),r&&t.setAtLeast("1FFFFF1FF")):1===n&&2===i?(o&&t.setAtLeast("F0FFFFFF2"),r&&t.setAtLeast("1F1FFFFFF")):1===n&&1===i&&r&&t.setAtLeast("0FFFFFFFF")}labelIsolatedEdges(t,n){for(var i=this._arg[t].getEdgeIterator(),o;i.hasNext();)o=i.next(),o.isIsolated()&&(this.labelIsolatedEdge(o,n,this._arg[n].getGeometry()),this._isolatedEdges.add(o))}labelIsolatedEdge(t,e,n){if(0<n.getDimension()){var i=this._ptLocator.locate(t.getCoordinate(),n);t.getLabel().setAllLocations(e,i)}else t.getLabel().setAllLocations(e,Xt.EXTERIOR)}computeIM(){var e=new kt;if(e.set(Xt.EXTERIOR,Xt.EXTERIOR,2),!this._arg[0].getGeometry().getEnvelopeInternal().intersects(this._arg[1].getGeometry().getEnvelopeInternal()))return this.computeDisjointIM(e),e;this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1);var t=this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!1);this.computeIntersectionNodes(0),this.computeIntersectionNodes(1),this.copyNodesAndLabels(0),this.copyNodesAndLabels(1),this.labelIsolatedNodes(),this.computeProperIntersectionIM(t,e);var n=new qr,i=n.computeEdgeEnds(this._arg[0].getEdgeIterator());this.insertEdgeEnds(i);var o=n.computeEdgeEnds(this._arg[1].getEdgeIterator());return this.insertEdgeEnds(o),this.labelNodeEdges(),this.labelIsolatedEdges(0,1),this.labelIsolatedEdges(1,0),this.updateIM(e),e}labelNodeEdges(){for(var e=this._nodes.iterator(),t;e.hasNext();)t=e.next(),t.getEdges().computeLabelling(this._arg)}copyNodesAndLabels(e){for(var t=this._arg[e].getNodeIterator();t.hasNext();){var n=t.next(),i=this._nodes.addNode(n.getCoordinate());i.setLabel(e,n.getLabel().getLocation(e))}}labelIntersectionNodes(t){for(var o=this._arg[t].getEdgeIterator();o.hasNext();)for(var i=o.next(),e=i.getLabel().getLocation(t),r=i.getEdgeIntersectionList().iterator();r.hasNext();){var d=r.next(),s=this._nodes.find(d.coord);s.getLabel().isNull(t)&&(e===Xt.BOUNDARY?s.setLabelBoundary(t):s.setLabel(t,Xt.INTERIOR))}}labelIsolatedNode(e,t){var n=this._ptLocator.locate(e.getCoordinate(),this._arg[t].getGeometry());e.getLabel().setAllLocations(t,n)}computeIntersectionNodes(t){for(var o=this._arg[t].getEdgeIterator();o.hasNext();)for(var i=o.next(),e=i.getLabel().getLocation(t),r=i.getEdgeIntersectionList().iterator();r.hasNext();){var d=r.next(),s=this._nodes.addNode(d.coord);e===Xt.BOUNDARY?s.setLabelBoundary(t):s.getLabel().isNull(t)&&s.setLabel(t,Xt.INTERIOR)}}labelIsolatedNodes(){for(var e=this._nodes.iterator();e.hasNext();){var t=e.next(),n=t.getLabel();Te.isTrue(0<n.getGeometryCount(),"node with empty label found"),t.isIsolated()&&(n.isNull(0)?this.labelIsolatedNode(t,0):this.labelIsolatedNode(t,1))}}updateIM(t){for(var n=this._isolatedEdges.iterator(),i;n.hasNext();)i=n.next(),i.updateIM(t);for(var o=this._nodes.iterator(),r;o.hasNext();)r=o.next(),r.updateIM(t),r.updateIMFromEdges(t)}computeDisjointIM(e){var t=this._arg[0].getGeometry();t.isEmpty()||(e.set(Xt.INTERIOR,Xt.EXTERIOR,t.getDimension()),e.set(Xt.BOUNDARY,Xt.EXTERIOR,t.getBoundaryDimension()));var n=this._arg[1].getGeometry();n.isEmpty()||(e.set(Xt.EXTERIOR,Xt.INTERIOR,n.getDimension()),e.set(Xt.EXTERIOR,Xt.BOUNDARY,n.getBoundaryDimension()))}getClass(){return kr}get interfaces_(){return[]}}kr.constructor_=function(){this._li=new Vt,this._ptLocator=new Zn,this._arg=null,this._nodes=new ui(new Xr()),this._im=null,this._isolatedEdges=new f,this._invalidPoint=null;let e=arguments[0];this._arg=e};class Hr{constructor(){Hr.constructor_.apply(this,arguments)}static contains(e,t){var n=new Hr(e);return n.contains(t)}isContainedInBoundary(e){if(e instanceof xt)return!1;if(e instanceof mt)return this.isPointContainedInBoundary(e);if(e instanceof ut)return this.isLineStringContainedInBoundary(e);for(var t=0,n;t<e.getNumGeometries();t++)if(n=e.getGeometryN(t),!this.isContainedInBoundary(n))return!1;return!0}isLineSegmentContainedInBoundary(e,t){if(e.equals(t))return this.isPointContainedInBoundary(e);if(e.x===t.x){if(e.x===this._rectEnv.getMinX()||e.x===this._rectEnv.getMaxX())return!0;}else if(e.y===t.y&&(e.y===this._rectEnv.getMinY()||e.y===this._rectEnv.getMaxY()))return!0;return!1}isLineStringContainedInBoundary(e){for(var t=e.getCoordinateSequence(),n=new Re,o=new Re,r=0;r<t.size()-1;r++)if(t.getCoordinate(r,n),t.getCoordinate(r+1,o),!this.isLineSegmentContainedInBoundary(n,o))return!1;return!0}isPointContainedInBoundary(){if(arguments[0]instanceof mt){let e=arguments[0];return this.isPointContainedInBoundary(e.getCoordinate())}if(arguments[0]instanceof Re){let e=arguments[0];return e.x===this._rectEnv.getMinX()||e.x===this._rectEnv.getMaxX()||e.y===this._rectEnv.getMinY()||e.y===this._rectEnv.getMaxY()}}contains(e){return!!this._rectEnv.contains(e.getEnvelopeInternal())&&!this.isContainedInBoundary(e)}getClass(){return Hr}get interfaces_(){return[]}}Hr.constructor_=function(){this._rectEnv=null;let e=arguments[0];this._rectEnv=e.getEnvelopeInternal()};class wr{constructor(){wr.constructor_.apply(this,arguments)}intersects(e,t){var n=new be(e,t);if(!this._rectEnv.intersects(n))return!1;if(this._rectEnv.intersects(e))return!0;if(this._rectEnv.intersects(t))return!0;if(0<e.compareTo(t)){var i=e;e=t,t=i}var o=!1;return t.y>e.y&&(o=!0),o?this._li.computeIntersection(e,t,this._diagDown0,this._diagDown1):this._li.computeIntersection(e,t,this._diagUp0,this._diagUp1),!!this._li.hasIntersection()}getClass(){return wr}get interfaces_(){return[]}}wr.constructor_=function(){this._li=new Vt,this._rectEnv=null,this._diagUp0=null,this._diagUp1=null,this._diagDown0=null,this._diagDown1=null;let e=arguments[0];this._rectEnv=e,this._diagUp0=new Re(e.getMinX(),e.getMinY()),this._diagUp1=new Re(e.getMaxX(),e.getMaxY()),this._diagDown0=new Re(e.getMinX(),e.getMaxY()),this._diagDown1=new Re(e.getMaxX(),e.getMinY())};class Wr{constructor(){Wr.constructor_.apply(this,arguments)}applyTo(e){for(var t=0,n;t<e.getNumGeometries()&&!this._isDone;t++)if(n=e.getGeometryN(t),!!(n instanceof dt))this.applyTo(n);else if(this.visit(n),this.isDone())return this._isDone=!0,null}getClass(){return Wr}get interfaces_(){return[]}}Wr.constructor_=function(){this._isDone=!1};class jr{constructor(){jr.constructor_.apply(this,arguments)}static intersects(e,t){var n=new jr(e);return n.intersects(t)}intersects(e){if(!this._rectEnv.intersects(e.getEnvelopeInternal()))return!1;var t=new Kr(this._rectEnv);if(t.applyTo(e),t.intersects())return!0;var n=new Zr(this._rectangle);if(n.applyTo(e),n.containsPoint())return!0;var i=new Qr(this._rectangle);return i.applyTo(e),!!i.intersects()}getClass(){return jr}get interfaces_(){return[]}}jr.constructor_=function(){this._rectangle=null,this._rectEnv=null;let e=arguments[0];this._rectangle=e,this._rectEnv=e.getEnvelopeInternal()};class Kr extends Wr{constructor(){super(),Kr.constructor_.apply(this,arguments)}isDone(){return!0===this._intersects}visit(e){var t=e.getEnvelopeInternal();return this._rectEnv.intersects(t)?this._rectEnv.contains(t)?(this._intersects=!0,null):t.getMinX()>=this._rectEnv.getMinX()&&t.getMaxX()<=this._rectEnv.getMaxX()?(this._intersects=!0,null):t.getMinY()>=this._rectEnv.getMinY()&&t.getMaxY()<=this._rectEnv.getMaxY()?(this._intersects=!0,null):void 0:null}intersects(){return this._intersects}getClass(){return Kr}get interfaces_(){return[]}}Kr.constructor_=function(){this._rectEnv=null,this._intersects=!1;let e=arguments[0];this._rectEnv=e};class Zr extends Wr{constructor(){super(),Zr.constructor_.apply(this,arguments)}isDone(){return!0===this._containsPoint}visit(e){if(!(e instanceof xt))return null;var t=e.getEnvelopeInternal();if(!this._rectEnv.intersects(t))return null;for(var n=new Re,o=0;4>o;o++)if(this._rectSeq.getCoordinate(o,n),t.contains(n)&&En.containsPointInPolygon(n,e))return this._containsPoint=!0,null}containsPoint(){return this._containsPoint}getClass(){return Zr}get interfaces_(){return[]}}Zr.constructor_=function(){this._rectSeq=null,this._rectEnv=null,this._containsPoint=!1;let e=arguments[0];this._rectSeq=e.getExteriorRing().getCoordinateSequence(),this._rectEnv=e.getEnvelopeInternal()};class Qr extends Wr{constructor(){super(),Qr.constructor_.apply(this,arguments)}intersects(){return this._hasIntersection}isDone(){return!0===this._hasIntersection}visit(e){var t=e.getEnvelopeInternal();if(!this._rectEnv.intersects(t))return null;var n=cn.getLines(e);this.checkIntersectionWithLineStrings(n)}checkIntersectionWithLineStrings(e){for(var t=e.iterator(),n;t.hasNext();)if(n=t.next(),this.checkIntersectionWithSegments(n),this._hasIntersection)return null}checkIntersectionWithSegments(e){for(var t=e.getCoordinateSequence(),n=1;n<t.size();n++)if(t.getCoordinate(n-1,this._p0),t.getCoordinate(n,this._p1),this._rectIntersector.intersects(this._p0,this._p1))return this._hasIntersection=!0,null}getClass(){return Qr}get interfaces_(){return[]}}Qr.constructor_=function(){this._rectEnv=null,this._rectIntersector=null,this._hasIntersection=!1,this._p0=new Re,this._p1=new Re;let e=arguments[0];this._rectEnv=e.getEnvelopeInternal(),this._rectIntersector=new wr(this._rectEnv)};class Jr extends Or{constructor(){super(),Jr.constructor_.apply(this,arguments)}static covers(e,t){return!(2===t.getDimension()&&2>e.getDimension())&&!(1===t.getDimension()&&1>e.getDimension()&&0<t.getLength())&&!!e.getEnvelopeInternal().covers(t.getEnvelopeInternal())&&(!!e.isRectangle()||new Jr(e,t).getIntersectionMatrix().isCovers())}static intersects(e,t){if(!e.getEnvelopeInternal().intersects(t.getEnvelopeInternal()))return!1;if(e.isRectangle())return jr.intersects(e,t);if(t.isRectangle())return jr.intersects(t,e);if(e.isGeometryCollection()||t.isGeometryCollection()){for(var n=0;n<e.getNumGeometries();n++)for(var o=0;o<t.getNumGeometries();o++)if(e.getGeometryN(n).intersects(t.getGeometryN(o)))return!0;return!1}return new Jr(e,t).getIntersectionMatrix().isIntersects()}static touches(e,t){return!!e.getEnvelopeInternal().intersects(t.getEnvelopeInternal())&&new Jr(e,t).getIntersectionMatrix().isTouches(e.getDimension(),t.getDimension())}static relate(){if(2===arguments.length){let n=arguments[0],i=arguments[1];var e=new Jr(n,i),t=e.getIntersectionMatrix();return t}if(3===arguments.length){let n=arguments[0],i=arguments[1],o=arguments[2];var e=new Jr(n,i,o),t=e.getIntersectionMatrix();return t}}static overlaps(e,t){return!!e.getEnvelopeInternal().intersects(t.getEnvelopeInternal())&&new Jr(e,t).getIntersectionMatrix().isOverlaps(e.getDimension(),t.getDimension())}static crosses(e,t){return!!e.getEnvelopeInternal().intersects(t.getEnvelopeInternal())&&new Jr(e,t).getIntersectionMatrix().isCrosses(e.getDimension(),t.getDimension())}static contains(e,t){return!(2===t.getDimension()&&2>e.getDimension())&&!(1===t.getDimension()&&1>e.getDimension()&&0<t.getLength())&&!!e.getEnvelopeInternal().contains(t.getEnvelopeInternal())&&(e.isRectangle()?Hr.contains(e,t):new Jr(e,t).getIntersectionMatrix().isContains())}getIntersectionMatrix(){return this._relate.computeIM()}getClass(){return Jr}get interfaces_(){return[]}}Jr.constructor_=function(){if(this._relate=null,2===arguments.length){let e=arguments[0],t=arguments[1];Or.constructor_.call(this,e,t),this._relate=new kr(this._arg)}else if(3===arguments.length){let e=arguments[0],t=arguments[1],n=arguments[2];Or.constructor_.call(this,e,t,n),this._relate=new kr(this._arg)}};var $r=/*#__PURE__*/Object.freeze({RelateOp:Jr});class ed{constructor(){ed.constructor_.apply(this,arguments)}static combine(){if(1===arguments.length){let t=arguments[0];var e=new ed(t);return e.combine()}if(2===arguments.length){let t=arguments[0],n=arguments[1];var e=new ed(ed.createList(t,n));return e.combine()}if(3===arguments.length){let t=arguments[0],n=arguments[1],i=arguments[2];var e=new ed(ed.createList(t,n,i));return e.combine()}}static extractFactory(e){return e.isEmpty()?null:e.iterator().next().getFactory()}static createList(){if(2===arguments.length){let t=arguments[0],n=arguments[1];var e=new f;return e.add(t),e.add(n),e}if(3===arguments.length){let t=arguments[0],n=arguments[1],i=arguments[2];var e=new f;return e.add(t),e.add(n),e.add(i),e}}extractElements(e,t){if(null===e)return null;for(var n=0,o;n<e.getNumGeometries();n++)o=e.getGeometryN(n),this._skipEmpty&&o.isEmpty()||t.add(o)}combine(){for(var e=new f,t=this._inputGeoms.iterator(),n;t.hasNext();)n=t.next(),this.extractElements(n,e);return 0===e.size()?null===this._geomFactory?null:this._geomFactory.createGeometryCollection():this._geomFactory.buildGeometry(e)}getClass(){return ed}get interfaces_(){return[]}}ed.constructor_=function(){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null;let e=arguments[0];this._geomFactory=ed.extractFactory(e),this._inputGeoms=e};class td{constructor(){td.constructor_.apply(this,arguments)}static union(e,t){var n=new td(e,t);return n.union()}union(){for(var e=new Zn,t=new F,n=0;n<this._pointGeom.getNumGeometries();n++){var o=this._pointGeom.getGeometryN(n),r=o.getCoordinate(),d=e.locate(r,this._otherGeom);d===Xt.EXTERIOR&&t.add(r)}if(0===t.size())return this._otherGeom;var s=null,a=Ke.toCoordinateArray(t);return s=1===a.length?this._geomFact.createPoint(a[0]):this._geomFact.createMultiPointFromCoords(a),ed.combine(s,this._otherGeom)}getClass(){return td}get interfaces_(){return[]}}td.constructor_=function(){this._pointGeom=null,this._otherGeom=null,this._geomFact=null;let e=arguments[0],t=arguments[1];this._pointGeom=e,this._otherGeom=t,this._geomFact=t.getFactory()};class nd{constructor(){nd.constructor_.apply(this,arguments)}static isOfType(e,t){return e.getGeometryType()===t||t===Ue.TYPENAME_LINESTRING&&e.getGeometryType()===Ue.TYPENAME_LINEARRING}static extract(){if(2===arguments.length){let e=arguments[0],t=arguments[1];return nd.extract(e,t,new f)}if(3===arguments.length){if(l(arguments[2],p)&&arguments[0]instanceof Ue&&"string"==typeof arguments[1]){let e=arguments[0],t=arguments[1],n=arguments[2];return e.getGeometryType()===t?n.add(e):e instanceof dt&&e.apply(new nd(t,n)),n}if(l(arguments[2],p)&&arguments[0]instanceof Ue&&arguments[1]instanceof Class){let e=arguments[0],t=arguments[1],n=arguments[2];return nd.extract(e,nd.toGeometryType(t),n)}}}filter(e){(null===this._geometryType||nd.isOfType(e,this._geometryType))&&this._comps.add(e)}getClass(){return nd}get interfaces_(){return[ot]}}nd.constructor_=function(){this._geometryType=null,this._comps=null;let e=arguments[0],t=arguments[1];this._geometryType=e,this._comps=t};class id{constructor(){id.constructor_.apply(this,arguments)}static restrictToPolygons(e){if(l(e,ft))return e;var t=wo.getPolygons(e);return 1===t.size()?t.get(0):e.getFactory().createMultiPolygon(Ft.toPolygonArray(t))}static getGeometry(e,t){return t>=e.size()?null:e.get(t)}static union(e){var t=new id(e);return t.union()}reduceToGeometries(e){for(var t=new f,n=e.iterator();n.hasNext();){var i=n.next(),o=null;l(i,p)?o=this.unionTree(i):i instanceof Ue&&(o=i),t.add(o)}return t}extractByEnvelope(e,t,n){for(var o=new f,r=0,d;r<t.getNumGeometries();r++)d=t.getGeometryN(r),d.getEnvelopeInternal().intersects(e)?o.add(d):n.add(d);return this._geomFactory.buildGeometry(o)}unionOptimized(e,t){var n=e.getEnvelopeInternal(),i=t.getEnvelopeInternal();if(!n.intersects(i)){var o=ed.combine(e,t);return o}if(1>=e.getNumGeometries()&&1>=t.getNumGeometries())return this.unionActual(e,t);var r=n.intersection(i);return this.unionUsingEnvelopeIntersection(e,t,r)}union(){if(null===this._inputPolys)throw new IllegalStateException("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var e=new Vi(id.STRTREE_NODE_CAPACITY),t=this._inputPolys.iterator(),n;t.hasNext();)n=t.next(),e.insert(n.getEnvelopeInternal(),n);this._inputPolys=null;var i=e.itemsTree(),o=this.unionTree(i);return o}binaryUnion(){if(1===arguments.length){let e=arguments[0];return this.binaryUnion(e,0,e.size())}if(3===arguments.length){let i=arguments[0],o=arguments[1],r=arguments[2];if(1>=r-o){var e=id.getGeometry(i,o);return this.unionSafe(e,null)}if(2==r-o)return this.unionSafe(id.getGeometry(i,o),id.getGeometry(i,o+1));var t=pe((r+o)/2),e=this.binaryUnion(i,o,t),n=this.binaryUnion(i,t,r);return this.unionSafe(e,n)}}repeatedUnion(e){for(var t=null,n=e.iterator(),i;n.hasNext();)i=n.next(),t=null===t?i.copy():t.union(i);return t}unionSafe(e,t){return null===e&&null===t?null:null===e?t.copy():null===t?e.copy():this.unionOptimized(e,t)}unionActual(e,t){return id.restrictToPolygons(e.union(t))}unionTree(e){var t=this.reduceToGeometries(e),n=this.binaryUnion(t);return n}unionUsingEnvelopeIntersection(e,t,n){var i=new f,o=this.extractByEnvelope(n,e,i),r=this.extractByEnvelope(n,t,i),d=this.unionActual(o,r);i.add(d);var s=ed.combine(i);return s}bufferUnion(){if(1===arguments.length){let i=arguments[0];var e=i.get(0).getFactory(),t=e.buildGeometry(i),n=t.buffer(0);return n}if(2===arguments.length){let i=arguments[0],o=arguments[1];var e=i.getFactory(),t=e.createGeometryCollection([i,o]),n=t.buffer(0);return n}}getClass(){return id}get interfaces_(){return[]}}id.constructor_=function(){this._inputPolys=null,this._geomFactory=null;let e=arguments[0];this._inputPolys=e,null===this._inputPolys&&(this._inputPolys=new f)},id.STRTREE_NODE_CAPACITY=4;class od{constructor(){od.constructor_.apply(this,arguments)}static union(){if(1===arguments.length){if(l(arguments[0],c)){let t=arguments[0];var e=new od(t);return e.union()}if(arguments[0]instanceof Ue){let t=arguments[0];var e=new od(t);return e.union()}}else if(2===arguments.length){let t=arguments[0],n=arguments[1];var e=new od(t,n);return e.union()}}unionNoOpt(e){var t=this._geomFact.createPoint();return Rr.overlayOp(e,t,Pr.UNION)}unionWithNull(e,t){return null===e&&null===t?null:null===t?e:null===e?t:e.union(t)}extract(){if(l(arguments[0],c)){let n=arguments[0];for(var e=n.iterator(),t;e.hasNext();)t=e.next(),this.extract(t)}else if(arguments[0]instanceof Ue){let e=arguments[0];null===this._geomFact&&(this._geomFact=e.getFactory()),nd.extract(e,Ue.TYPENAME_POLYGON,this._polygons),nd.extract(e,Ue.TYPENAME_LINESTRING,this._lines),nd.extract(e,Ue.TYPENAME_POINT,this._points)}}union(){if(null===this._geomFact)return null;var e=null;if(0<this._points.size()){var t=this._geomFact.buildGeometry(this._points);e=this.unionNoOpt(t)}var n=null;if(0<this._lines.size()){var i=this._geomFact.buildGeometry(this._lines);n=this.unionNoOpt(i)}var o=null;0<this._polygons.size()&&(o=id.union(this._polygons));var r=this.unionWithNull(n,o),d=null;return d=null===e?r:null===r?e:td.union(e,r),null===d?this._geomFact.createGeometryCollection():d}getClass(){return od}get interfaces_(){return[]}}od.constructor_=function(){if(this._polygons=new f,this._lines=new f,this._points=new f,this._geomFact=null,1===arguments.length){if(l(arguments[0],c)){let e=arguments[0];this.extract(e)}else if(arguments[0]instanceof Ue){let e=arguments[0];this.extract(e)}}else if(2===arguments.length){let e=arguments[0],t=arguments[1];this._geomFact=t,this.extract(e)}};var rd=/*#__PURE__*/Object.freeze({UnaryUnionOp:od});class dd{constructor(){dd.constructor_.apply(this,arguments)}static findDifferentPoint(e,t){for(var n=0;n<e.length;n++)if(!e[n].equals(t))return e[n];return null}visitInteriorRing(t,n){var i=t.getCoordinates(),o=i[0],r=dd.findDifferentPoint(i,o),d=n.findEdgeInSameDirection(o,r),e=n.findEdgeEnd(d),s=null;e.getLabel().getLocation(0,Qn.RIGHT)===Xt.INTERIOR?s=e:e.getSym().getLabel().getLocation(0,Qn.RIGHT)===Xt.INTERIOR&&(s=e.getSym()),Te.isTrue(null!==s,"unable to find dirEdge with Interior on RHS"),this.visitLinkedDirectedEdges(s)}visitShellInteriors(e,t){if(e instanceof xt){var n=e;this.visitInteriorRing(n.getExteriorRing(),t)}if(e instanceof It)for(var o=e,r=0,n;r<o.getNumGeometries();r++)n=o.getGeometryN(r),this.visitInteriorRing(n.getExteriorRing(),t)}getCoordinate(){return this._disconnectedRingcoord}setInteriorEdgesInResult(e){for(var t=e.getEdgeEnds().iterator(),n;t.hasNext();)n=t.next(),n.getLabel().getLocation(0,Qn.RIGHT)===Xt.INTERIOR&&n.setInResult(!0)}visitLinkedDirectedEdges(e){var t=e;do Te.isTrue(null!==t,"found null Directed Edge"),t.setVisited(!0),t=t.getNext();while(t!==e)}buildEdgeRings(e){for(var t=new f,n=e.iterator(),i;n.hasNext();)if(i=n.next(),i.isInResult()&&null===i.getEdgeRing()){var o=new Eo(i,this._geometryFactory);o.linkDirectedEdgesForMinimalEdgeRings();var r=o.buildMinimalRings();t.addAll(r)}return t}hasUnvisitedShellEdge(e){for(var t=0,n;t<e.size();t++)if(n=e.get(t),!n.isHole()){var o=n.getEdges(),r=o.get(0);if(r.getLabel().getLocation(0,Qn.RIGHT)===Xt.INTERIOR)for(var d=0;d<o.size();d++)if(r=o.get(d),!r.isVisited())return this._disconnectedRingcoord=r.getCoordinate(),!0}return!1}isInteriorsConnected(){var e=new f;this._geomGraph.computeSplitEdges(e);var t=new xi(new bo());t.addEdges(e),this.setInteriorEdgesInResult(t),t.linkResultDirectedEdges();var n=this.buildEdgeRings(t.getEdgeEnds());return this.visitShellInteriors(this._geomGraph.getGeometry(),t),!this.hasUnvisitedShellEdge(n)}getClass(){return dd}get interfaces_(){return[]}}dd.constructor_=function(){this._geometryFactory=new Ft,this._geomGraph=null,this._disconnectedRingcoord=null;let e=arguments[0];this._geomGraph=e};class sd{constructor(){sd.constructor_.apply(this,arguments)}insertEdgeEnds(t){for(var n=t.iterator(),i;n.hasNext();)i=n.next(),this._nodes.add(i)}getNodeIterator(){return this._nodes.iterator()}copyNodesAndLabels(e,t){for(var n=e.getNodeIterator();n.hasNext();){var i=n.next(),o=this._nodes.addNode(i.getCoordinate());o.setLabel(t,i.getLabel().getLocation(t))}}build(e){this.computeIntersectionNodes(e,0),this.copyNodesAndLabels(e,0);var t=new qr,n=t.computeEdgeEnds(e.getEdgeIterator());this.insertEdgeEnds(n)}computeIntersectionNodes(t,i){for(var o=t.getEdgeIterator();o.hasNext();)for(var r=o.next(),e=r.getLabel().getLocation(i),d=r.getEdgeIntersectionList().iterator();d.hasNext();){var s=d.next(),a=this._nodes.addNode(s.coord);e===Xt.BOUNDARY?a.setLabelBoundary(i):a.getLabel().isNull(i)&&a.setLabel(i,Xt.INTERIOR)}}getClass(){return sd}get interfaces_(){return[]}}sd.constructor_=function(){this._nodes=new ui(new Xr())};class ad{constructor(){ad.constructor_.apply(this,arguments)}isNodeEdgeAreaLabelsConsistent(){for(var e=this._nodeGraph.getNodeIterator(),t;e.hasNext();)if(t=e.next(),!t.getEdges().isAreaLabelsConsistent(this._geomGraph))return this._invalidPoint=t.getCoordinate().copy(),!1;return!0}getInvalidPoint(){return this._invalidPoint}hasDuplicateRings(){for(var e=this._nodeGraph.getNodeIterator(),t;e.hasNext();){t=e.next();for(var n=t.getEdges().iterator(),i;n.hasNext();)if(i=n.next(),1<i.getEdgeEnds().size())return this._invalidPoint=i.getEdge().getCoordinate(0),!0}return!1}isNodeConsistentArea(){var e=this._geomGraph.computeSelfNodes(this._li,!0,!0);return e.hasProperIntersection()?(this._invalidPoint=e.getProperIntersectionPoint(),!1):(this._nodeGraph.build(this._geomGraph),this.isNodeEdgeAreaLabelsConsistent())}getClass(){return ad}get interfaces_(){return[]}}ad.constructor_=function(){this._li=new Vt,this._geomGraph=null,this._nodeGraph=new sd,this._invalidPoint=null;let e=arguments[0];this._geomGraph=e};class _d{constructor(){_d.constructor_.apply(this,arguments)}buildIndex(){this._index=new Vi;for(var e=0;e<this._rings.size();e++){var t=this._rings.get(e),n=t.getEnvelopeInternal();this._index.insert(n,t)}}getNestedPoint(){return this._nestedPt}isNonNested(){this.buildIndex();for(var e=0;e<this._rings.size();e++)for(var t=this._rings.get(e),n=t.getCoordinates(),o=this._index.query(t.getEnvelopeInternal()),r=0;r<o.size();r++){var d=o.get(r),s=d.getCoordinates();if(t!==d&&t.getEnvelopeInternal().intersects(d.getEnvelopeInternal())){var a=gd.findPtNotNode(n,d,this._graph);if(null!==a){var _=xn.isInRing(a,s);if(_)return this._nestedPt=a,!1}}}return!0}add(e){this._rings.add(e),this._totalEnv.expandToInclude(e.getEnvelopeInternal())}getClass(){return _d}get interfaces_(){return[]}}_d.constructor_=function(){this._graph=null,this._rings=new f,this._totalEnv=new be,this._index=null,this._nestedPt=null;let e=arguments[0];this._graph=e};class ld{constructor(){ld.constructor_.apply(this,arguments)}getErrorType(){return this._errorType}getMessage(){return ld.errMsg[this._errorType]}getCoordinate(){return this._pt}toString(){var e="";return null!==this._pt&&(e=" at or near point "+this._pt),this.getMessage()+e}getClass(){return ld}get interfaces_(){return[]}}ld.constructor_=function(){if(this._errorType=null,this._pt=null,1===arguments.length){let e=arguments[0];ld.constructor_.call(this,e,null)}else if(2===arguments.length){let e=arguments[0],t=arguments[1];this._errorType=e,null!==t&&(this._pt=t.copy())}},ld.ERROR=0,ld.REPEATED_POINT=1,ld.HOLE_OUTSIDE_SHELL=2,ld.NESTED_HOLES=3,ld.DISCONNECTED_INTERIOR=4,ld.SELF_INTERSECTION=5,ld.RING_SELF_INTERSECTION=6,ld.NESTED_SHELLS=7,ld.DUPLICATE_RINGS=8,ld.TOO_FEW_POINTS=9,ld.INVALID_COORDINATE=10,ld.RING_NOT_CLOSED=11,ld.errMsg=["Topology Validation Error","Repeated Point","Hole lies outside shell","Holes are nested","Interior is disconnected","Self-intersection","Ring Self-intersection","Nested shells","Duplicate Rings","Too few distinct points in geometry component","Invalid Coordinate","Ring is not closed"];class gd{constructor(){gd.constructor_.apply(this,arguments)}static findPtNotNode(e,t,n){for(var o=n.findEdge(t),r=o.getEdgeIntersectionList(),d=0,s;d<e.length;d++)if(s=e[d],!r.isIntersection(s))return s;return null}static isValid(){if(arguments[0]instanceof Ue){let t=arguments[0];var e=new gd(t);return e.isValid()}if(arguments[0]instanceof Re){let e=arguments[0];return!o.isNaN(e.x)&&!o.isInfinite(e.x)&&!o.isNaN(e.y)&&!o.isInfinite(e.y)}}checkInvalidCoordinates(){if(arguments[0]instanceof Array){let t=arguments[0];for(var e=0;e<t.length;e++)if(!gd.isValid(t[e]))return this._validErr=new ld(ld.INVALID_COORDINATE,t[e]),null}else if(arguments[0]instanceof xt){let t=arguments[0];if(this.checkInvalidCoordinates(t.getExteriorRing().getCoordinates()),null!==this._validErr)return null;for(var e=0;e<t.getNumInteriorRing();e++)if(this.checkInvalidCoordinates(t.getInteriorRingN(e).getCoordinates()),null!==this._validErr)return null}}checkHolesNotNested(e,t){for(var n=new _d(t),o=0,r;o<e.getNumInteriorRing();o++)r=e.getInteriorRingN(o),n.add(r);var d=n.isNonNested();d||(this._validErr=new ld(ld.NESTED_HOLES,n.getNestedPoint()))}checkConsistentArea(e){var t=new ad(e),n=t.isNodeConsistentArea();return n?void(t.hasDuplicateRings()&&(this._validErr=new ld(ld.DUPLICATE_RINGS,t.getInvalidPoint()))):(this._validErr=new ld(ld.SELF_INTERSECTION,t.getInvalidPoint()),null)}isValid(){return this.checkValid(this._parentGeometry),null===this._validErr}checkShellInsideHole(e,t,n){var i=e.getCoordinates(),o=t.getCoordinates(),r=gd.findPtNotNode(i,t,n);if(null!==r){var d=xn.isInRing(r,o);if(!d)return r}var s=gd.findPtNotNode(o,e,n);if(null!==s){var a=xn.isInRing(s,i);return a?s:null}return Te.shouldNeverReachHere("points in shell and hole appear to be equal"),null}checkNoSelfIntersectingRings(t){for(var n=t.getEdgeIterator(),i;n.hasNext();)if(i=n.next(),this.checkNoSelfIntersectingRing(i.getEdgeIntersectionList()),null!==this._validErr)return null}checkConnectedInteriors(e){var t=new dd(e);t.isInteriorsConnected()||(this._validErr=new ld(ld.DISCONNECTED_INTERIOR,t.getCoordinate()))}checkNoSelfIntersectingRing(e){for(var t=new F,n=!0,o=e.iterator(),i;o.hasNext();){if(i=o.next(),n){n=!1;continue}if(t.contains(i.coord))return this._validErr=new ld(ld.RING_SELF_INTERSECTION,i.coord),null;t.add(i.coord)}}checkHolesInShell(e,t){for(var n=e.getExteriorRing(),o=new mn(n),r=0;r<e.getNumInteriorRing();r++){var d=e.getInteriorRingN(r),s=gd.findPtNotNode(d.getCoordinates(),n,t);if(null===s)return null;var a=Xt.EXTERIOR===o.locate(s);if(a)return this._validErr=new ld(ld.HOLE_OUTSIDE_SHELL,s),null}}checkTooFewPoints(e){if(e.hasTooFewPoints())return this._validErr=new ld(ld.TOO_FEW_POINTS,e.getInvalidPoint()),null}getValidationError(){return this.checkValid(this._parentGeometry),this._validErr}checkValid(){if(arguments[0]instanceof mt){let e=arguments[0];this.checkInvalidCoordinates(e.getCoordinates())}else if(arguments[0]instanceof ht){let e=arguments[0];this.checkInvalidCoordinates(e.getCoordinates())}else if(arguments[0]instanceof Et){let n=arguments[0];if(this.checkInvalidCoordinates(n.getCoordinates()),null!==this._validErr)return null;if(this.checkClosedRing(n),null!==this._validErr)return null;var e=new hi(0,n);if(this.checkTooFewPoints(e),null!==this._validErr)return null;var t=new Vt;e.computeSelfNodes(t,!0,!0),this.checkNoSelfIntersectingRings(e)}else if(arguments[0]instanceof ut){let t=arguments[0];if(this.checkInvalidCoordinates(t.getCoordinates()),null!==this._validErr)return null;var e=new hi(0,t);this.checkTooFewPoints(e)}else if(arguments[0]instanceof xt){let t=arguments[0];if(this.checkInvalidCoordinates(t),null!==this._validErr)return null;if(this.checkClosedRings(t),null!==this._validErr)return null;var e=new hi(0,t);if(this.checkTooFewPoints(e),null!==this._validErr)return null;if(this.checkConsistentArea(e),null!==this._validErr)return null;if(!this._isSelfTouchingRingFormingHoleValid&&(this.checkNoSelfIntersectingRings(e),null!==this._validErr))return null;if(this.checkHolesInShell(t,e),null!==this._validErr)return null;if(this.checkHolesNotNested(t,e),null!==this._validErr)return null;this.checkConnectedInteriors(e)}else if(arguments[0]instanceof It){let t=arguments[0];for(var n=0,o;n<t.getNumGeometries();n++){if(o=t.getGeometryN(n),this.checkInvalidCoordinates(o),null!==this._validErr)return null;if(this.checkClosedRings(o),null!==this._validErr)return null}var e=new hi(0,t);if(this.checkTooFewPoints(e),null!==this._validErr)return null;if(this.checkConsistentArea(e),null!==this._validErr)return null;if(!this._isSelfTouchingRingFormingHoleValid&&(this.checkNoSelfIntersectingRings(e),null!==this._validErr))return null;for(var n=0,o;n<t.getNumGeometries();n++)if(o=t.getGeometryN(n),this.checkHolesInShell(o,e),null!==this._validErr)return null;for(var n=0,o;n<t.getNumGeometries();n++)if(o=t.getGeometryN(n),this.checkHolesNotNested(o,e),null!==this._validErr)return null;if(this.checkShellsNotNested(t,e),null!==this._validErr)return null;this.checkConnectedInteriors(e)}else if(arguments[0]instanceof dt){let e=arguments[0];for(var n=0,r;n<e.getNumGeometries();n++)if(r=e.getGeometryN(n),this.checkValid(r),null!==this._validErr)return null}else if(arguments[0]instanceof Ue){let e=arguments[0];if(this._validErr=null,e.isEmpty())return null;if(e instanceof mt)this.checkValid(e);else if(e instanceof ht)this.checkValid(e);else if(e instanceof Et)this.checkValid(e);else if(e instanceof ut)this.checkValid(e);else if(e instanceof xt)this.checkValid(e);else if(e instanceof It)this.checkValid(e);else if(e instanceof dt)this.checkValid(e);else throw new UnsupportedOperationException(e.getClass().getName())}}setSelfTouchingRingFormingHoleValid(e){this._isSelfTouchingRingFormingHoleValid=e}checkShellNotNested(e,t,n){var o=e.getCoordinates(),r=t.getExteriorRing(),d=r.getCoordinates(),s=gd.findPtNotNode(o,r,n);if(null===s)return null;var a=xn.isInRing(s,d);if(!a)return null;if(0>=t.getNumInteriorRing())return this._validErr=new ld(ld.NESTED_SHELLS,s),null;for(var _=null,l=0,g;l<t.getNumInteriorRing();l++)if(g=t.getInteriorRingN(l),_=this.checkShellInsideHole(e,g,n),null===_)return null;this._validErr=new ld(ld.NESTED_SHELLS,_)}checkClosedRings(e){if(this.checkClosedRing(e.getExteriorRing()),null!==this._validErr)return null;for(var t=0;t<e.getNumInteriorRing();t++)if(this.checkClosedRing(e.getInteriorRingN(t)),null!==this._validErr)return null}checkClosedRing(e){if(!e.isClosed()){var t=null;1<=e.getNumPoints()&&(t=e.getCoordinateN(0)),this._validErr=new ld(ld.RING_NOT_CLOSED,t)}}checkShellsNotNested(e,t){for(var n=0;n<e.getNumGeometries();n++)for(var o=e.getGeometryN(n),r=o.getExteriorRing(),d=0;d<e.getNumGeometries();d++)if(n!=d){var s=e.getGeometryN(d);if(this.checkShellNotNested(r,s,t),null!==this._validErr)return null}}getClass(){return gd}get interfaces_(){return[]}}gd.constructor_=function(){this._parentGeometry=null,this._isSelfTouchingRingFormingHoleValid=!1,this._validErr=null;let e=arguments[0];this._parentGeometry=e};var cd=/*#__PURE__*/Object.freeze({IsValidOp:gd,ConsistentAreaTester:ad}),ud=/*#__PURE__*/Object.freeze({BoundaryOp:at,IsSimpleOp:uo,buffer:Ho,distance:Qo,linemerge:lr,overlay:vr,polygonize:zr,relate:$r,union:rd,valid:cd});class pd extends Nt.CoordinateOperation{constructor(){super(),pd.constructor_.apply(this,arguments)}edit(){if(2===arguments.length&&arguments[1]instanceof Ue&&arguments[0]instanceof Array){let i=arguments[0],a=arguments[1];if(0===i.length)return null;for(var e=Array(i.length).fill(null),t=0,n;t<i.length;t++)n=new Re(i[t]),this._targetPM.makePrecise(n),e[t]=n;var o=new ve(e,!1),r=o.toCoordinateArray(),d=0;a instanceof ut&&(d=2),a instanceof Et&&(d=4);var s=e;return this._removeCollapsed&&(s=null),r.length<d?s:r}return super.edit.apply(this,arguments)}getClass(){return pd}get interfaces_(){return[]}}pd.constructor_=function(){this._targetPM=null,this._removeCollapsed=!0;let e=arguments[0],t=arguments[1];this._targetPM=e,this._removeCollapsed=t};class md{constructor(){md.constructor_.apply(this,arguments)}static reduce(e,t){var n=new md(t);return n.reduce(e)}static reducePointwise(e,t){var n=new md(t);return n.setPointwise(!0),n.reduce(e)}fixPolygonalTopology(e){var t=e;this._changePrecisionModel||(t=this.changePM(e,this._targetPM));var n=ko.bufferOp(t,0),i=n;return this._changePrecisionModel||(i=n.copy(),this.changePM(i,e.getPrecisionModel())),i}reducePointwise(e){var t=null;if(this._changePrecisionModel){var n=this.createFactory(e.getFactory(),this._targetPM);t=new Nt(n)}else t=new Nt;var i=this._removeCollapsed;2<=e.getDimension()&&(i=!0);var o=t.edit(e,new pd(this._targetPM,i));return o}changePM(e,t){var n=this.createEditor(e.getFactory(),t);return n.edit(e,new Nt.NoOpGeometryOperation)}setRemoveCollapsedComponents(e){this._removeCollapsed=e}createFactory(e,t){var n=new Ft(t,e.getSRID(),e.getCoordinateSequenceFactory());return n}setChangePrecisionModel(e){this._changePrecisionModel=e}reduce(e){var t=this.reducePointwise(e);return this._isPointwise?t:l(t,ft)?gd.isValid(t)?t:this.fixPolygonalTopology(t):t}setPointwise(e){this._isPointwise=e}createEditor(e,t){if(e.getPrecisionModel()===t)return new Nt;var n=this.createFactory(e,t),i=new Nt(n);return i}getClass(){return md}get interfaces_(){return[]}}md.constructor_=function(){this._targetPM=null,this._removeCollapsed=!0,this._changePrecisionModel=!1,this._isPointwise=!1;let e=arguments[0];this._targetPM=e};var yd=/*#__PURE__*/Object.freeze({GeometryPrecisionReducer:md});class fd{constructor(){fd.constructor_.apply(this,arguments)}static simplify(e,t){var n=new fd(e);return n.setDistanceTolerance(t),n.simplify()}simplifySection(e,t){if(e+1===t)return null;this._seg.p0=this._pts[e],this._seg.p1=this._pts[t];for(var n=-1,i=e,o=e+1,r;o<t;o++)r=this._seg.distance(this._pts[o]),r>n&&(n=r,i=o);if(n<=this._distanceTolerance)for(var o=e+1;o<t;o++)this._usePt[o]=!1;else this.simplifySection(e,i),this.simplifySection(i,t)}setDistanceTolerance(e){this._distanceTolerance=e}simplify(){this._usePt=Array(this._pts.length).fill(null);for(var e=0;e<this._pts.length;e++)this._usePt[e]=!0;this.simplifySection(0,this._pts.length-1);for(var t=new ve,e=0;e<this._pts.length;e++)this._usePt[e]&&t.add(new Re(this._pts[e]));return t.toCoordinateArray()}getClass(){return fd}get interfaces_(){return[]}}fd.constructor_=function(){this._pts=null,this._usePt=null,this._distanceTolerance=null,this._seg=new Ut;let e=arguments[0];this._pts=e};class xd{constructor(){xd.constructor_.apply(this,arguments)}static simplify(e,t){var n=new xd(e);return n.setDistanceTolerance(t),n.getResultGeometry()}setEnsureValid(e){this._isEnsureValidTopology=e}getResultGeometry(){return this._inputGeom.isEmpty()?this._inputGeom.copy():new hd(this._isEnsureValidTopology,this._distanceTolerance).transform(this._inputGeom)}setDistanceTolerance(e){if(0>e)throw new t("Tolerance must be non-negative");this._distanceTolerance=e}getClass(){return xd}get interfaces_(){return[]}}class hd extends zn{constructor(){super(),hd.constructor_.apply(this,arguments)}transformPolygon(e,t){if(e.isEmpty())return null;var n=super.transformPolygon.call(this,e,t);return t instanceof It?n:this.createValidArea(n)}createValidArea(e){return this._isEnsureValidTopology?e.buffer(0):e}transformCoordinates(e){var t=e.toCoordinateArray(),n=null;return n=0===t.length?[].fill(null):fd.simplify(t,this._distanceTolerance),this._factory.getCoordinateSequenceFactory().create(n)}transformMultiPolygon(e,t){var n=super.transformMultiPolygon.call(this,e,t);return this.createValidArea(n)}transformLinearRing(e,t){var n=super.transformLinearRing.call(this,e,t);return t instanceof xt&&!(n instanceof Et)?null:n}getClass(){return hd}get interfaces_(){return[]}}hd.constructor_=function(){this._isEnsureValidTopology=!0,this._distanceTolerance=null;let e=arguments[0],t=arguments[1];this._isEnsureValidTopology=e,this._distanceTolerance=t},xd.DPTransformer=hd,xd.constructor_=function(){this._inputGeom=null,this._distanceTolerance=null,this._isEnsureValidTopology=!0;let e=arguments[0];this._inputGeom=e};class Ed extends Ut{constructor(){super(),Ed.constructor_.apply(this,arguments)}getIndex(){return this._index}getParent(){return this._parent}getClass(){return Ed}get interfaces_(){return[]}}Ed.constructor_=function(){if(this._parent=null,this._index=null,2===arguments.length){let e=arguments[0],t=arguments[1];Ed.constructor_.call(this,e,t,null,-1)}else if(4===arguments.length){let e=arguments[0],t=arguments[1],n=arguments[2],i=arguments[3];Ut.constructor_.call(this,e,t),this._parent=n,this._index=i}};class Id{constructor(){Id.constructor_.apply(this,arguments)}static extractCoordinates(e){for(var t=Array(e.size()+1).fill(null),n=null,o=0;o<e.size();o++)n=e.get(o),t[o]=n.p0;return t[t.length-1]=n.p1,t}addToResult(e){this._resultSegs.add(e)}asLineString(){return this._parentLine.getFactory().createLineString(Id.extractCoordinates(this._resultSegs))}getResultSize(){var e=this._resultSegs.size();return 0===e?0:e+1}getParent(){return this._parentLine}getSegment(e){return this._segs[e]}getParentCoordinates(){return this._parentLine.getCoordinates()}getMinimumSize(){return this._minimumSize}asLinearRing(){return this._parentLine.getFactory().createLinearRing(Id.extractCoordinates(this._resultSegs))}getSegments(){return this._segs}init(){var e=this._parentLine.getCoordinates();this._segs=Array(e.length-1).fill(null);for(var t=0,n;t<e.length-1;t++)n=new Ed(e[t],e[t+1],this._parentLine,t),this._segs[t]=n}getResultCoordinates(){return Id.extractCoordinates(this._resultSegs)}getClass(){return Id}get interfaces_(){return[]}}Id.constructor_=function(){if(this._parentLine=null,this._segs=null,this._resultSegs=new f,this._minimumSize=null,1===arguments.length){let e=arguments[0];Id.constructor_.call(this,e,2)}else if(2===arguments.length){let e=arguments[0],t=arguments[1];this._parentLine=e,this._minimumSize=t,this.init()}};class Nd{constructor(){Nd.constructor_.apply(this,arguments)}remove(e){this._index.remove(new be(e.p0,e.p1),e)}add(){if(arguments[0]instanceof Id){let i=arguments[0];for(var e=i.getSegments(),t=0,n;t<e.length;t++)n=e[t],this.add(n)}else if(arguments[0]instanceof Ut){let e=arguments[0];this._index.insert(new be(e.p0,e.p1),e)}}query(e){var t=new be(e.p0,e.p1),n=new Ld(e);this._index.query(t,n);var i=n.getItems();return i}getClass(){return Nd}get interfaces_(){return[]}}Nd.constructor_=function(){this._index=new Di};class Ld{constructor(){Ld.constructor_.apply(this,arguments)}visitItem(e){var t=e;be.intersects(t.p0,t.p1,this._querySeg.p0,this._querySeg.p1)&&this._items.add(e)}getItems(){return this._items}getClass(){return Ld}get interfaces_(){return[on]}}Ld.constructor_=function(){this._querySeg=null,this._items=new f;let e=arguments[0];this._querySeg=e};class Cd{constructor(){Cd.constructor_.apply(this,arguments)}static isInLineSection(e,t,n){if(n.getParent()!==e.getParent())return!1;var i=n.getIndex();return!!(i>=t[0]&&i<t[1])}flatten(e,t){var n=this._linePts[e],i=this._linePts[t],o=new Ut(n,i);return this.remove(this._line,e,t),this._outputIndex.add(o),o}hasBadIntersection(e,t,n){return!!this.hasBadOutputIntersection(n)||!!this.hasBadInputIntersection(e,t,n)}setDistanceTolerance(e){this._distanceTolerance=e}simplifySection(e,t,n){n+=1;var i=[,,].fill(null);if(e+1===t){var o=this._line.getSegment(e);return this._line.addToResult(o),null}var r=!0;if(this._line.getResultSize()<this._line.getMinimumSize()){var d=n+1;d<this._line.getMinimumSize()&&(r=!1)}var s=[,].fill(null),a=this.findFurthestPoint(this._linePts,e,t,s);s[0]>this._distanceTolerance&&(r=!1);var _=new Ut;if(_.p0=this._linePts[e],_.p1=this._linePts[t],i[0]=e,i[1]=t,this.hasBadIntersection(this._line,i,_)&&(r=!1),r){var o=this.flatten(e,t);return this._line.addToResult(o),null}this.simplifySection(e,a,n),this.simplifySection(a,t,n)}hasBadOutputIntersection(e){for(var t=this._outputIndex.query(e),n=t.iterator(),i;n.hasNext();)if(i=n.next(),this.hasInteriorIntersection(i,e))return!0;return!1}findFurthestPoint(e,t,n,i){var o=new Ut;o.p0=e[t],o.p1=e[n];for(var r=-1,d=t,s=t+1;s<n;s++){var a=e[s],_=o.distance(a);_>r&&(r=_,d=s)}return i[0]=r,d}simplify(e){this._line=e,this._linePts=e.getParentCoordinates(),this.simplifySection(0,this._linePts.length-1,0)}remove(e,t,n){for(var o=t,r;o<n;o++)r=e.getSegment(o),this._inputIndex.remove(r)}hasInteriorIntersection(e,t){return this._li.computeIntersection(e.p0,e.p1,t.p0,t.p1),this._li.isInteriorIntersection()}hasBadInputIntersection(e,t,n){for(var o=this._inputIndex.query(n),r=o.iterator(),i;r.hasNext();)if(i=r.next(),this.hasInteriorIntersection(i,n)){if(Cd.isInLineSection(e,t,i))continue;return!0}return!1}getClass(){return Cd}get interfaces_(){return[]}}Cd.constructor_=function(){this._li=new Vt,this._inputIndex=new Nd,this._outputIndex=new Nd,this._line=null,this._linePts=null,this._distanceTolerance=0;let e=arguments[0],t=arguments[1];this._inputIndex=e,this._outputIndex=t};class Sd{constructor(){Sd.constructor_.apply(this,arguments)}setDistanceTolerance(e){this._distanceTolerance=e}simplify(e){for(var t=e.iterator();t.hasNext();)this._inputIndex.add(t.next());for(var t=e.iterator(),n;t.hasNext();)n=new Cd(this._inputIndex,this._outputIndex),n.setDistanceTolerance(this._distanceTolerance),n.simplify(t.next())}getClass(){return Sd}get interfaces_(){return[]}}Sd.constructor_=function(){this._inputIndex=new Nd,this._outputIndex=new Nd,this._distanceTolerance=0};class Td{constructor(){Td.constructor_.apply(this,arguments)}static simplify(e,t){var n=new Td(e);return n.setDistanceTolerance(t),n.getResultGeometry()}getResultGeometry(){if(this._inputGeom.isEmpty())return this._inputGeom.copy();this._linestringMap=new Q,this._inputGeom.apply(new Od(this)),this._lineSimplifier.simplify(this._linestringMap.values());var e=new Rd(this._linestringMap).transform(this._inputGeom);return e}setDistanceTolerance(e){if(0>e)throw new t("Tolerance must be non-negative");this._lineSimplifier.setDistanceTolerance(e)}getClass(){return Td}get interfaces_(){return[]}}class Rd extends zn{constructor(){super(),Rd.constructor_.apply(this,arguments)}transformCoordinates(e,t){if(0===e.size())return null;if(t instanceof ut){var n=this._linestringMap.get(t);return this.createCoordinateSequence(n.getResultCoordinates())}return super.transformCoordinates.call(this,e,t)}getClass(){return Rd}get interfaces_(){return[]}}Rd.constructor_=function(){this._linestringMap=null;let e=arguments[0];this._linestringMap=e};class Od{constructor(){Od.constructor_.apply(this,arguments)}filter(e){if(e instanceof ut){var t=e;if(t.isEmpty())return null;var n=t.isClosed()?4:2,i=new Id(t,n);this.tps._linestringMap.put(t,i)}}getClass(){return Od}get interfaces_(){return[Ve]}}Od.constructor_=function(){this.tps=null;let e=arguments[0];this.tps=e},Td.LineStringTransformer=Rd,Td.LineStringMapBuilderFilter=Od,Td.constructor_=function(){this._inputGeom=null,this._lineSimplifier=new Sd,this._linestringMap=null;let e=arguments[0];this._inputGeom=e};var Pd=/*#__PURE__*/Object.freeze({DouglasPeuckerSimplifier:xd,TopologyPreservingSimplifier:Td});class vd{constructor(){vd.constructor_.apply(this,arguments)}static pointAlongReverse(e,t){var n=new Re;return n.x=e.p1.x-t*(e.p1.x-e.p0.x),n.y=e.p1.y-t*(e.p1.y-e.p0.y),n}splitAt(){if(1===arguments.length){let t=arguments[0];var e=this._minimumLen/this._segLen;if(t.distance(this._seg.p0)<this._minimumLen)return this._splitPt=this._seg.pointAlong(e),null;if(t.distance(this._seg.p1)<this._minimumLen)return this._splitPt=vd.pointAlongReverse(this._seg,e),null;this._splitPt=t}else if(2===arguments.length){let e=arguments[0],i=arguments[1];var t=this.getConstrainedLength(e),n=t/this._segLen;this._splitPt=i.equals2D(this._seg.p0)?this._seg.pointAlong(n):vd.pointAlongReverse(this._seg,n)}}setMinimumLength(e){this._minimumLen=e}getConstrainedLength(e){return e<this._minimumLen?this._minimumLen:e}getSplitPoint(){return this._splitPt}getClass(){return vd}get interfaces_(){return[]}}vd.constructor_=function(){this._seg=null,this._segLen=null,this._splitPt=null,this._minimumLen=0;let e=arguments[0];this._seg=e,this._segLen=e.getLength()};class bd{constructor(){bd.constructor_.apply(this,arguments)}findSplitPoint(){}getClass(){return bd}get interfaces_(){return[]}}bd.constructor_=function(){};class Dd{constructor(){Dd.constructor_.apply(this,arguments)}static projectedSplitPoint(e,t){var n=e.getLineSegment(),i=n.project(t);return i}findSplitPoint(e,t){var n=e.getLineSegment(),i=n.getLength(),o=i/2,r=new vd(n),d=Dd.projectedSplitPoint(e,t),s=.8*(2*d.distance(t)),a=s;return a>o&&(a=o),r.setMinimumLength(a),r.splitAt(d),r.getSplitPoint()}getClass(){return Dd}get interfaces_(){return[bd]}}Dd.constructor_=function(){};class Ad{constructor(){Ad.constructor_.apply(this,arguments)}static triArea(e,t,n){return(t.x-e.x)*(n.y-e.y)-(t.y-e.y)*(n.x-e.x)}static isInCircleDDNormalized(e,t,n,i){var o=Ae.valueOf(e.x).selfSubtract(i.x),r=Ae.valueOf(e.y).selfSubtract(i.y),d=Ae.valueOf(t.x).selfSubtract(i.x),s=Ae.valueOf(t.y).selfSubtract(i.y),a=Ae.valueOf(n.x).selfSubtract(i.x),_=Ae.valueOf(n.y).selfSubtract(i.y),l=o.multiply(s).selfSubtract(d.multiply(r)),g=d.multiply(_).selfSubtract(a.multiply(s)),c=a.multiply(r).selfSubtract(o.multiply(_)),u=o.multiply(o).selfAdd(r.multiply(r)),p=d.multiply(d).selfAdd(s.multiply(s)),m=a.multiply(a).selfAdd(_.multiply(_)),y=u.selfMultiply(g).selfAdd(p.selfMultiply(c)).selfAdd(m.selfMultiply(l)),f=0<y.doubleValue();return f}static checkRobustInCircle(e,t,n,i){var o=Ad.isInCircleNonRobust(e,t,n,i),r=Ad.isInCircleDDSlow(e,t,n,i),d=Ad.isInCircleCC(e,t,n,i),s=wt.circumcentre(e,t,n);N.out.println("p radius diff a = "+Ne(i.distance(s)-e.distance(s))/e.distance(s)),(o!==r||o!==d)&&(N.out.println("inCircle robustness failure (double result = "+o+", DD result = "+r+", CC result = "+d+")"),N.out.println(qt.toLineString(new Tt([e,t,n,i]))),N.out.println("Circumcentre = "+qt.toPoint(s)+" radius = "+e.distance(s)),N.out.println("p radius diff a = "+Ne(i.distance(s)/e.distance(s)-1)),N.out.println("p radius diff b = "+Ne(i.distance(s)/t.distance(s)-1)),N.out.println("p radius diff c = "+Ne(i.distance(s)/n.distance(s)-1)),N.out.println())}static isInCircleDDFast(e,t,n,i){var o=Ae.sqr(e.x).selfAdd(Ae.sqr(e.y)).selfMultiply(Ad.triAreaDDFast(t,n,i)),r=Ae.sqr(t.x).selfAdd(Ae.sqr(t.y)).selfMultiply(Ad.triAreaDDFast(e,n,i)),d=Ae.sqr(n.x).selfAdd(Ae.sqr(n.y)).selfMultiply(Ad.triAreaDDFast(e,t,i)),s=Ae.sqr(i.x).selfAdd(Ae.sqr(i.y)).selfMultiply(Ad.triAreaDDFast(e,t,n)),a=o.selfSubtract(r).selfAdd(d).selfSubtract(s),_=0<a.doubleValue();return _}static isInCircleCC(e,t,n,i){var o=wt.circumcentre(e,t,n),r=e.distance(o),d=i.distance(o)-r;return 0>=d}static isInCircleNormalized(e,t,n,i){var o=e.x-i.x,r=e.y-i.y,d=t.x-i.x,s=t.y-i.y,a=n.x-i.x,_=n.y-i.y;return 0<(o*o+r*r)*(d*_-a*s)+(d*d+s*s)*(a*r-o*_)+(a*a+_*_)*(o*s-d*r)}static isInCircleDDSlow(e,t,n,i){var o=Ae.valueOf(i.x),r=Ae.valueOf(i.y),d=Ae.valueOf(e.x),s=Ae.valueOf(e.y),a=Ae.valueOf(t.x),_=Ae.valueOf(t.y),l=Ae.valueOf(n.x),g=Ae.valueOf(n.y),c=d.multiply(d).add(s.multiply(s)).multiply(Ad.triAreaDDSlow(a,_,l,g,o,r)),u=a.multiply(a).add(_.multiply(_)).multiply(Ad.triAreaDDSlow(d,s,l,g,o,r)),p=l.multiply(l).add(g.multiply(g)).multiply(Ad.triAreaDDSlow(d,s,a,_,o,r)),m=o.multiply(o).add(r.multiply(r)).multiply(Ad.triAreaDDSlow(d,s,a,_,l,g)),y=c.subtract(u).add(p).subtract(m),f=0<y.doubleValue();return f}static isInCircleNonRobust(e,t,n,i){var o=0<(e.x*e.x+e.y*e.y)*Ad.triArea(t,n,i)-(t.x*t.x+t.y*t.y)*Ad.triArea(e,n,i)+(n.x*n.x+n.y*n.y)*Ad.triArea(e,t,i)-(i.x*i.x+i.y*i.y)*Ad.triArea(e,t,n);return o}static isInCircleRobust(e,t,n,i){return Ad.isInCircleNormalized(e,t,n,i)}static triAreaDDSlow(e,t,n,i,o,r){return n.subtract(e).multiply(r.subtract(t)).subtract(i.subtract(t).multiply(o.subtract(e)))}static triAreaDDFast(e,t,n){var i=Ae.valueOf(t.x).selfSubtract(e.x).selfMultiply(Ae.valueOf(n.y).selfSubtract(e.y)),o=Ae.valueOf(t.y).selfSubtract(e.y).selfMultiply(Ae.valueOf(n.x).selfSubtract(e.x));return i.selfSubtract(o)}getClass(){return Ad}get interfaces_(){return[]}}Ad.constructor_=function(){};class Fd{constructor(){Fd.constructor_.apply(this,arguments)}static interpolateZ(){if(3===arguments.length){let o=arguments[0],r=arguments[1],d=arguments[2];var e=r.distance(d),t=o.distance(r),n=d.z-r.z,i=r.z+n*(t/e);return i}if(4===arguments.length){let e=arguments[0],t=arguments[1],n=arguments[2],i=arguments[3];var o=t.x,r=t.y,s=n.x-o,a=i.x-o,_=n.y-r,l=i.y-r,d=s*l-a*_,g=e.x-o,c=e.y-r,u=t.z+(l*g-a*c)/d*(n.z-t.z)+(-_*g+s*c)/d*(i.z-t.z);return u}}circleCenter(e,t){var n=new Fd(this.getX(),this.getY()),i=this.bisector(n,e),o=this.bisector(e,t),r=new Ge(i,o),d=null;try{d=new Fd(r.getX(),r.getY())}catch(i){if(i instanceof De)N.err.println("a: "+n+"  b: "+e+"  c: "+t),N.err.println(i);else throw i}finally{}return d}dot(e){return this._p.x*e.getX()+this._p.y*e.getY()}magn(){return _e(this._p.x*this._p.x+this._p.y*this._p.y)}getZ(){return this._p.z}bisector(e,t){var n=t.getX()-e.getX(),i=t.getY()-e.getY(),o=new Ge(e.getX()+n/2,e.getY()+i/2,1),r=new Ge(e.getX()-i+n/2,e.getY()+n+i/2,1);return new Ge(o,r)}equals(){if(1===arguments.length){let e=arguments[0];return this._p.x===e.getX()&&this._p.y===e.getY()}if(2===arguments.length){let e=arguments[0],t=arguments[1];return!!(this._p.distance(e.getCoordinate())<t)}}getCoordinate(){return this._p}isInCircle(e,t,n){return Ad.isInCircleRobust(e._p,t._p,n._p,this._p)}interpolateZValue(e,t,n){var i=e.getX(),o=e.getY(),r=t.getX()-i,s=n.getX()-i,a=t.getY()-o,_=n.getY()-o,d=r*_-s*a,l=this.getX()-i,g=this.getY()-o,c=e.getZ()+(_*l-s*g)/d*(t.getZ()-e.getZ())+(-a*l+r*g)/d*(n.getZ()-e.getZ());return c}midPoint(e){var t=(this._p.x+e.getX())/2,n=(this._p.y+e.getY())/2,i=(this._p.z+e.getZ())/2;return new Fd(t,n,i)}rightOf(t){return this.isCCW(t.dest(),t.orig())}isCCW(e,t){return 0<(e._p.x-this._p.x)*(t._p.y-this._p.y)-(e._p.y-this._p.y)*(t._p.x-this._p.x)}getX(){return this._p.x}crossProduct(e){return this._p.x*e.getY()-this._p.y*e.getX()}setZ(e){this._p.z=e}times(e){return new Fd(e*this._p.x,e*this._p.y)}cross(){return new Fd(this._p.y,-this._p.x)}leftOf(t){return this.isCCW(t.orig(),t.dest())}toString(){return"POINT ("+this._p.x+" "+this._p.y+")"}sub(e){return new Fd(this._p.x-e.getX(),this._p.y-e.getY())}getY(){return this._p.y}classify(e,t){var n=this,i=t.sub(e),o=n.sub(e),r=i.crossProduct(o);return 0<r?Fd.LEFT:0>r?Fd.RIGHT:0>i.getX()*o.getX()||0>i.getY()*o.getY()?Fd.BEHIND:i.magn()<o.magn()?Fd.BEYOND:e.equals(n)?Fd.ORIGIN:t.equals(n)?Fd.DESTINATION:Fd.BETWEEN}sum(e){return new Fd(this._p.x+e.getX(),this._p.y+e.getY())}distance(e,t){return _e(Le(t.getX()-e.getX(),2)+Le(t.getY()-e.getY(),2))}circumRadiusRatio(e,t){var n=this.circleCenter(e,t),i=this.distance(n,e),o=this.distance(this,e),r=this.distance(e,t);return r<o&&(o=r),r=this.distance(t,this),r<o&&(o=r),i/o}getClass(){return Fd}get interfaces_(){return[]}}Fd.constructor_=function(){if(this._p=null,1===arguments.length){let e=arguments[0];this._p=new Re(e)}else if(2===arguments.length){let e=arguments[0],t=arguments[1];this._p=new Re(e,t)}else if(3===arguments.length){let e=arguments[0],t=arguments[1],n=arguments[2];this._p=new Re(e,t,n)}},Fd.LEFT=0,Fd.RIGHT=1,Fd.BEYOND=2,Fd.BEHIND=3,Fd.BETWEEN=4,Fd.ORIGIN=5,Fd.DESTINATION=6;class Md extends Fd{constructor(){super(),Md.constructor_.apply(this,arguments)}getConstraint(){return this._constraint}setOnConstraint(e){this._isOnConstraint=e}merge(e){e._isOnConstraint&&(this._isOnConstraint=!0,this._constraint=e._constraint)}isOnConstraint(){return this._isOnConstraint}setConstraint(e){this._isOnConstraint=!0,this._constraint=e}getClass(){return Md}get interfaces_(){return[]}}Md.constructor_=function(){this._isOnConstraint=null,this._constraint=null;let e=arguments[0];Fd.constructor_.call(this,e)};class Gd{constructor(){Gd.constructor_.apply(this,arguments)}static makeEdge(e,t){var n=new Gd,i=new Gd,o=new Gd,r=new Gd;n._rot=i,i._rot=o,o._rot=r,r._rot=n,n.setNext(n),i.setNext(r),o.setNext(o),r.setNext(i);var d=n;return d.setOrig(e),d.setDest(t),d}static swap(t){var e=t.oPrev(),n=t.sym().oPrev();Gd.splice(t,e),Gd.splice(t.sym(),n),Gd.splice(t,e.lNext()),Gd.splice(t.sym(),n.lNext()),t.setOrig(e.dest()),t.setDest(n.dest())}static splice(e,t){var n=e.oNext().rot(),i=t.oNext().rot(),o=t.oNext(),r=e.oNext(),d=i.oNext(),s=n.oNext();e.setNext(o),t.setNext(r),n.setNext(d),i.setNext(s)}static connect(t,n){var i=Gd.makeEdge(t.dest(),n.orig());return Gd.splice(i,t.lNext()),Gd.splice(i.sym(),n),i}equalsNonOriented(e){return!!this.equalsOriented(e)||!!this.equalsOriented(e.sym())}toLineSegment(){return new Ut(this._vertex.getCoordinate(),this.dest().getCoordinate())}dest(){return this.sym().orig()}oNext(){return this._next}equalsOriented(e){return!!(this.orig().getCoordinate().equals2D(e.orig().getCoordinate())&&this.dest().getCoordinate().equals2D(e.dest().getCoordinate()))}dNext(){return this.sym().oNext().sym()}lPrev(){return this._next.sym()}rPrev(){return this.sym().oNext()}rot(){return this._rot}oPrev(){return this._rot._next._rot}sym(){return this._rot._rot}setOrig(e){this._vertex=e}lNext(){return this.invRot().oNext().rot()}getLength(){return this.orig().getCoordinate().distance(this.dest().getCoordinate())}invRot(){return this._rot.sym()}setDest(e){this.sym().setOrig(e)}setData(e){this._data=e}getData(){return this._data}delete(){this._rot=null}orig(){return this._vertex}rNext(){return this._rot._next.invRot()}toString(){var e=this._vertex.getCoordinate(),t=this.dest().getCoordinate();return qt.toLineString(e,t)}isLive(){return null!==this._rot}getPrimary(){return 0>=this.orig().getCoordinate().compareTo(this.dest().getCoordinate())?this:this.sym()}dPrev(){return this.invRot().oNext().invRot()}setNext(e){this._next=e}getClass(){return Gd}get interfaces_(){return[]}}Gd.constructor_=function(){this._rot=null,this._vertex=null,this._next=null,this._data=null};class Yd{constructor(){Yd.constructor_.apply(this,arguments)}insertSite(n){var i=this._subdiv.locate(n);if(this._subdiv.isVertexOfEdge(i,n))return i;this._subdiv.isOnEdge(i,n.getCoordinate())&&(i=i.oPrev(),this._subdiv.delete(i.oNext()));var o=this._subdiv.makeEdge(i.orig(),n);Gd.splice(o,i);var r=o;do o=this._subdiv.connect(i,o.sym()),i=o.oPrev();while(i.lNext()!==r);do{var d=i.oPrev();if(d.dest().rightOf(i)&&n.isInCircle(i.orig(),d.dest(),i.dest()))Gd.swap(i),i=i.oPrev();else{if(i.oNext()===r)return o;i=i.oNext().lPrev()}}while(!0)}insertSites(e){for(var t=e.iterator(),n;t.hasNext();)n=t.next(),this.insertSite(n)}getClass(){return Yd}get interfaces_(){return[]}}Yd.constructor_=function(){this._subdiv=null,this._isUsingTolerance=!1;let e=arguments[0];this._subdiv=e,this._isUsingTolerance=0<e.getTolerance()};class zd{constructor(){zd.constructor_.apply(this,arguments)}locate(){}getClass(){return zd}get interfaces_(){return[]}}zd.constructor_=function(){};class qd{constructor(){qd.constructor_.apply(this,arguments)}init(){this._lastEdge=this.findEdge()}locate(t){this._lastEdge.isLive()||this.init();var n=this._subdiv.locateFromEdge(t,this._lastEdge);return this._lastEdge=n,n}findEdge(){var e=this._subdiv.getEdges();return e.iterator().next()}getClass(){return qd}get interfaces_(){return[zd]}}qd.constructor_=function(){this._subdiv=null,this._lastEdge=null;let e=arguments[0];this._subdiv=e,this.init()};class Bd extends _{constructor(){super(),Bd.constructor_.apply(this,arguments)}static msgWithSpatial(e,t){return null===t?e:e+" [ "+t+" ]"}getSegment(){return this._seg}getClass(){return Bd}get interfaces_(){return[]}}Bd.constructor_=function(){if(this._seg=null,1===arguments.length){if("string"==typeof arguments[0]){let e=arguments[0];_.constructor_.call(this,e)}else if(arguments[0]instanceof Ut){let e=arguments[0];_.constructor_.call(this,"Locate failed to converge (at edge: "+e+").  Possible causes include invalid Subdivision topology or very close sites"),this._seg=new Ut(e)}}else if(2===arguments.length){let e=arguments[0],t=arguments[1];_.constructor_.call(this,Bd.msgWithSpatial(e,t)),this._seg=new Ut(t)}};class Vd{constructor(){Vd.constructor_.apply(this,arguments)}visit(){}getClass(){return Vd}get interfaces_(){return[]}}Vd.constructor_=function(){};class Ud{constructor(){Ud.constructor_.apply(this,arguments)}static getTriangleEdges(e,n){if(n[0]=e,n[1]=n[0].lNext(),n[2]=n[1].lNext(),n[2].lNext()!==n[0])throw new t("Edges do not form a triangle")}getTriangleVertices(e){var t=new Hd;return this.visitTriangles(t,e),t.getTriangleVertices()}isFrameVertex(e){return!!e.equals(this._frameVertex[0])||!!e.equals(this._frameVertex[1])||!!e.equals(this._frameVertex[2])}isVertexOfEdge(t,e){return!!(e.equals(t.orig(),this._tolerance)||e.equals(t.dest(),this._tolerance))}connect(e,t){var n=Gd.connect(e,t);return this._quadEdges.add(n),n}getVoronoiCellPolygon(e,t){var n=new f,i=e;do{var o=e.rot().orig().getCoordinate();n.add(o),e=e.oPrev()}while(e!==i);var r=new ve;r.addAll(n,!1),r.closeRing(),4>r.size()&&(N.out.println(r),r.add(r.get(r.size()-1),!0));var d=r.toCoordinateArray(),s=t.createPolygon(t.createLinearRing(d)),a=i.orig();return s.setUserData(a.getCoordinate()),s}setLocator(e){this._locator=e}initSubdiv(){var e=this.makeEdge(this._frameVertex[0],this._frameVertex[1]),t=this.makeEdge(this._frameVertex[1],this._frameVertex[2]);Gd.splice(e.sym(),t);var n=this.makeEdge(this._frameVertex[2],this._frameVertex[0]);return Gd.splice(t.sym(),n),Gd.splice(n.sym(),e),e}isFrameBorderEdge(t){var e=[,,,].fill(null);Ud.getTriangleEdges(t,e);var n=[,,,].fill(null);Ud.getTriangleEdges(t.sym(),n);var i=t.lNext().dest();if(this.isFrameVertex(i))return!0;var o=t.sym().lNext().dest();return!!this.isFrameVertex(o)}makeEdge(e,t){var n=Gd.makeEdge(e,t);return this._quadEdges.add(n),n}visitTriangles(e,t){this._visitedKey++;var n=new $;n.push(this._startingEdge);for(var i=new T,o;!n.empty();)if(o=n.pop(),!i.contains(o)){var r=this.fetchTriangleToVisit(o,n,t,i);null!==r&&e.visit(r)}}isFrameEdge(t){return!!(this.isFrameVertex(t.orig())||this.isFrameVertex(t.dest()))}isOnEdge(t,e){this._seg.setCoordinates(t.orig().getCoordinate(),t.dest().getCoordinate());var n=this._seg.distance(e);return n<this._edgeCoincidenceTolerance}getEnvelope(){return new be(this._frameEnv)}createFrame(e){var t=e.getWidth(),n=e.getHeight(),i=0;i=t>n?10*t:10*n,this._frameVertex[0]=new Fd((e.getMaxX()+e.getMinX())/2,e.getMaxY()+i),this._frameVertex[1]=new Fd(e.getMinX()-i,e.getMinY()-i),this._frameVertex[2]=new Fd(e.getMaxX()+i,e.getMinY()-i),this._frameEnv=new be(this._frameVertex[0].getCoordinate(),this._frameVertex[1].getCoordinate()),this._frameEnv.expandToInclude(this._frameVertex[2].getCoordinate())}getTriangleCoordinates(e){var t=new wd;return this.visitTriangles(t,e),t.getTriangles()}getVertices(e){for(var t=new T,n=this._quadEdges.iterator();n.hasNext();){var i=n.next(),o=i.orig();(e||!this.isFrameVertex(o))&&t.add(o);var r=i.dest();(e||!this.isFrameVertex(r))&&t.add(r)}return t}fetchTriangleToVisit(e,t,n,i){var o=e,r=0,d=!1;do{this._triEdges[r]=o,this.isFrameEdge(o)&&(d=!0);var s=o.sym();i.contains(s)||t.push(s),i.add(o),r++,o=o.lNext()}while(o!==e);return d&&!n?null:this._triEdges}getEdges(){if(0===arguments.length)return this._quadEdges;if(1===arguments.length){let i=arguments[0];for(var e=this.getPrimaryEdges(!1),t=Array(e.size()).fill(null),n=0,o=e.iterator(),r;o.hasNext();)r=o.next(),t[n++]=i.createLineString([r.orig().getCoordinate(),r.dest().getCoordinate()]);return i.createMultiLineString(t)}}getVertexUniqueEdges(e){for(var t=new f,n=new T,o=this._quadEdges.iterator();o.hasNext();){var i=o.next(),r=i.orig();n.contains(r)||(n.add(r),(e||!this.isFrameVertex(r))&&t.add(i));var d=i.sym(),s=d.orig();n.contains(s)||(n.add(s),(e||!this.isFrameVertex(s))&&t.add(d))}return t}getTriangleEdges(e){var t=new kd;return this.visitTriangles(t,e),t.getTriangleEdges()}getPrimaryEdges(e){this._visitedKey++;var t=new f,n=new $;n.push(this._startingEdge);for(var i=new T,o;!n.empty();)if(o=n.pop(),!i.contains(o)){var r=o.getPrimary();(e||!this.isFrameEdge(r))&&t.add(r),n.push(o.oNext()),n.push(o.sym().oNext()),i.add(o),i.add(o.sym())}return t}delete(t){Gd.splice(t,t.oPrev()),Gd.splice(t.sym(),t.sym().oPrev());var e=t.sym(),n=t.rot(),i=t.rot().sym();this._quadEdges.remove(t),this._quadEdges.remove(e),this._quadEdges.remove(n),this._quadEdges.remove(i),t.delete(),e.delete(),n.delete(),i.delete()}locateFromEdge(t,n){for(var i=0,o=this._quadEdges.size(),r=n;;){if(i++,i>o)throw new Bd(r.toLineSegment());if(t.equals(r.orig())||t.equals(r.dest()))break;else if(t.rightOf(r))r=r.sym();else if(!t.rightOf(r.oNext()))r=r.oNext();else if(!t.rightOf(r.dPrev()))r=r.dPrev();else break}return r}getTolerance(){return this._tolerance}getVoronoiCellPolygons(e){this.visitTriangles(new Xd,!0);for(var t=new f,n=this.getVertexUniqueEdges(!1),o=n.iterator(),i;o.hasNext();)i=o.next(),t.add(this.getVoronoiCellPolygon(i,e));return t}getVoronoiDiagram(e){var t=this.getVoronoiCellPolygons(e);return e.createGeometryCollection(Ft.toGeometryArray(t))}getTriangles(e){for(var t=this.getTriangleCoordinates(!1),n=Array(t.size()).fill(null),o=0,r=t.iterator(),d;r.hasNext();)d=r.next(),n[o++]=e.createPolygon(e.createLinearRing(d));return e.createGeometryCollection(n)}insertSite(t){var n=this.locate(t);if(t.equals(n.orig(),this._tolerance)||t.equals(n.dest(),this._tolerance))return n;var i=this.makeEdge(n.orig(),t);Gd.splice(i,n);var o=i;do i=this.connect(n,i.sym()),n=i.oPrev();while(n.lNext()!==o);return o}locate(){if(1===arguments.length){if(arguments[0]instanceof Fd){let e=arguments[0];return this._locator.locate(e)}if(arguments[0]instanceof Re){let e=arguments[0];return this._locator.locate(new Fd(e))}}else if(2===arguments.length){let i=arguments[0],o=arguments[1];var t=this._locator.locate(new Fd(i));if(null===t)return null;var e=t;t.dest().getCoordinate().equals2D(i)&&(e=t.sym());var n=e;do{if(n.dest().getCoordinate().equals2D(o))return n;n=n.oNext()}while(n!==e);return null}}getClass(){return Ud}get interfaces_(){return[]}}class Xd{constructor(){Xd.constructor_.apply(this,arguments)}visit(e){for(var t=e[0].orig().getCoordinate(),n=e[1].orig().getCoordinate(),o=e[2].orig().getCoordinate(),r=wt.circumcentre(t,n,o),d=new Fd(r),s=0;3>s;s++)e[s].rot().setOrig(d)}getClass(){return Xd}get interfaces_(){return[Vd]}}Xd.constructor_=function(){};class kd{constructor(){kd.constructor_.apply(this,arguments)}getTriangleEdges(){return this._triList}visit(e){this._triList.add(e)}getClass(){return kd}get interfaces_(){return[Vd]}}kd.constructor_=function(){this._triList=new f};class Hd{constructor(){Hd.constructor_.apply(this,arguments)}visit(e){this._triList.add([e[0].orig(),e[1].orig(),e[2].orig()])}getTriangleVertices(){return this._triList}getClass(){return Hd}get interfaces_(){return[Vd]}}Hd.constructor_=function(){this._triList=new f};class wd{constructor(){wd.constructor_.apply(this,arguments)}checkTriangleSize(e){var t="";2<=e.length?t=qt.toLineString(e[0],e[1]):1<=e.length&&(t=qt.toPoint(e[0]))}visit(e){this._coordList.clear();for(var t=0,n;3>t;t++)n=e[t].orig(),this._coordList.add(n.getCoordinate());if(0<this._coordList.size()){this._coordList.closeRing();var o=this._coordList.toCoordinateArray();if(4!==o.length)return null;this._triCoords.add(o)}}getTriangles(){return this._triCoords}getClass(){return wd}get interfaces_(){return[Vd]}}wd.constructor_=function(){this._coordList=new ve,this._triCoords=new f},Ud.TriangleCircumcentreVisitor=Xd,Ud.TriangleEdgesListVisitor=kd,Ud.TriangleVertexListVisitor=Hd,Ud.TriangleCoordinatesVisitor=wd,Ud.constructor_=function(){this._visitedKey=0,this._quadEdges=new f,this._startingEdge=null,this._tolerance=null,this._edgeCoincidenceTolerance=null,this._frameVertex=[,,,].fill(null),this._frameEnv=null,this._locator=null,this._seg=new Ut,this._triEdges=[,,,].fill(null);let e=arguments[0],t=arguments[1];this._tolerance=t,this._edgeCoincidenceTolerance=t/Ud.EDGE_COINCIDENCE_TOL_FACTOR,this.createFrame(e),this._startingEdge=this.initSubdiv(),this._locator=new qd(this)},Ud.EDGE_COINCIDENCE_TOL_FACTOR=1e3;class Wd{constructor(){Wd.constructor_.apply(this,arguments)}getLineSegment(){return this._ls}getEndZ(){var e=this._ls.getCoordinate(1);return e.z}getStartZ(){var e=this._ls.getCoordinate(0);return e.z}intersection(e){return this._ls.intersection(e.getLineSegment())}getStart(){return this._ls.getCoordinate(0)}getEnd(){return this._ls.getCoordinate(1)}getEndY(){var e=this._ls.getCoordinate(1);return e.y}getStartX(){var e=this._ls.getCoordinate(0);return e.x}equalsTopo(e){return this._ls.equalsTopo(e.getLineSegment())}getStartY(){var e=this._ls.getCoordinate(0);return e.y}setData(e){this._data=e}getData(){return this._data}getEndX(){var e=this._ls.getCoordinate(1);return e.x}toString(){return this._ls.toString()}getClass(){return Wd}get interfaces_(){return[]}}Wd.constructor_=function(){if(this._ls=null,this._data=null,2===arguments.length){let e=arguments[0],t=arguments[1];this._ls=new Ut(e,t)}else if(3===arguments.length){let e=arguments[0],t=arguments[1],n=arguments[2];this._ls=new Ut(e,t),this._data=n}else if(6===arguments.length){let e=arguments[0],t=arguments[1],n=arguments[2],i=arguments[3],o=arguments[4],r=arguments[5];Wd.constructor_.call(this,new Re(e,t,n),new Re(i,o,r))}else if(7===arguments.length){let e=arguments[0],t=arguments[1],n=arguments[2],i=arguments[3],o=arguments[4],r=arguments[5],d=arguments[6];Wd.constructor_.call(this,new Re(e,t,n),new Re(i,o,r),d)}};class jd{constructor(){jd.constructor_.apply(this,arguments)}static computeVertexEnvelope(e){for(var t=new be,n=e.iterator(),i;n.hasNext();)i=n.next(),t.expandToInclude(i.getCoordinate());return t}getInitialVertices(){return this._initialVertices}getKDT(){return this._kdt}enforceConstraints(){this.addConstraintVertices();var e=0,t=0;do t=this.enforceGabriel(this._segments),e++;while(0<t&&e<jd.MAX_SPLIT_ITER)}insertSites(e){for(var t=e.iterator(),n;t.hasNext();)n=t.next(),this.insertSite(n)}getVertexFactory(){return this._vertexFactory}getPointArray(){for(var e=Array(this._initialVertices.size()+this._segVertices.size()).fill(null),t=0,n=this._initialVertices.iterator(),i;n.hasNext();)i=n.next(),e[t++]=i.getCoordinate();for(var o=this._segVertices.iterator(),i;o.hasNext();)i=o.next(),e[t++]=i.getCoordinate();return e}setConstraints(e,t){this._segments=e,this._segVertices=t}computeConvexHull(){var e=new Ft,t=this.getPointArray(),n=new Pn(t,e);this._convexHull=n.getConvexHull()}addConstraintVertices(){this.computeConvexHull(),this.insertSites(this._segVertices)}findNonGabrielPoint(e){var t=e.getStart(),n=e.getEnd(),r=new Re((t.x+n.x)/2,(t.y+n.y)/2),d=t.distance(r),s=new be(r);s.expandBy(d);for(var a=this._kdt.query(s),_=null,l=o.MAX_VALUE,g=a.iterator();g.hasNext();){var i=g.next(),c=i.getCoordinate();if(!(c.equals2D(t)||c.equals2D(n))){var u=r.distance(c);if(u<d){var p=u;(null===_||p<l)&&(_=c,l=p)}}}return _}getConstraintSegments(){return this._segments}setSplitPointFinder(e){this._splitFinder=e}getConvexHull(){return this._convexHull}getTolerance(){return this._tolerance}enforceGabriel(e){for(var t=new f,n=0,o=new f,r=e.iterator();r.hasNext();){var i=r.next(),d=this.findNonGabrielPoint(i);if(null!==d){this._splitPt=this._splitFinder.findSplitPoint(i,d);var s=this.createVertex(this._splitPt,i),a=this.insertSite(s);if(!a.getCoordinate().equals2D(this._splitPt));var _=new Wd(i.getStartX(),i.getStartY(),i.getStartZ(),s.getX(),s.getY(),s.getZ(),i.getData()),l=new Wd(s.getX(),s.getY(),s.getZ(),i.getEndX(),i.getEndY(),i.getEndZ(),i.getData());t.add(_),t.add(l),o.add(i),++n}}return e.removeAll(o),e.addAll(t),n}createVertex(){if(1===arguments.length){let t=arguments[0];var e=null;return e=null===this._vertexFactory?new Md(t):this._vertexFactory.createVertex(t,null),e}if(2===arguments.length){let t=arguments[0],n=arguments[1];var e=null;return e=null===this._vertexFactory?new Md(t):this._vertexFactory.createVertex(t,n),e.setOnConstraint(!0),e}}getSubdivision(){return this._subdiv}computeBoundingBox(){var e=jd.computeVertexEnvelope(this._initialVertices),t=jd.computeVertexEnvelope(this._segVertices),n=new be(e);n.expandToInclude(t);var i=.2*n.getWidth(),o=.2*n.getHeight(),r=Ee(i,o);this._computeAreaEnv=new be(n),this._computeAreaEnv.expandBy(r)}setVertexFactory(e){this._vertexFactory=e}formInitialDelaunay(){this.computeBoundingBox(),this._subdiv=new Ud(this._computeAreaEnv,this._tolerance),this._subdiv.setLocator(new qd(this._subdiv)),this._incDel=new Yd(this._subdiv),this.insertSites(this._initialVertices)}insertSite(){if(arguments[0]instanceof Md){let n=arguments[0];var e=this._kdt.insert(n.getCoordinate(),n);if(!e.isRepeated())this._incDel.insertSite(n);else{var t=e.getData();return t.merge(n),t}return n}if(arguments[0]instanceof Re){let e=arguments[0];this.insertSite(this.createVertex(e))}}getClass(){return jd}get interfaces_(){return[]}}jd.constructor_=function(){this._initialVertices=null,this._segVertices=null,this._segments=new f,this._subdiv=null,this._incDel=null,this._convexHull=null,this._splitFinder=new Dd,this._kdt=null,this._vertexFactory=null,this._computeAreaEnv=null,this._splitPt=null,this._tolerance=null;let e=arguments[0],t=arguments[1];this._initialVertices=new f(e),this._tolerance=t,this._kdt=new Li(t)},jd.MAX_SPLIT_ITER=99;class Kd{constructor(){Kd.constructor_.apply(this,arguments)}static extractUniqueCoordinates(e){if(null===e)return new ve;var t=e.getCoordinates();return Kd.unique(t)}static envelope(e){for(var t=new be,n=e.iterator(),i;n.hasNext();)i=n.next(),t.expandToInclude(i);return t}static unique(e){var t=Ke.copyDeep(e);M.sort(t);var n=new ve(t,!1);return n}static toVertices(e){for(var t=new f,n=e.iterator(),i;n.hasNext();)i=n.next(),t.add(new Fd(i));return t}create(){if(null!==this._subdiv)return null;var e=Kd.envelope(this._siteCoords),t=Kd.toVertices(this._siteCoords);this._subdiv=new Ud(e,this._tolerance);var n=new Yd(this._subdiv);n.insertSites(t)}setTolerance(e){this._tolerance=e}setSites(){if(arguments[0]instanceof Ue){let e=arguments[0];this._siteCoords=Kd.extractUniqueCoordinates(e)}else if(l(arguments[0],c)){let e=arguments[0];this._siteCoords=Kd.unique(Ke.toCoordinateArray(e))}}getEdges(e){return this.create(),this._subdiv.getEdges(e)}getSubdivision(){return this.create(),this._subdiv}getTriangles(e){return this.create(),this._subdiv.getTriangles(e)}getClass(){return Kd}get interfaces_(){return[]}}Kd.constructor_=function(){this._siteCoords=null,this._tolerance=0,this._subdiv=null};class Zd{constructor(){Zd.constructor_.apply(this,arguments)}static createConstraintSegments(){if(1===arguments.length){let i=arguments[0];for(var e=cn.getLines(i),t=new f,n=e.iterator(),o;n.hasNext();)o=n.next(),Zd.createConstraintSegments(o,t);return t}if(2===arguments.length){let e=arguments[0],t=arguments[1];for(var r=e.getCoordinates(),n=1;n<r.length;n++)t.add(new Wd(r[n-1],r[n]))}}createSiteVertices(e){for(var t=new f,n=e.iterator(),i;n.hasNext();)i=n.next(),this._constraintVertexMap.containsKey(i)||t.add(new Md(i));return t}create(){if(null!==this._subdiv)return null;var e=Kd.envelope(this._siteCoords),t=new f;null!==this._constraintLines&&(e.expandToInclude(this._constraintLines.getEnvelopeInternal()),this.createVertices(this._constraintLines),t=Zd.createConstraintSegments(this._constraintLines));var n=this.createSiteVertices(this._siteCoords),i=new jd(n,this._tolerance);i.setConstraints(t,new f(this._constraintVertexMap.values())),i.formInitialDelaunay(),i.enforceConstraints(),this._subdiv=i.getSubdivision()}setTolerance(e){this._tolerance=e}setConstraints(e){this._constraintLines=e}setSites(e){this._siteCoords=Kd.extractUniqueCoordinates(e)}getEdges(e){return this.create(),this._subdiv.getEdges(e)}getSubdivision(){return this.create(),this._subdiv}getTriangles(e){return this.create(),this._subdiv.getTriangles(e)}createVertices(e){for(var t=e.getCoordinates(),n=0,o;n<t.length;n++)o=new Md(t[n]),this._constraintVertexMap.put(t[n],o)}getClass(){return Zd}get interfaces_(){return[]}}Zd.constructor_=function(){this._siteCoords=null,this._constraintLines=null,this._tolerance=0,this._subdiv=null,this._constraintVertexMap=new D};class Qd{constructor(){Qd.constructor_.apply(this,arguments)}static clipGeometryCollection(e,t){for(var n=e.getFactory().toGeometry(t),o=new f,r=0;r<e.getNumGeometries();r++){var d=e.getGeometryN(r),s=null;t.contains(d.getEnvelopeInternal())?s=d:t.intersects(d.getEnvelopeInternal())&&(s=n.intersection(d),s.setUserData(d.getUserData())),null===s||s.isEmpty()||o.add(s)}return e.getFactory().createGeometryCollection(Ft.toGeometryArray(o))}create(){if(null!==this._subdiv)return null;var e=Kd.envelope(this._siteCoords);this._diagramEnv=e;var t=Ee(this._diagramEnv.getWidth(),this._diagramEnv.getHeight());this._diagramEnv.expandBy(t),null!==this._clipEnv&&this._diagramEnv.expandToInclude(this._clipEnv);var n=Kd.toVertices(this._siteCoords);this._subdiv=new Ud(e,this._tolerance);var i=new Yd(this._subdiv);i.insertSites(n)}getDiagram(e){this.create();var t=this._subdiv.getVoronoiDiagram(e);return Qd.clipGeometryCollection(t,this._diagramEnv)}setTolerance(e){this._tolerance=e}setSites(){if(arguments[0]instanceof Ue){let e=arguments[0];this._siteCoords=Kd.extractUniqueCoordinates(e)}else if(l(arguments[0],c)){let e=arguments[0];this._siteCoords=Kd.unique(Ke.toCoordinateArray(e))}}setClipEnvelope(e){this._clipEnv=e}getSubdivision(){return this.create(),this._subdiv}getClass(){return Qd}get interfaces_(){return[]}}Qd.constructor_=function(){this._siteCoords=null,this._tolerance=0,this._subdiv=null,this._clipEnv=null,this._diagramEnv=null};var Jd=/*#__PURE__*/Object.freeze({Vertex:Fd}),$d=/*#__PURE__*/Object.freeze({ConformingDelaunayTriangulationBuilder:Zd,DelaunayTriangulationBuilder:Kd,VoronoiDiagramBuilder:Qd,quadedge:Jd});class es{constructor(){es.constructor_.apply(this,arguments)}static getEndLocation(e){var t=new es;return t.setToEnd(e),t}static pointAlongSegmentByFraction(e,t,n){if(0>=n)return e;if(1<=n)return t;var i=(t.x-e.x)*n+e.x,o=(t.y-e.y)*n+e.y,r=(t.z-e.z)*n+e.z;return new Re(i,o,r)}static compareLocationValues(e,t,n,i,o,r){return e<i?-1:e>i?1:t<o?-1:t>o?1:n<r?-1:n>r?1:0}getSegmentIndex(){return this._segmentIndex}getComponentIndex(){return this._componentIndex}isEndpoint(e){var t=e.getGeometryN(this._componentIndex),n=t.getNumPoints()-1;return this._segmentIndex>=n||this._segmentIndex===n&&1<=this._segmentFraction}isValid(e){if(0>this._componentIndex||this._componentIndex>=e.getNumGeometries())return!1;var t=e.getGeometryN(this._componentIndex);return!(0>this._segmentIndex||this._segmentIndex>t.getNumPoints())&&(this._segmentIndex!==t.getNumPoints()||0===this._segmentFraction)&&!(0>this._segmentFraction||1<this._segmentFraction)}normalize(){0>this._segmentFraction&&(this._segmentFraction=0),1<this._segmentFraction&&(this._segmentFraction=1),0>this._componentIndex&&(this._componentIndex=0,this._segmentIndex=0,this._segmentFraction=0),0>this._segmentIndex&&(this._segmentIndex=0,this._segmentFraction=0),1===this._segmentFraction&&(this._segmentFraction=0,this._segmentIndex+=1)}toLowest(e){var t=e.getGeometryN(this._componentIndex),n=t.getNumPoints()-1;return this._segmentIndex<n?this:new es(this._componentIndex,n,1,!1)}getCoordinate(e){var t=e.getGeometryN(this._componentIndex),n=t.getCoordinateN(this._segmentIndex);if(this._segmentIndex>=t.getNumPoints()-1)return n;var i=t.getCoordinateN(this._segmentIndex+1);return es.pointAlongSegmentByFraction(n,i,this._segmentFraction)}getSegmentFraction(){return this._segmentFraction}getSegment(e){var t=e.getGeometryN(this._componentIndex),n=t.getCoordinateN(this._segmentIndex);if(this._segmentIndex>=t.getNumPoints()-1){var i=t.getCoordinateN(t.getNumPoints()-2);return new Ut(i,n)}var o=t.getCoordinateN(this._segmentIndex+1);return new Ut(n,o)}clamp(e){if(this._componentIndex>=e.getNumGeometries())return this.setToEnd(e),null;if(this._segmentIndex>=e.getNumPoints()){var t=e.getGeometryN(this._componentIndex);this._segmentIndex=t.getNumPoints()-1,this._segmentFraction=1}}setToEnd(e){this._componentIndex=e.getNumGeometries()-1;var t=e.getGeometryN(this._componentIndex);this._segmentIndex=t.getNumPoints()-1,this._segmentFraction=1}compareTo(e){var t=e;return this._componentIndex<t._componentIndex?-1:this._componentIndex>t._componentIndex?1:this._segmentIndex<t._segmentIndex?-1:this._segmentIndex>t._segmentIndex?1:this._segmentFraction<t._segmentFraction?-1:this._segmentFraction>t._segmentFraction?1:0}copy(){return new es(this._componentIndex,this._segmentIndex,this._segmentFraction)}toString(){return"LinearLoc["+this._componentIndex+", "+this._segmentIndex+", "+this._segmentFraction+"]"}isOnSameSegment(e){return this._componentIndex===e._componentIndex&&(this._segmentIndex===e._segmentIndex||1==e._segmentIndex-this._segmentIndex&&0===e._segmentFraction||1==this._segmentIndex-e._segmentIndex&&0===this._segmentFraction)}snapToVertex(e,t){if(0>=this._segmentFraction||1<=this._segmentFraction)return null;var n=this.getSegmentLength(e),i=this._segmentFraction*n,o=n-i;i<=o&&i<t?this._segmentFraction=0:o<=i&&o<t&&(this._segmentFraction=1)}compareLocationValues(e,t,n){return this._componentIndex<e?-1:this._componentIndex>e?1:this._segmentIndex<t?-1:this._segmentIndex>t?1:this._segmentFraction<n?-1:this._segmentFraction>n?1:0}getSegmentLength(e){var t=e.getGeometryN(this._componentIndex),n=this._segmentIndex;this._segmentIndex>=t.getNumPoints()-1&&(n=t.getNumPoints()-2);var i=t.getCoordinateN(n),o=t.getCoordinateN(n+1);return i.distance(o)}isVertex(){return 0>=this._segmentFraction||1<=this._segmentFraction}getClass(){return es}get interfaces_(){return[r]}}es.constructor_=function(){if(this._componentIndex=0,this._segmentIndex=0,this._segmentFraction=0,0===arguments.length);else if(1===arguments.length){let e=arguments[0];this._componentIndex=e._componentIndex,this._segmentIndex=e._segmentIndex,this._segmentFraction=e._segmentFraction}else if(2===arguments.length){let e=arguments[0],t=arguments[1];es.constructor_.call(this,0,e,t)}else if(3===arguments.length){let e=arguments[0],t=arguments[1],n=arguments[2];this._componentIndex=e,this._segmentIndex=t,this._segmentFraction=n,this.normalize()}else if(4===arguments.length){let e=arguments[0],t=arguments[1],n=arguments[2],i=arguments[3];this._componentIndex=e,this._segmentIndex=t,this._segmentFraction=n,i&&this.normalize()}};class ts{constructor(){ts.constructor_.apply(this,arguments)}static segmentEndVertexIndex(e){return 0<e.getSegmentFraction()?e.getSegmentIndex()+1:e.getSegmentIndex()}getComponentIndex(){return this._componentIndex}getLine(){return this._currentLine}getVertexIndex(){return this._vertexIndex}getSegmentEnd(){return this._vertexIndex<this.getLine().getNumPoints()-1?this._currentLine.getCoordinateN(this._vertexIndex+1):null}next(){return this.hasNext()?void(this._vertexIndex++,this._vertexIndex>=this._currentLine.getNumPoints()&&(this._componentIndex++,this.loadCurrentLine(),this._vertexIndex=0)):null}loadCurrentLine(){return this._componentIndex>=this._numLines?(this._currentLine=null,null):void(this._currentLine=this._linearGeom.getGeometryN(this._componentIndex))}getSegmentStart(){return this._currentLine.getCoordinateN(this._vertexIndex)}isEndOfLine(){return!(this._componentIndex>=this._numLines)&&!(this._vertexIndex<this._currentLine.getNumPoints()-1)}hasNext(){return!(this._componentIndex>=this._numLines)&&!(this._componentIndex===this._numLines-1&&this._vertexIndex>=this._currentLine.getNumPoints())}getClass(){return ts}get interfaces_(){return[]}}ts.constructor_=function(){if(this._linearGeom=null,this._numLines=null,this._currentLine=null,this._componentIndex=0,this._vertexIndex=0,1===arguments.length){let e=arguments[0];ts.constructor_.call(this,e,0,0)}else if(2===arguments.length){let e=arguments[0],t=arguments[1];ts.constructor_.call(this,e,t.getComponentIndex(),ts.segmentEndVertexIndex(t))}else if(3===arguments.length){let e=arguments[0],n=arguments[1],i=arguments[2];if(!l(e,tt))throw new t("Lineal geometry is required");this._linearGeom=e,this._numLines=e.getNumGeometries(),this._componentIndex=n,this._vertexIndex=i,this.loadCurrentLine()}};class ns{constructor(){ns.constructor_.apply(this,arguments)}static indexOf(e,t){var n=new ns(e);return n.indexOf(t)}static indexOfAfter(e,t,n){var i=new ns(e);return i.indexOfAfter(t,n)}indexOf(e){return this.indexOfFromStart(e,null)}indexOfFromStart(e,t){for(var n=o.MAX_VALUE,i=0,r=0,d=-1,s=new Ut,a=new ts(this._linearGeom);a.hasNext();a.next())if(!a.isEndOfLine()){s.p0=a.getSegmentStart(),s.p1=a.getSegmentEnd();var _=s.distance(e),l=s.segmentFraction(e),g=a.getComponentIndex(),c=a.getVertexIndex();_<n&&(null===t||0>t.compareLocationValues(g,c,l))&&(i=g,r=c,d=l,n=_)}if(n===o.MAX_VALUE)return new es(t);var u=new es(i,r,d);return u}indexOfAfter(e,t){if(null===t)return this.indexOf(e);var n=es.getEndLocation(this._linearGeom);if(0>=n.compareTo(t))return n;var i=this.indexOfFromStart(e,t);return Te.isTrue(0<=i.compareTo(t),"computed location is before specified minimum location"),i}getClass(){return ns}get interfaces_(){return[]}}ns.constructor_=function(){this._linearGeom=null;let e=arguments[0];this._linearGeom=e};class is{constructor(){is.constructor_.apply(this,arguments)}static indicesOf(e,t){var n=new is(e);return n.indicesOf(t)}indicesOf(e){var t=e.getGeometryN(0).getCoordinateN(0),n=e.getGeometryN(e.getNumGeometries()-1),i=n.getCoordinateN(n.getNumPoints()-1),o=new ns(this._linearGeom),r=[,,].fill(null);return r[0]=o.indexOf(t),r[1]=0===e.getLength()?r[0].copy():o.indexOfAfter(i,r[0]),r}getClass(){return is}get interfaces_(){return[]}}is.constructor_=function(){this._linearGeom=null;let e=arguments[0];this._linearGeom=e};class os{constructor(){os.constructor_.apply(this,arguments)}getGeometry(){return this.endLine(),this._geomFact.buildGeometry(this._lines)}getLastCoordinate(){return this._lastPt}endLine(){if(null===this._coordList)return null;if(this._ignoreInvalidLines&&2>this._coordList.size())return this._coordList=null,null;var e=this._coordList.toCoordinateArray(),n=e;this._fixInvalidLines&&(n=this.validCoordinateSequence(e)),this._coordList=null;var i=null;try{i=this._geomFact.createLineString(n)}catch(e){if(!(e instanceof t))throw e;else if(!this._ignoreInvalidLines)throw e}finally{}null!==i&&this._lines.add(i)}setFixInvalidLines(e){this._fixInvalidLines=e}add(){if(1===arguments.length){let e=arguments[0];this.add(e,!0)}else if(2===arguments.length){let e=arguments[0],t=arguments[1];null===this._coordList&&(this._coordList=new ve),this._coordList.add(e,t),this._lastPt=e}}setIgnoreInvalidLines(e){this._ignoreInvalidLines=e}validCoordinateSequence(e){if(2<=e.length)return e;var t=[e[0],e[0]];return t}getClass(){return os}get interfaces_(){return[]}}os.constructor_=function(){this._geomFact=null,this._lines=new f,this._coordList=null,this._ignoreInvalidLines=!1,this._fixInvalidLines=!1,this._lastPt=null;let e=arguments[0];this._geomFact=e};class rs{constructor(){rs.constructor_.apply(this,arguments)}static extract(e,t,n){var i=new rs(e);return i.extract(t,n)}computeLinear(e,t){var n=new os(this._line.getFactory());n.setFixInvalidLines(!0),e.isVertex()||n.add(e.getCoordinate(this._line));for(var i=new ts(this._line,e),o;i.hasNext()&&!(0>t.compareLocationValues(i.getComponentIndex(),i.getVertexIndex(),0));i.next())o=i.getSegmentStart(),n.add(o),i.isEndOfLine()&&n.endLine();return t.isVertex()||n.add(t.getCoordinate(this._line)),n.getGeometry()}computeLine(e,t){var n=this._line.getCoordinates(),o=new ve,r=e.getSegmentIndex();0<e.getSegmentFraction()&&(r+=1);var d=t.getSegmentIndex();1===t.getSegmentFraction()&&(d+=1),d>=n.length&&(d=n.length-1),e.isVertex()||o.add(e.getCoordinate(this._line));for(var s=r;s<=d;s++)o.add(n[s]);t.isVertex()||o.add(t.getCoordinate(this._line)),0>=o.size()&&o.add(e.getCoordinate(this._line));var a=o.toCoordinateArray();return 1>=a.length&&(a=[a[0],a[0]]),this._line.getFactory().createLineString(a)}extract(e,t){return 0>t.compareTo(e)?this.reverse(this.computeLinear(t,e)):this.computeLinear(e,t)}reverse(e){return e instanceof ut?e.reverse():e instanceof st?e.reverse():(Te.shouldNeverReachHere("non-linear geometry encountered"),null)}getClass(){return rs}get interfaces_(){return[]}}rs.constructor_=function(){this._line=null;let e=arguments[0];this._line=e};class ds{constructor(){ds.constructor_.apply(this,arguments)}clampIndex(e){var t=e.copy();return t.clamp(this._linearGeom),t}project(e){return ns.indexOf(this._linearGeom,e)}checkGeometryType(){if(!(this._linearGeom instanceof ut||this._linearGeom instanceof st))throw new t("Input geometry must be linear")}extractPoint(){if(1===arguments.length){let e=arguments[0];return e.getCoordinate(this._linearGeom)}if(2===arguments.length){let t=arguments[0],n=arguments[1];var e=t.toLowest(this._linearGeom);return e.getSegment(this._linearGeom).pointAlongOffset(e.getSegmentFraction(),n)}}isValidIndex(e){return e.isValid(this._linearGeom)}getEndIndex(){return es.getEndLocation(this._linearGeom)}getStartIndex(){return new es}indexOfAfter(e,t){return ns.indexOfAfter(this._linearGeom,e,t)}extractLine(e,t){return rs.extract(this._linearGeom,e,t)}indexOf(e){return ns.indexOf(this._linearGeom,e)}indicesOf(e){return is.indicesOf(this._linearGeom,e)}getClass(){return ds}get interfaces_(){return[]}}ds.constructor_=function(){this._linearGeom=null;let e=arguments[0];this._linearGeom=e,this.checkGeometryType()};class ss{constructor(){ss.constructor_.apply(this,arguments)}static indexOf(e,t){var n=new ss(e);return n.indexOf(t)}static indexOfAfter(e,t,n){var i=new ss(e);return i.indexOfAfter(t,n)}indexOf(e){return this.indexOfFromStart(e,-1)}indexOfFromStart(e,t){for(var n=o.MAX_VALUE,i=t,r=0,d=new Ut,s=new ts(this._linearGeom);s.hasNext();){if(!s.isEndOfLine()){d.p0=s.getSegmentStart(),d.p1=s.getSegmentEnd();var a=d.distance(e),_=this.segmentNearestMeasure(d,e,r);a<n&&_>t&&(i=_,n=a),r+=d.getLength()}s.next()}return i}indexOfAfter(e,t){if(0>t)return this.indexOf(e);var n=this._linearGeom.getLength();if(n<t)return n;var i=this.indexOfFromStart(e,t);return Te.isTrue(i>=t,"computed index is before specified minimum index"),i}segmentNearestMeasure(e,t,n){var i=e.projectionFactor(t);return 0>=i?n:1>=i?n+i*e.getLength():n+e.getLength()}getClass(){return ss}get interfaces_(){return[]}}ss.constructor_=function(){this._linearGeom=null;let e=arguments[0];this._linearGeom=e};class as{constructor(){as.constructor_.apply(this,arguments)}static getLength(e,t){var n=new as(e);return n.getLength(t)}static getLocation(){if(2===arguments.length){let t=arguments[0],n=arguments[1];var e=new as(t);return e.getLocation(n)}if(3===arguments.length){let t=arguments[0],n=arguments[1],i=arguments[2];var e=new as(t);return e.getLocation(n,i)}}getLength(e){for(var t=0,n=new ts(this._linearGeom);n.hasNext();){if(!n.isEndOfLine()){var i=n.getSegmentStart(),o=n.getSegmentEnd(),r=o.distance(i);if(e.getComponentIndex()===n.getComponentIndex()&&e.getSegmentIndex()===n.getVertexIndex())return t+r*e.getSegmentFraction();t+=r}n.next()}return t}resolveHigher(e){if(!e.isEndpoint(this._linearGeom))return e;var t=e.getComponentIndex();if(t>=this._linearGeom.getNumGeometries()-1)return e;do t++;while(t<this._linearGeom.getNumGeometries()-1&&0===this._linearGeom.getGeometryN(t).getLength());return new es(t,0,0)}getLocation(){if(1===arguments.length){let e=arguments[0];return this.getLocation(e,!0)}if(2===arguments.length){let i=arguments[0],o=arguments[1];var e=i;if(0>i){var t=this._linearGeom.getLength();e=t+i}var n=this.getLocationForward(e);return o?n:this.resolveHigher(n)}}getLocationForward(e){if(0>=e)return new es;for(var t=0,n=new ts(this._linearGeom);n.hasNext();){if(!n.isEndOfLine()){var i=n.getSegmentStart(),o=n.getSegmentEnd(),r=o.distance(i);if(t+r>e){var d=(e-t)/r,s=n.getComponentIndex(),a=n.getVertexIndex();return new es(s,a,d)}t+=r}else if(t===e){var s=n.getComponentIndex(),a=n.getVertexIndex();return new es(s,a,0)}n.next()}return es.getEndLocation(this._linearGeom)}getClass(){return as}get interfaces_(){return[]}}as.constructor_=function(){this._linearGeom=null;let e=arguments[0];this._linearGeom=e};class _s{constructor(){_s.constructor_.apply(this,arguments)}clampIndex(e){var t=this.positiveIndex(e),n=this.getStartIndex();if(t<n)return n;var i=this.getEndIndex();return t>i?i:t}locationOf(){if(1===arguments.length){let e=arguments[0];return as.getLocation(this._linearGeom,e)}if(2===arguments.length){let e=arguments[0],t=arguments[1];return as.getLocation(this._linearGeom,e,t)}}project(e){return ss.indexOf(this._linearGeom,e)}positiveIndex(e){return 0<=e?e:this._linearGeom.getLength()+e}extractPoint(){if(1===arguments.length){let t=arguments[0];var e=as.getLocation(this._linearGeom,t);return e.getCoordinate(this._linearGeom)}if(2===arguments.length){let n=arguments[0],i=arguments[1];var e=as.getLocation(this._linearGeom,n),t=e.toLowest(this._linearGeom);return t.getSegment(this._linearGeom).pointAlongOffset(t.getSegmentFraction(),i)}}isValidIndex(e){return e>=this.getStartIndex()&&e<=this.getEndIndex()}getEndIndex(){return this._linearGeom.getLength()}getStartIndex(){return 0}indexOfAfter(e,t){return ss.indexOfAfter(this._linearGeom,e,t)}extractLine(e,t){var n=new ds(this._linearGeom),i=this.clampIndex(e),o=this.clampIndex(t),r=this.locationOf(i,i===o),d=this.locationOf(o);return rs.extract(this._linearGeom,r,d)}indexOf(e){return ss.indexOf(this._linearGeom,e)}indicesOf(e){var t=is.indicesOf(this._linearGeom,e),n=[as.getLength(this._linearGeom,t[0]),as.getLength(this._linearGeom,t[1])];return n}getClass(){return _s}get interfaces_(){return[]}}_s.constructor_=function(){this._linearGeom=null;let e=arguments[0];this._linearGeom=e};var ls=/*#__PURE__*/Object.freeze({LengthIndexedLine:_s,LengthLocationMap:as,LinearGeometryBuilder:os,LinearIterator:ts,LinearLocation:es,LocationIndexedLine:ds});class gs{get interfaces_(){return[]}getClass(){return gs}static union(e,t){if(e.isEmpty()||t.isEmpty()){if(e.isEmpty()&&t.isEmpty())return Pr.createEmptyResult(Pr.UNION,e,t,e.getFactory());if(e.isEmpty())return t.copy();if(t.isEmpty())return e.copy()}return e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(t),Rr.overlayOp(e,t,Pr.UNION)}}Ue.prototype.equalsTopo=function(e){return!!this.getEnvelopeInternal().equals(e.getEnvelopeInternal())&&Jr.relate(this,e).isEquals(this.getDimension(),e.getDimension())},Ue.prototype.union=function(){if(0===arguments.length)return od.union(this);if(1===arguments.length){let e=arguments[0];return gs.union(this,e)}},Ue.prototype.isValid=function(){return gd.isValid(this)},Ue.prototype.intersection=function(e){return Pr.intersection(this,e)},Ue.prototype.covers=function(e){return Jr.covers(this,e)},Ue.prototype.coveredBy=function(e){return Jr.covers(e,this)},Ue.prototype.touches=function(e){return Jr.touches(this,e)},Ue.prototype.intersects=function(e){return Jr.intersects(this,e)},Ue.prototype.within=function(e){return Jr.contains(e,this)},Ue.prototype.overlaps=function(e){return Jr.overlaps(this,e)},Ue.prototype.disjoint=function(e){return Jr.disjoint(this,e)},Ue.prototype.crosses=function(e){return Jr.crosses(this,e)},Ue.prototype.buffer=function(){if(1===arguments.length){let e=arguments[0];return ko.bufferOp(this,e)}if(2===arguments.length){let e=arguments[0],t=arguments[1];return ko.bufferOp(this,e,t)}if(3===arguments.length){let e=arguments[0],t=arguments[1],n=arguments[2];return ko.bufferOp(this,e,t,n)}},Ue.prototype.convexHull=function(){return new Pn(this).getConvexHull()},Ue.prototype.relate=function(...e){if(1===arguments.length){let e=arguments[0];return Jr.relate(this,e)}if(2===arguments.length){let e=arguments[0],t=arguments[1];return Jr.relate(this,e).matches(t)}},Ue.prototype.getCentroid=function(){if(this.isEmpty())return this._factory.createPoint();var e=Rn.getCentroid(this);return this.createPointFromInternalCoord(e,this)},Ue.prototype.getInteriorPoint=function(){if(this.isEmpty())return this._factory.createPoint();var e=null,t=this.getDimension();if(0===t){var n=new Fn(this);e=n.getInteriorPoint()}else if(1===t){var n=new An(this);e=n.getInteriorPoint()}else{var n=new bn(this);e=n.getInteriorPoint()}return this.createPointFromInternalCoord(e,this)},Ue.prototype.symDifference=function(e){return Pr.symDifference(this,e)},Ue.prototype.createPointFromInternalCoord=function(e,t){return t.getPrecisionModel().makePrecise(e),t.getFactory().createPoint(e)},Ue.prototype.toText=function(){var e=new qt;return e.write(this)},Ue.prototype.toString=function(){this.toText()},Ue.prototype.contains=function(e){return Jr.contains(this,e)},Ue.prototype.difference=function(e){return Pr.difference(this,e)},Ue.prototype.isSimple=function(){var e=new uo(this);return e.isSimple()},Ue.prototype.isWithinDistance=function(e,t){var n=this.getEnvelopeInternal().distance(e.getEnvelopeInternal());return!(n>t)&&Zo.isWithinDistance(this,e,t)},Ue.prototype.distance=function(e){return Zo.distance(this,e)},Ue.prototype.isEquivalentClass=function(e){return this.getClass()===e.getClass()};return e.version="npm_package_version (git_hash)",e.algorithm=Yn,e.densify=Vn,e.dissolve=Kn,e.geom=Zt,e.geomgraph=Ei,e.index=ki,e.io=Ki,e.noding=co,e.operation=ud,e.precision=yd,e.simplify=Pd,e.triangulate=$d,e.linearref=ls,e}({});
//# sourceMappingURL=jsts-min.js.map
